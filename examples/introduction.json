{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[{"id":4,"name":"Landing Page","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<>\n  {/* background hack */}\n  <div\n    className={`\n      absolute z-[-1]\n      left-[-10rem] top-[-4rem]\n      w-[calc(100vw_+_10rem)] h-[min(30rem,_40vw_+_10rem)]\n      bg-gradient-to-br from-sky-400 to-cyan-200\n      shadow-xl shadow-gray-200/30\n    `}\n  />\n    \n  <h1 className=\"flex space-x-2 justify-center items-baseline my-2 text-5xl\">\n    <img className=\"h-12 brightness-125\" src={resheet.assets.logoSvg} alt=\"ReSheet Logo\"/>\n    <span>ReSheet</span>\n    <span className=\"text-2xl\">beta</span>\n  </h1>\n</>"}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<div className=\"text-center text-xl\">A hackable notes-spreadsheet-hybrid for programmers</div>","note":{"type":"text","tag":"p","text":"<div className=\"text-center text-xl\">A hackable notes-spreadsheet-hybrid for programmers</div>"}}},{"id":108,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":90,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"= <div className=\"mx-auto my-4 w-full max-w-[900px]\">{Demo}</div>","note":{"type":"expr","code":" <div className=\"mx-auto my-4 w-full max-w-[900px]\">{Demo}</div>"}}},{"id":124,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"<div class=\"h-64\"/>","note":{"type":"text","tag":"p","text":"<div class=\"h-64\"/>"}}},{"id":97,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<Components.Section>\n  <Components.Hero\n    title=\"ReSheet is a notepad similar to Notion\"\n    description=\"Organize notes, todos and more in a structure of folders\"\n    img={Examples.notepad}\n    />\n</Components.Section>"}}},{"id":110,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<Components.Hero\n  reverse\n  title=\"But with the power of JavaScript and React\"\n  description=\"Create sophisticated spreadsheets using their vast ecosystems\"\n  img={Examples.formulas}\n  />"}}},{"id":111,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<Components.Section>\n  <Components.Hero\n    title=\"Highly extensible through custom Blocks\"\n    description=\"The only limit is the browser and JavaScript\"\n    img={Examples.extensibility}\n    />\n</Components.Section>"}}},{"id":122,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<section\n  className=\"flex flex-col min-h-[80vh] py-40 justify-evenly\"\n>\n  <div>\n    <h2 className=\"text-center text-3xl text-yellow-500 font-medium\">\n      Start using ReSheet\n    </h2>\n    <div className=\"mt-4 text-center text-zinc-600\">\n      by editing this document\n    </div>\n  </div>\n  \n  \n  <details className=\"rounded-lg mx-auto max-w-prose w-fit space-y-5 px-4 py-2 rounded open:bg-sky-50\">\n    <summary className=\"text-xl text-gray-600\">\n      What can I do?\n    </summary>\n    <p>\n      Edit any element by clicking or double-clicking on it. <kbd className=\"text-yellow-600\">⌘⏎</kbd> /\n      <kbd className=\"text-yellow-600\">Ctrl-Enter</kbd> will\n      generally give you a new line.\n    </p>\n    <p>\n      Open the sidebar with the <FontAwesomeIcon className=\"mx-0.5 text-yellow-600\" icon={faSolid.faBars} />-button on the top left to see\n      other pages.\n    </p>\n    <p>\n      Create a new page, a new document, or view the docs and example pages in\n      the sidebar.\n    </p>\n  </details>\n</section>"}}},{"id":102,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":101,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<p class=\"text-center\">ReSheet is <span class=\"text-yellow-600\">open source</span> under the permissive MIT license.</p>","note":{"type":"text","tag":"p","text":"<p class=\"text-center\">ReSheet is <span class=\"text-yellow-600\">open source</span> under the permissive MIT license.</p>"}}},{"id":107,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<p class=\"text-center\">ReSheet on [GitHub](https://github.com/keenbug/ReSheet/) | [Discord](https://discord.gg/TQePmKJNQP) | [Bluesky](https://bsky.app/profile/resheet.dev) | [X](https://x.com/resheetdev)</p>","note":{"type":"text","tag":"p","text":"<p class=\"text-center\">ReSheet on [GitHub](https://github.com/keenbug/ReSheet/) | [Discord](https://discord.gg/TQePmKJNQP) | [Bluesky](https://bsky.app/profile/resheet.dev) | [X](https://x.com/resheetdev)</p>"}}},{"id":125,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <p className=\"text-center\"><Components.MailTo recipient=\"contact\" domain=\"danielkrueger.dev\">Contact me</Components.MailTo></p>","note":{"type":"expr","code":" <p className=\"text-center\"><Components.MailTo recipient=\"contact\" domain=\"danielkrueger.dev\">Contact me</Components.MailTo></p>"}}},{"id":126,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"Components","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Components","note":{"type":"text","tag":"h1","text":"Components"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The components used on the landing page","note":{"type":"text","tag":"p","text":"The components used on the landing page"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Hero","note":{"type":"text","tag":"h2","text":"Hero"}}},{"id":0,"name":"Hero","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Hero({ title, description, img, reverse=false }) {\n  return (\n    <div\n      className={`\n        max-w-screen-xl mx-auto my-10 lg:my-40\n        flex flex-col justify-stretch items-center\n        lg:${reverse ? 'flex-row-reverse' : 'flex-row'}\n      `}\n    >\n      {img}\n      <div className=\"my-12 mx-16\">\n        <h3 className=\"text-2xl text-black font-light\">\n          {title}\n        </h3>\n        {description &&\n          <p className=\"mt-3 text-gray-800\">{description}</p>\n        }\n      </div>\n    </div>\n  )\n}"}}},{"id":2,"name":"heroExample","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<Hero\n  title=\"ReSheet is a notepad similar to Notion\"\n  description=\"Organize notes, todos and more in a structure of folders\"\n  img={<div className=\"w-1/2 aspect-video bg-gray-100 rounded-lg shadow-lg\" />}\n  />"}}},{"id":15,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Section","note":{"type":"text","tag":"h2","text":"Section"}}},{"id":18,"name":"Section","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Section({ children }) {\n  return (\n    <div className=\"rounded-lg bg-gradient-to-tl from-sky-200 to-cyan-100 py-4 px-2 sm:mx-4\">\n      {children}\n    </div>\n  )\n}"}}},{"id":19,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= <Section>{heroExample}</Section>","note":{"type":"expr","code":" <Section>{heroExample}</Section>"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## MailTo","note":{"type":"text","tag":"h2","text":"MailTo"}}},{"id":12,"name":"MailTo","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function MailTo({ recipient, domain, children }) {\n  function sendMail() {\n    const elem = document.createElement('a')\n    elem.href = `mailto:${recipient}@${domain}`\n    elem.click()\n  }\n  \n  return <a className=\"text-blue-800 cursor-pointer\" onClick={sendMail}>{children}</a>\n}"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <MailTo recipient=\"contact\" domain=\"danielkrueger.dev\">Send me an email</MailTo>","note":{"type":"expr","code":" <MailTo recipient=\"contact\" domain=\"danielkrueger.dev\">Send me an email</MailTo>"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":5,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ({ Hero, Section, MailTo })","note":{"type":"expr","code":" ({ Hero, Section, MailTo })"}}}]}},"isCollapsed":false,"children":[]},{"id":1,"name":"Examples","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Examples","note":{"type":"text","tag":"h1","text":"Examples"}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The small example documents shown on the landing page.","note":{"type":"text","tag":"p","text":"The small example documents shown on the landing page."}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"Example","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Example({ template, scale=0.75 }) {\n  const env = library\n  const [state, dispatch] = resheet.core.block.useBlockDispatcher(template.init, [{ env }])\n\n  return (\n    <div className={`\n      w-full max-w-screen-sm lg:max-w-full lg:w-1/2\n      h-[50vh] sm:h-fit sm:aspect-video\n      rounded-xl border border-gray-100\n      bg-white shadow-md overflow-clip\n    `}>\n      <div className={`w-[${100 / scale}%] h-[${100 / scale}%] origin-top-left scale-[${scale}]`}>\n        {template.view({ state, dispatch, env })}\n      </div>\n    </div>\n  )\n}"}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Usage","note":{"type":"text","tag":"h4","text":"Usage"}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <Example template={DocumentOf(Code)} scale={0.5} />","note":{"type":"expr","code":" <Example template={DocumentOf(Code)} scale={0.5} />"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Notepad","note":{"type":"text","tag":"h3","text":"Notepad"}}},{"id":0,"name":"notepad","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(DocumentOf(SheetOf(Note)))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(DocumentOf(SheetOf(Note)))","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[{"id":0,"name":"Todos","state":{"t":"resheet.sheet","v":2,"lines":[{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Home","note":{"type":"text","tag":"h4","text":"Home"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[x] Fix squeeky doors","note":{"type":"checkbox","checked":true,"text":"Fix squeeky doors"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[] Replace empty batteries","note":{"type":"checkbox","checked":false,"text":"Replace empty batteries"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[] Organize documents","note":{"type":"checkbox","checked":false,"text":"Organize documents"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Bike","note":{"type":"text","tag":"h4","text":"Bike"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[] Replace tires","note":{"type":"checkbox","checked":false,"text":"Replace tires"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[x] Replace brakepads","note":{"type":"checkbox","checked":true,"text":"Replace brakepads"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Office","note":{"type":"text","tag":"h4","text":"Office"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[x] File taxes","note":{"type":"checkbox","checked":true,"text":"File taxes"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[ ] Track finances","note":{"type":"checkbox","checked":false,"text":"Track finances"}}}]},"isCollapsed":true,"children":[]},{"id":1,"name":"Weekly Plan","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Monday","note":{"type":"text","tag":"h3","text":"Monday"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Evening: Training","note":{"type":"text","tag":"p","text":"Evening: Training"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Tuesday","note":{"type":"text","tag":"h3","text":"Tuesday"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Morning: Meditation","note":{"type":"text","tag":"p","text":"Morning: Meditation"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Evening: Call Paul","note":{"type":"text","tag":"p","text":"Evening: Call Paul"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Wednesday","note":{"type":"text","tag":"h3","text":"Wednesday"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Evening: Free time","note":{"type":"text","tag":"p","text":"Evening: Free time"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Thursday","note":{"type":"text","tag":"h3","text":"Thursday"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Morning: Go for a run","note":{"type":"text","tag":"p","text":"Morning: Go for a run"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Evening: Cook dinner","note":{"type":"text","tag":"p","text":"Evening: Cook dinner"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Friday","note":{"type":"text","tag":"h3","text":"Friday"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"-- Nothing --","note":{"type":"text","tag":"p","text":"-- Nothing --"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Saturday","note":{"type":"text","tag":"h3","text":"Saturday"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Buy groceries","note":{"type":"text","tag":"p","text":"Buy groceries"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Sunday","note":{"type":"text","tag":"h3","text":"Sunday"}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Meet friends","note":{"type":"text","tag":"p","text":"Meet friends"}}}]},"isCollapsed":true,"children":[]},{"id":2,"name":"Goals","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Get fit","note":{"type":"text","tag":"h3","text":"Get fit"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[x] January: Train 3x/week","note":{"type":"checkbox","checked":true,"text":"January: Train 3x/week"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[] February: Run every week","note":{"type":"checkbox","checked":false,"text":"February: Run every week"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[] March: Yoga every morning","note":{"type":"checkbox","checked":false,"text":"March: Yoga every morning"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Spend more time with Family","note":{"type":"text","tag":"h3","text":"Spend more time with Family"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[x] January","note":{"type":"checkbox","checked":true,"text":"January"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[x] February","note":{"type":"checkbox","checked":true,"text":"February"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[] March","note":{"type":"checkbox","checked":false,"text":"March"}}}]},"isCollapsed":true,"children":[]},{"id":3,"name":"Finances","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Finances","note":{"type":"text","tag":"h3","text":"Finances"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**BIG TODO**","note":{"type":"text","tag":"p","text":"**BIG TODO**"}}}]},"isCollapsed":true,"children":[]}],"viewState":{"sidebarOpen":true,"openPage":[0]},"template":{"id":-1,"name":"","state":{"t":"resheet.sheet","v":2,"lines":[]},"isCollapsed":true,"children":[]}}}}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### JavaScript and React","note":{"type":"text","tag":"h3","text":"JavaScript and React"}}},{"id":17,"name":"formulas","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(DocumentOf(SheetOf(Note)))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(DocumentOf(SheetOf(Note)))","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[{"id":0,"name":"Finances","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Finances","note":{"type":"text","tag":"h3","text":"Finances"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Income:","note":{"type":"text","tag":"p","text":"Income:"}}},{"id":2,"name":"income","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 3500","note":{"type":"expr","code":" 3500"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Expenses:","note":{"type":"text","tag":"p","text":"Expenses:"}}},{"id":5,"name":"expenses","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= (await fetch('https://raw.githubusercontent.com/keenbug/ReSheet/main/examples/expenses.json')).json()","note":{"type":"expr","code":" (await fetch('https://raw.githubusercontent.com/keenbug/ReSheet/main/examples/expenses.json')).json()"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Balance:","note":{"type":"text","tag":"p","text":"Balance:"}}},{"id":8,"name":"balance","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= income - lodash.sum(Object.values(expenses))","note":{"type":"expr","code":" income - lodash.sum(Object.values(expenses))"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Savings in a year:","note":{"type":"text","tag":"p","text":"Savings in a year:"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= balance * 12","note":{"type":"expr","code":" balance * 12"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Unplanned expenses:","note":{"type":"text","tag":"p","text":"Unplanned expenses:"}}},{"id":14,"name":"unplanned","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= Array(30).fill().map(() => Math.random() * 500)","note":{"type":"expr","code":" Array(30).fill().map(() => Math.random() * 500)"}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, LineChart, Line, XAxis, YAxis } =\n  await import('https://esm.sh/recharts?external=react');\n  \nconst balances = unplanned.reduce(\n  (balances, expense) => [\n    balances[0] - expense + balance,\n    ...balances,\n  ],\n  [13054],\n)\n  .toReversed();\n\n<ResponsiveContainer height={400}>\n  <LineChart data={balances}>\n    <Line type=\"monotone\" dataKey={v => v} fill=\"#8884d8\" />\n    <XAxis/>\n    <YAxis/>\n  </LineChart>\n</ResponsiveContainer>"}}}]},"isCollapsed":true,"children":[]}],"viewState":{"sidebarOpen":false,"openPage":[0]},"template":{"id":-1,"name":"","state":{"t":"resheet.sheet","v":2,"lines":[]},"isCollapsed":true,"children":[]}}}}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Extensibility","note":{"type":"text","tag":"h3","text":"Extensibility"}}},{"id":15,"name":"DefaultPageBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= BlockSelector('SheetOf(Note)', SheetOf(Note))","note":{"type":"expr","code":" BlockSelector('SheetOf(Note)', SheetOf(Note))"}}},{"id":16,"name":"ReSheet","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= DocumentOf(DefaultPageBlock)","note":{"type":"expr","code":" DocumentOf(DefaultPageBlock)"}}},{"id":14,"name":"extensibility","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(ReSheet)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(ReSheet)","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[{"id":2,"name":"Examples","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"$`Custom Blocks`","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Custom Blocks","note":{"type":"text","tag":"h3","text":"Custom Blocks"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We build these custom Blocks in \"Examples > Custom Blocks\":","note":{"type":"text","tag":"p","text":"We build these custom Blocks in \"Examples > Custom Blocks\":"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/DateBlock()`","note":{"type":"text","tag":"h4","text":"`/DateBlock()`"}}},{"id":26,"name":"dateBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/DateBlock()","note":{"type":"block","isInstantiated":true,"code":"DateBlock()","state":"2024-05-23T20:32:56+02:00"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dateBlockValue","note":{"type":"expr","code":" dateBlockValue"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/SliderBlock()`","note":{"type":"text","tag":"h4","text":"`/SliderBlock()`"}}},{"id":9,"name":"sliderBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SliderBlock()","note":{"type":"block","isInstantiated":true,"code":"SliderBlock()","state":49}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`","note":{"type":"text","tag":"h4","text":"`/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`"}}},{"id":28,"name":"options","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ['yes', 'no']","note":{"type":"expr","code":" ['yes', 'no']"}}},{"id":22,"name":"hstack","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/HStack(DateBlock(), SliderBlock(), SelectBlock(options))","note":{"type":"block","isInstantiated":true,"code":"HStack(DateBlock(), SliderBlock(), SelectBlock(options))","state":["2024-05-23T20:40:02+02:00",35,"yes"]}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= hstack","note":{"type":"expr","code":" hstack"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Built-in Blocks","note":{"type":"text","tag":"h4","text":"Built-in Blocks"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"And we inspect some built-in Blocks:","note":{"type":"text","tag":"p","text":"And we inspect some built-in Blocks:"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Note)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Note)`"}}},{"id":15,"name":"inspectNote","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Note)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Note)","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNote.state","note":{"type":"expr","code":" inspectNote.state"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>","note":{"type":"text","tag":"p","text":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>"}}}]}},"isCollapsed":true,"children":[{"id":2,"name":"Custom Blocks","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Custom Blocks","note":{"type":"text","tag":"h1","text":"Custom Blocks"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Create custom Blocks and use the Inspect Block to get a glimpse into ReSheet.","note":{"type":"text","tag":"p","text":"Create custom Blocks and use the Inspect Block to get a glimpse into ReSheet."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Simple custom Blocks","note":{"type":"text","tag":"h2","text":"Simple custom Blocks"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's build a simple checkbox Block:","note":{"type":"text","tag":"p","text":"Let's build a simple checkbox Block:"}}},{"id":8,"name":"CheckBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"label => SimpleBlock(false, ({ ref, state, onUpdate }) =>\n  <label>\n    <input\n      ref={ref}\n      type=\"checkbox\"\n      checked={state}\n      onChange={onUpdate('target.checked')}\n      />\n    {' '}\n    {label}\n  </label>\n)"}}},{"id":9,"name":"input","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/CheckBlock(\"Does it work?\")","note":{"type":"block","isInstantiated":true,"code":"CheckBlock(\"Does it work?\")","state":true}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":87,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":88,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Having an editable label would be nice:","note":{"type":"text","tag":"p","text":"Having an editable label would be nice:"}}},{"id":14,"name":"CheckEditableBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"SimpleBlock(\n  { checked: false, label: '' },\n  ({ ref, state, onUpdate, setState }) => (\n    <label>\n      <input\n        type=\"checkbox\"\n        checked={state.checked}\n        onChange={onUpdate('target.checked', 'checked')}\n        />\n      {' '}\n      <input\n        ref={ref}\n        type=\"text\"\n        value={state.label}\n        placeholder=\"label\"\n        onKeyDown={ev => {\n          if (ev.key === 'Enter') {\n            setState(checked => !checked, 'checked')\n          }\n        }}\n        onChange={onUpdate('target.value', 'label')}\n        />\n    </label>\n  ),\n)"}}},{"id":15,"name":"input2","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/CheckEditableBlock","note":{"type":"block","isInstantiated":true,"code":"CheckEditableBlock","state":{"checked":true,"label":"This works too"}}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input2","note":{"type":"expr","code":" input2"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":85,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":86,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a slider Block:","note":{"type":"text","tag":"p","text":"Build a slider Block:"}}},{"id":20,"name":"SliderBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function SliderBlock(props) {\n  const rangeProps = immutable.merge({ min: 0, max: 100, step: 1 }, props)\n  return SimpleBlock(rangeProps.min ?? 0, ({ ref, state, onUpdate }) =>\n    <input\n      ref={ref}\n      type=\"range\"\n      className=\"w-full\"\n      value={state}\n      {...rangeProps}\n      onChange={onUpdate('target.value', [], Number)}\n    />\n  )\n}"}}},{"id":21,"name":"rangeInput","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SliderBlock()","note":{"type":"block","isInstantiated":true,"code":"SliderBlock()","state":37}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= rangeInput","note":{"type":"expr","code":" rangeInput"}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":113,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":114,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":115,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a select Block:","note":{"type":"text","tag":"p","text":"Build a select Block:"}}},{"id":116,"name":"SelectBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function SelectBlock(values) {\n  return SimpleBlock(values[0],\n    ({ ref, state, onUpdate }) => (\n      <select\n        ref={ref}\n        className=\"w-full\"\n        value={state}\n        onChange={onUpdate('target.value')}\n      >\n        {values.map(value => (\n          <option key={value} value={value}>\n            {value}\n          </option>\n        ))}\n      </select>\n    )\n  )\n}"}}},{"id":118,"name":"options","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ['January', 'February', 'March', 'April', 'May', 'June']","note":{"type":"expr","code":" ['January', 'February', 'March', 'April', 'May', 'June']"}}},{"id":117,"name":"selected","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SelectBlock(options)","note":{"type":"block","isInstantiated":true,"code":"SelectBlock(options)","state":"March"}}},{"id":119,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= selected","note":{"type":"expr","code":" selected"}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":121,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":120,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":137,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Simple Custom Block Wrapper","note":{"type":"text","tag":"h2","text":"Simple Custom Block Wrapper"}}},{"id":122,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Use an external library and build a Block around it:","note":{"type":"text","tag":"p","text":"Use an external library and build a Block around it:"}}},{"id":127,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":124,"name":"Datepicker","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/react-datepicker?external=react')","note":{"type":"expr","code":" import('https://esm.sh/react-datepicker?external=react')"}}},{"id":125,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"includeCss('https://esm.sh/react-datepicker/dist/react-datepicker.css')"}}},{"id":128,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":138,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"It looks like this:","note":{"type":"text","tag":"p","text":"It looks like this:"}}},{"id":126,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <Datepicker.default inline />","note":{"type":"expr","code":" <Datepicker.default inline />"}}},{"id":135,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":136,"name":"datefns","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/date-fns')","note":{"type":"expr","code":" import('https://esm.sh/date-fns')"}}},{"id":129,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":139,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's wrap it in a Block, so its state is persisted and the selected date can be used:","note":{"type":"text","tag":"p","text":"Let's wrap it in a Block, so its state is persisted and the selected date can be used:"}}},{"id":123,"name":"DateBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function DateBlock() {\n  return SimpleBlock(new Date(),\n    ({ state, setState }) => {\n      return (\n        <div className=\"flex flex-col items-center\">\n          <Datepicker.default\n            inline\n            selected={state}\n            onSelect={date => setState(date)}\n            />\n        </div>\n      )\n    },\n    {\n      toJSON(date) { return datefns.formatISO(date) },\n      fromJSON(json) {\n        const date = datefns.parseISO(json)\n        return datefns.isValid(date) ? date : new Date()\n      },\n    },\n  )\n}"}}},{"id":133,"name":"date","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/DateBlock()","note":{"type":"block","isInstantiated":true,"code":"DateBlock()","state":"2024-05-23T20:32:56+02:00"}}},{"id":134,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= date","note":{"type":"expr","code":" date"}}},{"id":131,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":132,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Builtin Blocks","note":{"type":"text","tag":"h2","text":"Builtin Blocks"}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We already used `Code` many times:","note":{"type":"text","tag":"p","text":"We already used `Code` many times:"}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Code`","note":{"type":"text","tag":"p","text":"`/Code`"}}},{"id":34,"name":"codeResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"12 * 12"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":82,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"But we can also take a peek inside with the `Inspect` Block:","note":{"type":"text","tag":"p","text":"But we can also take a peek inside with the `Inspect` Block:"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Code)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Code)`"}}},{"id":37,"name":"inspectCodeResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Code)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Code)","state":"Promise.resolve(codeResult)"}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectCodeResult","note":{"type":"expr","code":" inspectCodeResult"}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":83,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The `Note` Block, of which every line here consists:","note":{"type":"text","tag":"p","text":"The `Note` Block, of which every line here consists:"}}},{"id":48,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Note)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Note)`"}}},{"id":28,"name":"inspectNoteBlockResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Note)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Note)","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectCodeResult.state","note":{"type":"expr","code":" inspectCodeResult.state"}}}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNoteBlockResult","note":{"type":"expr","code":" inspectNoteBlockResult"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":84,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Higher-Order Blocks","note":{"type":"text","tag":"h3","text":"Higher-Order Blocks"}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Higher-Order Blocks embed other Blocks inside of them:","note":{"type":"text","tag":"p","text":"Higher-Order Blocks embed other Blocks inside of them:"}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"(The `Inspect` Block was already a very simple example of a higher-order Block)","note":{"type":"text","tag":"p","text":"(The `Inspect` Block was already a very simple example of a higher-order Block)"}}},{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"You already know `SheetOf`, it's the Block powering every Page, with an embedded Note:","note":{"type":"text","tag":"p","text":"You already know `SheetOf`, it's the Block powering every Page, with an embedded Note:"}}},{"id":47,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(SheetOf(Note))`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(SheetOf(Note))`"}}},{"id":45,"name":"inspectSheetOfNoteBlockResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(SheetOf(Note))","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is a line of the SheetOf Block, which contains a Note Block in which this sentence is written.","note":{"type":"text","tag":"p","text":"This is a line of the SheetOf Block, which contains a Note Block in which this sentence is written."}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is another line.","note":{"type":"text","tag":"p","text":"This is another line."}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNoteBlockResult.state.note","note":{"type":"expr","code":" inspectNoteBlockResult.state.note"}}}]}}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectSheetOfNoteBlockResult.state.lines","note":{"type":"expr","code":" inspectSheetOfNoteBlockResult.state.lines"}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":80,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":81,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":53,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"To be more precise, these pages don't contain the `SheetOf` Block itself but a `BlockSelector` Block pre-set with `SheetOf(Note)`:","note":{"type":"text","tag":"p","text":"To be more precise, these pages don't contain the `SheetOf` Block itself but a `BlockSelector` Block pre-set with `SheetOf(Note)`:"}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/BlockSelector('SheetOf(Note)', SheetOf(Note))` ","note":{"type":"text","tag":"p","text":"`/BlockSelector('SheetOf(Note)', SheetOf(Note))` "}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/BlockSelector('SheetOf(Note)', SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"BlockSelector('SheetOf(Note)', SheetOf(Note))","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The `BlockSelector` Block allows you to change the Block inside of it.","note":{"type":"text","tag":"p","text":"The `BlockSelector` Block allows you to change the Block inside of it."}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"You can use any other Block, change it at the top left.","note":{"type":"text","tag":"p","text":"You can use any other Block, change it at the top left."}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Be aware:","note":{"type":"text","tag":"p","text":"Be aware:"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"Changing the Block will delete this content here.","note":{"type":"text","tag":"p","text":"Changing the Block will delete this content here."}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"_**`C-Z`** or **`esc`** are your friends._","note":{"type":"text","tag":"p","text":"_**`C-Z`** or **`esc`** are your friends._"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Try:","note":{"type":"text","tag":"p","text":"Try:"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"`Code`","note":{"type":"text","tag":"p","text":"`Code`"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"`SheetOf(Code)`","note":{"type":"text","tag":"p","text":"`SheetOf(Code)`"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"`SheetOf(CheckEditableBlock)`","note":{"type":"text","tag":"p","text":"`SheetOf(CheckEditableBlock)`"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"In the subpage \"SimpleBlock\" of this page (\"Advanced Playground\") you can see an example, where the Page was changed to another Block.","note":{"type":"text","tag":"p","text":"In the subpage \"SimpleBlock\" of this page (\"Advanced Playground\") you can see an example, where the Page was changed to another Block."}}}]}}}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":78,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":79,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":101,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Custom Higher-Order Block","note":{"type":"text","tag":"h2","text":"Custom Higher-Order Block"}}},{"id":102,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Building a higher-order Block is more involved, as you have to integrate with the embedded (inner) Blocks' calculations.","note":{"type":"text","tag":"p","text":"Building a higher-order Block is more involved, as you have to integrate with the embedded (inner) Blocks' calculations."}}},{"id":103,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's build an HStack Block where you can put multiple Blocks in a row. As a simplification, these Blocks won't be able to access each other's values.","note":{"type":"text","tag":"p","text":"Let's build an HStack Block where you can put multiple Blocks in a row. As a simplification, these Blocks won't be able to access each other's values."}}},{"id":104,"name":"HStack","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function HStack(...subblocks) {\n  // wrap the subblocks with some safeguards\n  const safeblocks = subblocks.map(resheet.blocks.component.safeBlock)\n  \n  return SimpleBlock(\n    safeblocks.map(block => block.init),\n    \n    ({ state, fieldDispatcher, env }) => (\n      <div className=\"flex flex-row space-x-2\">\n        {safeblocks.map((block, index) => (\n          <div className=\"overflow-x-auto flex-[1_0_0%]\">\n            <block.Component\n              key={index}\n              state={state[index]}\n              dispatch={fieldDispatcher(index)}\n              env={env}\n              />\n          </div>\n        ))}\n      </div>\n    ),\n    \n    {\n      // What is the value of this Block?\n      // @returns an Array of the subblocks' values\n      getResult(state) {\n        return safeblocks.map((block, index) =>\n          block.getResult(state[index])\n        )\n      },\n      \n      // Load a state from json\n      // dispatch and env are needed, because to load some json one\n      // probably has to evaluate the code already. For example when\n      // we will use this Block and load its saved state from a file,\n      // first this definition of the Block has to be evaluated and\n      // then we can use the following fromJSON function to continue\n      // loading the state.\n      // @returns the loaded state\n      fromJSON(json, dispatch, env) {\n        return safeblocks.map((block, index) =>\n          block.fromJSON(\n            json[index],\n            resheet.util.dispatch.fieldDispatcher(index, dispatch),\n            env,\n          )\n        )\n      },\n      \n      // Converts a state to a JSON-serializable value.\n      // @returns a value that can be stringified (NOT an already\n      //          stringified JSON string!)\n      toJSON(state) {\n        return safeblocks.map((block, index) =>\n          block.toJSON(state[index])\n        )\n      },\n      \n      // Reevaluate the computations inside because some variables\n      // given in the Set<string> changedVars changed.\n      // @returns {\n      //            state: /* the new state */,\n      //            invalidated: /* true, if our value changed and\n      //                          * therefore our dependants have\n      //                          * to be recomputed\n      //                          */,\n      //          }\n      recompute(state, dispatch, env, changedVars) {\n        const recomputations = (\n          safeblocks.map((block, index) =>\n            block.recompute(\n              state[index],\n              resheet.util.dispatch.fieldDispatcher(index, dispatch),\n              env,\n              changedVars,\n            )\n          )\n        )\n        \n        const newStates = recomputations.map(recomp => recomp.state)\n        const invalidated = recomputations.some(recomp => recomp.invalidated)\n        return {\n          state: newStates,\n          invalidated,\n        }\n      },\n    },\n  )\n}"}}},{"id":107,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(HStack(SheetOf(Note), Code))`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(HStack(SheetOf(Note), Code))`"}}},{"id":105,"name":"inspectHStack","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(HStack(SheetOf(Note), Code))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(HStack(SheetOf(Note), Code))","state":[{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Now we can put some stuff side-by-side","note":{"type":"text","tag":"p","text":"Now we can put some stuff side-by-side"}}},{"id":1,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"As we haven't implemented any keybindings we have to click to navigate between the columns","note":{"type":"text","tag":"p","text":"As we haven't implemented any keybindings we have to click to navigate between the columns"}}}]},"const block = HStack(SheetOf(Note), Code)\nblock.toJSON(block.init)"]}}},{"id":106,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectHStack.state","note":{"type":"expr","code":" inspectHStack.state"}}},{"id":108,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":109,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":110,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":57,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Grand Finale","note":{"type":"text","tag":"h3","text":"Grand Finale"}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"As the Grand Finale, we're going to embed a whole ReSheet instance:","note":{"type":"text","tag":"p","text":"As the Grand Finale, we're going to embed a whole ReSheet instance:"}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(DocumentOf(Code))`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(DocumentOf(Code))`"}}},{"id":95,"name":"inspectReSheetSimple","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(DocumentOf(Code))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(DocumentOf(Code))","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[{"id":0,"name":"","state":"// This is a simplified version. But we already know how to embed the full version:\n\nblocks.DocumentOf(\n  blocks.BlockSelector(\n    'SheetOf(Note)',\n    blocks.SheetOf(blocks.Note),\n    blocks,\n  )\n)\n\n// Now is only left to inspect the state of this whole document below.","isCollapsed":true,"children":[]}],"viewState":{"sidebarOpen":true,"openPage":[0]},"template":{"id":-1,"name":"","state":"","isCollapsed":true,"children":[]}}}}}},{"id":61,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectReSheetSimple.state","note":{"type":"expr","code":" inspectReSheetSimple.state"}}},{"id":62,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":63,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":89,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":90,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Full ReSheet Version","note":{"type":"text","tag":"h4","text":"Full ReSheet Version"}}},{"id":64,"name":"DefaultPageBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= BlockSelector('SheetOf(Note)', SheetOf(Note))","note":{"type":"expr","code":" BlockSelector('SheetOf(Note)', SheetOf(Note))"}}},{"id":65,"name":"ReSheet","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= DocumentOf(DefaultPageBlock)","note":{"type":"expr","code":" DocumentOf(DefaultPageBlock)"}}},{"id":66,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":67,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Here is the full ReSheet version. Try to save the big ReSheet document and load it inside this small instance:","note":{"type":"text","tag":"p","text":"Here is the full ReSheet version. Try to save the big ReSheet document and load it inside this small instance:"}}},{"id":91,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(ReSheet)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(ReSheet)`"}}},{"id":96,"name":"inspectReSheet","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(ReSheet)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(ReSheet)","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[],"viewState":{"sidebarOpen":true,"openPage":[]},"template":{"id":-1,"name":"","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[]}},"isCollapsed":true,"children":[]}}}}}},{"id":69,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectReSheet.state","note":{"type":"expr","code":" inspectReSheet.state"}}},{"id":70,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":71,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":72,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"That's it. ReSheet is built to be composable and extensible. Its parts can be plugged together and extended as you like.","note":{"type":"text","tag":"p","text":"That's it. ReSheet is built to be composable and extensible. Its parts can be plugged together and extended as you like."}}},{"id":73,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":74,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":75,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":112,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":111,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":76,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":97,"name":"previewBlockTemplate","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(SheetOf(Note))","state":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Custom Blocks","note":{"type":"text","tag":"h3","text":"Custom Blocks"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We build these custom Blocks in \"Examples > Custom Blocks\":","note":{"type":"text","tag":"p","text":"We build these custom Blocks in \"Examples > Custom Blocks\":"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/DateBlock()`","note":{"type":"text","tag":"h4","text":"`/DateBlock()`"}}},{"id":26,"name":"dateBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/DateBlock()","note":{"type":"block","isInstantiated":true,"code":"DateBlock()","state":"2024-05-23T20:32:56+02:00"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dateBlockValue","note":{"type":"expr","code":" dateBlockValue"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/SliderBlock()`","note":{"type":"text","tag":"h4","text":"`/SliderBlock()`"}}},{"id":9,"name":"sliderBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SliderBlock()","note":{"type":"block","isInstantiated":true,"code":"SliderBlock()","state":49}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`","note":{"type":"text","tag":"h4","text":"`/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`"}}},{"id":28,"name":"options","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ['yes', 'no']","note":{"type":"expr","code":" ['yes', 'no']"}}},{"id":22,"name":"hstack","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/HStack(DateBlock(), SliderBlock(), SelectBlock(options))","note":{"type":"block","isInstantiated":true,"code":"HStack(DateBlock(), SliderBlock(), SelectBlock(options))","state":["2024-05-23T20:40:02+02:00",35,"yes"]}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= hstack","note":{"type":"expr","code":" hstack"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Built-in Blocks","note":{"type":"text","tag":"h4","text":"Built-in Blocks"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"And we inspect some built-in Blocks:","note":{"type":"text","tag":"p","text":"And we inspect some built-in Blocks:"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Note)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Note)`"}}},{"id":15,"name":"inspectNote","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Note)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Note)","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNote.state","note":{"type":"expr","code":" inspectNote.state"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>","note":{"type":"text","tag":"p","text":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>"}}}]}}}},{"id":99,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":100,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":98,"name":"preview","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"Util.WithEnv(\n  env => ({\n    ...env,\n    CheckBlock,\n    CheckEditableBlock,\n    SliderBlock,\n    SelectBlock,\n    DateBlock,\n    HStack,\n  }),\n  previewBlockTemplate.derivedBlock,\n)"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"SimpleBlock","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"Code","inner":"function update(value, path, fn) {\n  if (!path || Array.isArray(path) && path.length === 0) {\n    return fn(value)\n  }\n  else {\n    return immutable.update(value, path, fn)\n  }\n}\n\nfunction SimpleBlock(init, view, desc={}) {\n  return resheet.core.block.create({\n    init,\n    view({ state, dispatch, env }, ref) {\n      function setState(newState, path=[]) {\n        const updateState = (\n          typeof newState === 'function' ?\n            newState\n          :\n            () => newState\n        )\n        \n        dispatch(state => ({\n          state: update(state, path, updateState),\n        }))\n      }\n      \n      function onUpdate(evPath, statePath=[], processValue=lodash.identity) {\n        return ev => {\n          setState(processValue(lodash.get(ev, evPath)), statePath)\n        }\n      }\n      \n      function fieldDispatcher(field) {\n        return resheet.util.dispatch.fieldDispatcher(field, dispatch)\n      }\n      \n      return view({\n        state, dispatch, env, ref,\n        setState, onUpdate, fieldDispatcher,\n      })\n    },\n    getResult(state) { return state },\n    recompute(state) { return { state, invalidated: false } },\n    fromJSON(json) { return json ?? init },\n    toJSON(state) { return state },\n    ...desc,\n  })\n}"},"isCollapsed":false,"children":[]},{"id":1,"name":"includeCss","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"cleanId","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function cleanId(id) {\n  id = id.replace(/\\s+/g, '-');\n  id = id.replace(/[^\\w\\s-]/gi, '');\n  \n  if (!/^[a-zA-Z_]/.test(id)) {\n    id = '_' + id;\n  }\n  \n  return id.toLowerCase();\n}"}}},{"id":0,"name":"includeCss","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function includeCss(url) {\n  const id = cleanId(url)\n  \n  const found = document.getElementById(id)\n  if (found) { return found }\n\n  const link = document.createElement('link')\n  link.id = id\n  link.href = url\n  link.rel = 'stylesheet'\n  \n  document.head.appendChild(link)\n  \n  return link\n}"}}}]}},"isCollapsed":true,"children":[]}]},{"id":4,"name":"Interactive Game Dev","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Interactive Game Dev","note":{"type":"text","tag":"h1","text":"Interactive Game Dev"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a custom Game Block for interactively developing a simple game. Leverage existing Blocks to combine them to the tailored needs of a Game Editor.","note":{"type":"text","tag":"p","text":"Build a custom Game Block for interactively developing a simple game. Leverage existing Blocks to combine them to the tailored needs of a Game Editor."}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is just a showcase of how powerful a custom-built block can be. It doesn't include a step-by-step guide or explanation of the Game Block implementation.","note":{"type":"text","tag":"p","text":"This is just a showcase of how powerful a custom-built block can be. It doesn't include a step-by-step guide or explanation of the Game Block implementation."}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"A Game consists of 3 parts:","note":{"type":"text","tag":"p","text":"A Game consists of 3 parts:"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- The State: defining the current state of the game (where is the character, health, etc)","note":{"type":"text","tag":"li","text":"The State: defining the current state of the game (where is the character, health, etc)"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- The Update Logic: calculates a new state of the game by simulating a time-step of the game or responding to input","note":{"type":"text","tag":"li","text":"The Update Logic: calculates a new state of the game by simulating a time-step of the game or responding to input"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- The Render Logic: creates an image corresponding to the state","note":{"type":"text","tag":"li","text":"The Render Logic: creates an image corresponding to the state"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Therefore you can edit these 3 components:","note":{"type":"text","tag":"p","text":"Therefore you can edit these 3 components:"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- Initial State: How does the game start?","note":{"type":"text","tag":"li","text":"Initial State: How does the game start?"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- Update: calculate a new state out of the old state and an input (if it's `undefined` the update is a simulation-step)","note":{"type":"text","tag":"li","text":"Update: calculate a new state out of the old state and an input (if it's `undefined` the update is a simulation-step)"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- Render: render the game","note":{"type":"text","tag":"li","text":"Render: render the game"}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":30,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"As everywhere else you can see the live effects of your code changes.","note":{"type":"text","tag":"p","text":"As everywhere else you can see the live effects of your code changes."}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":32,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Simple Animation","note":{"type":"text","tag":"h2","text":"Simple Animation"}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This example doesn't react to input and only runs some simulation. Start and stop with the left button, make a single simulation step with \"Update\" and reset to the initial state with \"Reset\".","note":{"type":"text","tag":"p","text":"This example doesn't react to input and only runs some simulation. Start and stop with the left button, make a single simulation step with \"Update\" and reset to the initial state with \"Reset\"."}}},{"id":17,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Game","note":{"type":"block","isInstantiated":true,"code":"Game","state":{"init":"({\n  y: 200,\n  ySpeed: 0,\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":4,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: state.ySpeed - 0.75 }","note":{"type":"expr","code":" { ...state, ySpeed: state.ySpeed - 0.75 }"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":7,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: 12 }","note":{"type":"expr","code":" { ...state, ySpeed: 12 }"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":10,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.y <= 0 ? jump : gravity","note":{"type":"expr","code":" state.y <= 0 ? jump : gravity"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":13,"name":"newState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...forces, y: forces.y + forces.ySpeed }","note":{"type":"expr","code":" { ...forces, y: forces.y + forces.ySpeed }"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(update)\n  \n  return (\n    <div>\n      <div className=\"w-full flex flex-row space-x-2\">\n        <button\n          className={`\n            flex-1 rounded\n            bg-${running ? \"green\" : \"red\"}-100\n            hover:bg-${running ? \"green\" : \"red\"}-200\n          `}\n          onClick={toggleRunning}\n        >\n          {running ? \"Running\" : \"Stopped\"}\n        </button>\n\n        <button\n          className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n          onClick={() => update(16)}\n        >\n          Step\n        </button>\n      </div> \n      \n      <svg className=\"w-full\" height={height}>\n        <defs>\n          <pattern id=\"platform\" patternUnits=\"userSpaceOnUse\" width={tileSize} height={tileSize}>\n            <image href={Tiles.ground.src} width={tileSize} height={tileSize} />\n          </pattern>\n        </defs>\n      \n        <rect transform=\"translate(0, 336)\" width=\"2000\" height={tileSize} fill=\"url(#platform)\" />\n      \n        <image\n          transform={`\n            translate(100, ${ground - state.y})\n            translate(${-tileSize/2}, ${-tileSize})\n          `}\n          href={Tiles.character.src}\n          width={tileSize}\n          height={tileSize}\n          />\n      </svg>\n    </div>\n  )\n}"}}}]}}}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= $17","note":{"type":"expr","code":" $17"}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":35,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Input","note":{"type":"text","tag":"h1","text":"Input"}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We add some keyboard input handling and extend the character to be able to move left and right.","note":{"type":"text","tag":"p","text":"We add some keyboard input handling and extend the character to be able to move left and right."}}},{"id":15,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Game","note":{"type":"block","isInstantiated":true,"code":"Game","state":{"init":"({\n  x: 100,\n  y: 400,\n  xSpeed: 0,\n  ySpeed: 0,\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulation","note":{"type":"text","tag":"h3","text":"Simulation"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":4,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: state.ySpeed - 0.75 }","note":{"type":"expr","code":" { ...state, ySpeed: state.ySpeed - 0.75 }"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":7,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: 12 }","note":{"type":"expr","code":" { ...state, ySpeed: 12 }"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":10,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.y <= 0 ? jump : gravity","note":{"type":"expr","code":" state.y <= 0 ? jump : gravity"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":13,"name":"simulation","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}","note":{"type":"expr","code":" {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### React to Input","note":{"type":"text","tag":"h3","text":"React to Input"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":17,"name":"reaction","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"if (!input) return;\n\nconst xSpeed = (\n  input.type === 'simulate' ?\n    state.xSpeed\n  : input.type === 'keyup' ? // This is not 100% correct, but let's keep it simple\n    0\n  : input.key === 'ArrowLeft' ?\n    -3\n  : input.key === 'ArrowRight' ?\n    3\n  :\n    state.xSpeed\n)\n\nreturn {\n  ...state,\n  xSpeed,\n}"}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final State","note":{"type":"text","tag":"h3","text":"Final State"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Decide which state to use based on the input:","note":{"type":"text","tag":"p","text":"Decide which state to use based on the input:"}}},{"id":21,"name":"finalState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input && input.type !== 'simulate' ? reaction : simulation","note":{"type":"expr","code":" input && input.type !== 'simulate' ? reaction : simulation"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(dt => update({ type: 'simulate', dt }))\n  \n  function react(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    \n    update(ev) // runs an update with `input` set to `ev`\n  }\n\n  return (\n    <div>\n      <div className=\"w-full flex flex-row space-x-2\">\n        <button\n          className={`\n            flex-1 rounded\n            bg-${running ? \"green\" : \"red\"}-100\n            hover:bg-${running ? \"green\" : \"red\"}-200\n          `}\n          onClick={toggleRunning}\n        >\n          {running ? \"Running\" : \"Stopped\"}\n        </button>\n\n        <button\n          className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n          onClick={() => update({ type: 'simulate', dt: 16 })}\n        >\n          Step\n        </button>\n      </div> \n\n      <svg\n        tabIndex={-1}\n        className=\"w-full\"\n        height={height}\n        onKeyDown={react}\n        onKeyUp={react}\n      >\n        <defs>\n          <pattern id=\"platform\" patternUnits=\"userSpaceOnUse\" width={tileSize} height={tileSize}>\n            <image href={Tiles.ground.src} width={tileSize} height={tileSize} />\n          </pattern>\n        </defs>\n      \n        <rect transform=\"translate(0, 336)\" width=\"2000\" height={tileSize} fill=\"url(#platform)\" />\n      \n        <image\n          transform={`\n            translate(${state.x}, ${ground - state.y})\n            scale(${state.xSpeed < 0 ? 1 : -1}, 1)\n            translate(${-tileSize/2}, ${-tileSize})\n          `}\n          href={Tiles.character.src}\n          width={tileSize}\n          height={tileSize}\n          />\n      </svg>\n    </div>\n  )\n}"}}}]}}}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":42,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Real Game","note":{"type":"text","tag":"h2","text":"Real Game"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's make it a \"real\" game by adding some enemies, lives, mobile input, framerate handling and canvas rendering. (Still missing are more visual effects and sounds)","note":{"type":"text","tag":"p","text":"Let's make it a \"real\" game by adding some enemies, lives, mobile input, framerate handling and canvas rendering. (Still missing are more visual effects and sounds)"}}},{"id":43,"name":"realGame","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Game)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Game)","state":{"init":"({\n  score: 0,\n  lives: 10,\n  character: {\n    x: 100,\n    y: 400,\n    xSpeed: 0,\n    ySpeed: 0,\n  },\n  enemies: [],\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The input:","note":{"type":"text","tag":"p","text":"The input:"}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":61,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":60,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Respect the framerate:","note":{"type":"text","tag":"p","text":"Respect the framerate:"}}},{"id":62,"name":"dt","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input?.dt ?? 16","note":{"type":"expr","code":" input?.dt ?? 16"}}},{"id":64,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Calculate in px/s:","note":{"type":"text","tag":"p","text":"Calculate in px/s:"}}},{"id":63,"name":"factor","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dt / 1000","note":{"type":"expr","code":" dt / 1000"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulate Character","note":{"type":"text","tag":"h3","text":"Simulate Character"}}},{"id":4,"name":"character","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.character","note":{"type":"expr","code":" state.character"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":6,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...character, ySpeed: character.ySpeed - 40 * factor }","note":{"type":"expr","code":" { ...character, ySpeed: character.ySpeed - 40 * factor }"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":9,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...character, ySpeed: 14 }","note":{"type":"expr","code":" { ...character, ySpeed: 14 }"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":12,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= character.y <= 0 ? jump : gravity","note":{"type":"expr","code":" character.y <= 0 ? jump : gravity"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":15,"name":"simulatedCharacter","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}","note":{"type":"expr","code":" {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulate Enemies","note":{"type":"text","tag":"h3","text":"Simulate Enemies"}}},{"id":18,"name":"enemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.enemies","note":{"type":"expr","code":" state.enemies"}}},{"id":19,"name":"enemySize","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 32","note":{"type":"expr","code":" 32"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move enemies:","note":{"type":"text","tag":"p","text":"Move enemies:"}}},{"id":22,"name":"movedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= enemies.map(enemyPosition => enemyPosition - 160 * factor)","note":{"type":"expr","code":" enemies.map(enemyPosition => enemyPosition - 160 * factor)"}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Randomly add enemies:","note":{"type":"text","tag":"p","text":"Randomly add enemies:"}}},{"id":25,"name":"addedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= [ ...movedEnemies, ...(Math.random() < 0.6 * factor ? [1300] : []) ]","note":{"type":"expr","code":" [ ...movedEnemies, ...(Math.random() < 0.6 * factor ? [1300] : []) ]"}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Filter enemies that have passed:","note":{"type":"text","tag":"p","text":"Filter enemies that have passed:"}}},{"id":28,"name":"passedAndLeftEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.partition(addedEnemies, enemyPos => enemyPos < -enemySize)","note":{"type":"expr","code":" lodash.partition(addedEnemies, enemyPos => enemyPos < -enemySize)"}}},{"id":29,"name":"passedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= passedAndLeftEnemies[0]","note":{"type":"expr","code":" passedAndLeftEnemies[0]"}}},{"id":30,"name":"leftEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= passedAndLeftEnemies[1]","note":{"type":"expr","code":" passedAndLeftEnemies[1]"}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":32,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Lives, Collisions and Score ","note":{"type":"text","tag":"h3","text":"Lives, Collisions and Score "}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Add passed enemies to score:","note":{"type":"text","tag":"p","text":"Add passed enemies to score:"}}},{"id":34,"name":"score","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.score + passedEnemies.length","note":{"type":"expr","code":" state.score + passedEnemies.length"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Find collisions with enemies:","note":{"type":"text","tag":"p","text":"Find collisions with enemies:"}}},{"id":37,"name":"collidedAndUntouchedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.partition(leftEnemies, enemyPos =>\n    simulatedCharacter.y <= enemySize\n    && Math.abs(simulatedCharacter.x - enemyPos) <= enemySize\n)","note":{"type":"expr","code":" lodash.partition(leftEnemies, enemyPos =>\n    simulatedCharacter.y <= enemySize\n    && Math.abs(simulatedCharacter.x - enemyPos) <= enemySize\n)"}}},{"id":38,"name":"collidedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedAndUntouchedEnemies[0]","note":{"type":"expr","code":" collidedAndUntouchedEnemies[0]"}}},{"id":39,"name":"untouchedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedAndUntouchedEnemies[1]","note":{"type":"expr","code":" collidedAndUntouchedEnemies[1]"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Take a life on collision:","note":{"type":"text","tag":"p","text":"Take a life on collision:"}}},{"id":42,"name":"collided","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedEnemies.length > 0","note":{"type":"expr","code":" collidedEnemies.length > 0"}}},{"id":43,"name":"leftLives","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collided ? state.lives - 1 : state.lives","note":{"type":"expr","code":" collided ? state.lives - 1 : state.lives"}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":45,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final Simulated State","note":{"type":"text","tag":"h3","text":"Final Simulated State"}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"One last thing: Are we even still alive to begin with?","note":{"type":"text","tag":"p","text":"One last thing: Are we even still alive to begin with?"}}},{"id":47,"name":"alive","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.lives > 0","note":{"type":"expr","code":" state.lives > 0"}}},{"id":48,"name":"simulation","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"!alive ?\n  state\n:\n  {\n    ...state,\n    score,\n    lives: leftLives,\n    character: simulatedCharacter,\n    enemies: untouchedEnemies,\n  }"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### React to Input","note":{"type":"text","tag":"h3","text":"React to Input"}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":52,"name":"xSpeed","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// input changes character's xSpeed\nconst previous = state.character.xSpeed\n\nconst speed = 250 * factor\n\nif (!input) return previous;\n\n// This is not 100% correct, but let's keep it simple\nif (input.type === 'keyup') return 0;\nif (input.type === 'pointerup') return 0;\n\nif (input.type === 'keydown') {\n  if (input.key === 'ArrowLeft') return -speed;\n  if (input.key === 'ArrowRight') return speed;\n}\n\nif (input.type === 'pointerdown') {\n  const rect = input.target.getBoundingClientRect()\n  if (input.clientX - rect.x < rect.width / 2) return -speed;\n  if (input.clientX - rect.x > rect.width / 2) return speed;\n}\n\nreturn previous"}}},{"id":53,"name":"reaction","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, character: { ...state.character, xSpeed } }","note":{"type":"expr","code":" { ...state, character: { ...state.character, xSpeed } }"}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final State","note":{"type":"text","tag":"h3","text":"Final State"}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Decide which state to use based on the input:","note":{"type":"text","tag":"p","text":"Decide which state to use based on the input:"}}},{"id":57,"name":"finalState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input?.type === 'simulate' ? simulation : reaction","note":{"type":"expr","code":" input?.type === 'simulate' ? simulation : reaction"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"Controls","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Controls({ state, update, running, toggleRunning }) {\n  return (\n    <div className=\"w-full flex flex-row space-x-2\">\n      <button\n        className={`\n          flex-1 rounded\n          bg-${running ? \"green\" : \"red\"}-100\n          hover:bg-${running ? \"green\" : \"red\"}-200\n        `}\n        onClick={toggleRunning}\n      >\n        {running ? \"Running\" : \"Stopped - click to play\"}\n      </button>\n\n      <button\n        className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n        onClick={() => update({ type: 'simulate', dt: 16 })}\n      >\n        Step\n      </button>\n    </div> \n  )\n}"}}},{"id":0,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst width = 800;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(dt => update({ type: 'simulate', dt }))\n  \n  function react(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    ev.target.focus()\n    \n    update(ev) // runs an update with `input` set to `ev`\n  }\n  \n  const canvasRef = React.useRef(null)\n  \n  React.useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Setting up canvas dimensions\n    canvas.width = width;\n    canvas.height = height;\n\n    // Draw the platform\n    const ptrn = ctx.createPattern(Tiles.ground, 'repeat');\n    ctx.save();\n    ctx.fillStyle = ptrn;\n    ctx.translate(0, 336);\n    ctx.scale(tileSize / Tiles.ground.naturalWidth, tileSize / Tiles.ground.naturalHeight);\n    ctx.fillRect(0, 0, width, tileSize);\n    ctx.restore();\n\n    // Draw the character\n    ctx.save();\n    ctx.translate(state.character.x, height - tileSize - state.character.y);\n    if (state.lives <= 0) ctx.rotate(90 * Math.PI / 180);\n    if (state.character.xSpeed >= 0) ctx.scale(-1, 1);\n    ctx.drawImage(Tiles.character, -tileSize/2, -tileSize, tileSize, tileSize);\n    ctx.restore();\n\n    // Draw enemies\n    state.enemies.forEach(enemyPos => {\n      ctx.save();\n      ctx.translate(enemyPos, height - tileSize);\n      ctx.scale(0.5, 0.5);\n      ctx.drawImage(Tiles.enemy, -tileSize/2, -tileSize, tileSize, tileSize);\n      ctx.restore();\n    });\n\n    // Draw text\n    ctx.font = '20px Arial';\n    ctx.fillStyle = 'black';\n    ctx.fillText(`Lives: ${\"❤️\".repeat(state.lives)}`, 20, 30);\n    ctx.fillText(`Score: ${state.score} x ⭐️`, 20, 60);\n    \n    ctx.font = '16px Arial';\n    ctx.fillStyle = '#888';\n    ctx.fillText('Use the arrow keys or press on the left and right', 20, 90);\n    \n    if (state.lives <= 0) {\n      ctx.fillStyle = 'red';\n      ctx.font = '40px Arial';\n      ctx.fillText('Game Over', 50, 200);\n    }\n  }, [state]);\n\n\n  return (\n    <div>\n      <Controls state={state} update={update} running={running} toggleRunning={toggleRunning} />\n      <canvas\n        ref={canvasRef}\n        tabIndex={-1}\n        className=\"w-full\"\n        onKeyDown={react}\n        onKeyUp={react}\n        onPointerDownCapture={react}\n        onPointerUpCapture={react}\n        />\n    </div>\n  )\n}"}}}]}}}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":45,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":53,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":47,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":51,"name":"preview","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"Util.WithEnv(\n  env => ({ ...env, Tiles, useAnimation }),\n  realGame.derivedBlock,\n)"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"Tiles","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Tiles","note":{"type":"text","tag":"h1","text":"Tiles"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"from kenney.nl","note":{"type":"text","tag":"p","text":"from kenney.nl"}}},{"id":0,"name":"groundFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"iVBORw0KGgoAAAANSUhEUgAAABIAAAASBAMAAACk4JNkAAAABGdBTUEAALGPC/xhBQAAABJQTFRF9KxmNuN3n1pSLrCCQ0pfy4FePNWy0QAAADtJREFUCNdjcIEBBgRLEAaQWMYwgJWlbGwEQQxKxkoQxKAEAwyhMABjsYJYqqGhSnAxGCsIRR2QhcV9AJFcJViCy6XLAAAAAElFTkSuQmCC","name":"tile_0002.png","options":{"type":"image/png","lastModified":1696663628000}}}}}},{"id":1,"name":"charFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAABhQTFRFAAAANJleQ0pfhva7////WtKMNGVHvt7xFlk/CQAAAAF0Uk5TAEDm2GYAAACESURBVBjTbdAxDsIwDAXQTGXuwgF6BSROgOQTODMIxV0ZrPr62P7xUMSf8mQr+klrP7HMPOvDQ6mLUgyUPgHCmgasEHtqh3h2o4RkgENuHtmBd+BeYE9hBPpfbLwVDMirjbCWDbybDxjdTq1P72kLWj8BXDAh6/W1yvwQ4T64sIw+cusLm7JKEh9ouLwAAAAASUVORK5CYII=","name":"tile_0000.png","options":{"type":"image/png","lastModified":1696663636000}}}}}},{"id":7,"name":"enemyFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAABJQTFRFAAAAy4Fe/////uSB9LQbbz5D7N5EzgAAAAF0Uk5TAEDm2GYAAABTSURBVBjTY2AgFoRCAYjNCuMEgDjBxmBgiskJcQEDVwhHEMQWxMZBUeYSGuIaCue4hriGuGBVFqSkpIrQo6QE1yMCknGEcUBaHLEYgOwFFM8RBQCbzywIlKpD5AAAAABJRU5ErkJggg==","name":"tile_0012.png","options":{"type":"image/png","lastModified":1696663634000}}}}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"finreg","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"window.finreg = (\n  window.finreg\n  || new FinalizationRegistry(finalizer => finalizer())\n)\nwindow.finreg"}}},{"id":9,"name":"image","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"async function image(blob) {\n  const image = new Image()\n  const url = URL.createObjectURL(blob)\n  image.src = url\n  finreg.register(image, () => URL.revokeObjectURL(url))\n  await image.decode()\n  return image\n}"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"({\n  character: await image(charFile),\n  ground: await image(groundFile),\n  enemy: await image(enemyFile),\n})"}}}]}},"isCollapsed":false,"children":[]},{"id":3,"name":"Game","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"Code","inner":"const { fieldDispatcher } = resheet.util.dispatch\n\n// The builtin Blocks used for editing the initial state, update logic and render logic\nconst initBlock = resheet.blocks.component.safeBlock(Code)\nconst updateBlock = resheet.blocks.component.safeBlock(SheetOf(Note))\nconst renderBlock = resheet.blocks.component.safeBlock(SheetOf(Note))\n\n\n// helper component to reduce rendering overhead when closed\nfunction Details({ open=false, children }) {\n  const [opened, setOpened] = React.useState(open)\n  \n  return (\n    <details open={opened} onToggle={ev => setOpened(ev.target.open)}>\n      {children[0]}\n      {opened && children.slice(1)}\n    </details>\n  )\n}\n\n\n// create a dispatcher that enhances the env\nfunction enhanceEnv(dispatch, enhance) {\n  return function dispatchWithEnhancedEnv(action) {\n    dispatch((state, { env }) =>\n      action(state, { env: enhance(env, state) })\n    )\n  }\n}\n\n// create the env for the update logic, adding the current state and input\nfunction updateEnv(env, state) {\n  return { ...env, state: state.state, input: state.input }\n}\n\n// the dispatcher for the update block\nfunction updateDispatcher(dispatch) {\n  return (\n    fieldDispatcher(\n      'updateState',\n      enhanceEnv(dispatch, updateEnv),\n    )\n  )\n}\n  \n\n// create the env for the render logic, adding the current state and act procedure\nfunction renderEnv(env, state, dispatch) {\n  return {\n    ...env,\n    state: state.state,\n    update(input) {\n      update(dispatch, state => ({\n        ...state,\n        input\n      }))\n    },\n  }\n}\n\n// the dispatcher for the render block\nfunction renderDispatcher(dispatch) {\n  return (\n    fieldDispatcher(\n      'renderState',\n      enhanceEnv(dispatch, (env, state) => renderEnv(env, state, dispatch)),\n    )\n  )\n}\n\n\n// all dispatchers for the different embedded blocks\nfunction dispatchers(dispatch) {\n  return {\n    init: fieldDispatcher('initState', dispatch),\n    update: updateDispatcher(dispatch),\n    render: renderDispatcher(dispatch),\n  }\n}\n\n\nfunction update(dispatch, fn) {\n  const disp = dispatchers(dispatch)\n\n  dispatch((state, { env }) => {\n    const fnState = fn(state, env)\n    \n    const updateState = updateBlock.recompute(\n      fnState.updateState,\n      disp.update,\n      updateEnv(env, fnState),\n      immutable.Set(['state', 'input']),\n    ).state\n    \n    const newState = {\n      ...fnState,\n      updateState,\n      state: updateBlock.getResult(updateState),\n    }\n    \n    const renderState = renderBlock.recompute(\n      newState.renderState,\n      disp.render,\n      renderEnv(env, newState, dispatch),\n      immutable.Set(['state']),\n    ).state\n\n\n    return {\n      state: {\n        ...newState,\n        renderState,\n      }\n    }\n  })\n}\n\nfunction recompute(state, dispatch, env, changed) {\n  const disp = dispatchers(dispatch)\n  \n  const initState = initBlock.recompute(\n    state.initState,\n    disp.init,\n    env,\n    changed,\n  ).state\n  \n  const updateState = updateBlock.recompute(\n    state.updateState,\n    disp.update,\n    updateEnv(env, state),\n    changed,\n  ).state\n  \n  const renderState = renderBlock.recompute(\n    state.renderState,\n    disp.render,\n    renderEnv(env, state, dispatch),\n    changed,\n  ).state\n  \n  return {\n    ...state,\n    initState,\n    updateState,\n    renderState,\n  }\n}\n\n\n\n// create the Game Block\nresheet.core.block.create({\n  // initial block state\n  init: {\n    state: initBlock.getResult(initBlock.init),\n    input: undefined,\n    initState: initBlock.init,\n    updateState: updateBlock.init,\n    renderState: renderBlock.init,\n  },\n  \n  // rendering the block\n  view({ state, dispatch, env }) {\n    const disp = dispatchers(dispatch)\n        \n    function reset() {\n      dispatch((state, { env }) => ({\n        state: recompute(\n          { ...state, state: initBlock.getResult(state.initState) },\n          dispatch,\n          env,\n          immutable.Set(['state']),\n        )\n      }))\n    }\n    \n    function updateGame(input) {\n      update(dispatch, state => ({\n        ...state,\n        input\n      }))\n    }\n\n    const rendered = renderBlock.getResult(state.renderState)\n    \n    return (\n      <div>\n        <Details>\n          <summary className=\"text-lg mb-2\">Initial State</summary>\n          <initBlock.Component\n            state={state.initState}\n            dispatch={disp.init}\n            env={env}\n            />\n        </Details>\n        \n        <Details>\n          <summary className=\"text-lg mb-2 mt-6\">Update State</summary>\n          <updateBlock.Component\n            state={state.updateState}\n            dispatch={disp.update}\n            env={updateEnv(env, state)}\n            />\n        </Details>\n        \n        <Details open>\n          <summary className=\"text-lg mb-2 mt-6\">Current State</summary>\n          <reactInspector.Inspector data={state.state} />\n        </Details>\n\n        <button\n          className=\"w-full rounded bg-blue-100 hover:bg-blue-200\"\n          onClick={reset}\n        >\n          Reset\n        </button>\n\n        <Details>\n          <summary className=\"text-lg mb-2 mt-6\">Render</summary>\n          <renderBlock.Component\n            state={state.renderState}\n            dispatch={disp.render}\n            env={renderEnv(env, state, dispatch)}\n            />\n        </Details>\n        \n        <resheet.code.value.ErrorBoundary\n          title=\"There was an error in your Renderer\"\n          viewError={error => <resheet.code.value.ErrorInspector error={error} />}\n          autoReset\n        >\n          {React.isValidElement(rendered) && React.createElement(() => rendered)}\n          {typeof rendered === 'function' &&\n            React.createElement(rendered, {\n              state: state.state,\n              update: updateGame,\n            })\n          }\n        </resheet.code.value.ErrorBoundary>\n      </div>\n    )\n  },\n\n  // the block's reported value\n  getResult(state) {\n    return state.state\n  },\n  \n  // loading logic\n  fromJSON(json, dispatch, env) {\n    const disp = dispatchers(dispatch)\n\n    const initState = initBlock.fromJSON(json.init, disp.init, env)\n    const initResult = initBlock.getResult(initState)\n    \n    const envUpdate = updateEnv(env, { state: initResult, input: undefined })\n    const updateState = updateBlock.fromJSON(json.update, disp.update, envUpdate)\n    \n    const envRender = renderEnv(env, { state: initResult }, dispatch)\n    const renderState = renderBlock.fromJSON(json.render, disp.render, envRender)\n    \n    return {\n      state: initResult,\n      initState,\n      updateState,\n      renderState,\n    }\n  },\n  \n  // saving logic\n  toJSON(state) {\n    return {\n      init: initBlock.toJSON(state.initState),\n      update: updateBlock.toJSON(state.updateState),\n      render: updateBlock.toJSON(state.renderState),\n    }\n  },\n  \n  // recomputation logic if something in env changed\n  recompute(state, dispatch, env, changed) {\n    const newState = recompute(state, dispatch, env, changed)\n    \n    return {\n      state: newState,\n      invalidated: false,\n    }\n  },\n})"},"isCollapsed":false,"children":[]},{"id":4,"name":"useAnimation","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"Code","inner":"function useAnimation(step) {\n  const [running, setRunning] = React.useState(false)\n  const stepRef = React.useRef(step)\n  stepRef.current = step\n  \n  React.useEffect(() => {\n    let raf = null\n    let lastTime = null\n    \n    function animate() {\n      const time = performance.now()\n      \n      stepRef.current(lastTime === null ? 0 : time - lastTime)\n      \n      lastTime = time\n      raf = requestAnimationFrame(animate)\n    }\n    \n    if (running) {\n      raf = requestAnimationFrame(animate)\n    }\n    \n    return () => raf && cancelAnimationFrame(raf)\n  }, [running])\n  \n  function toggleRunning() {\n    setRunning(running => !running)\n  }\n  \n  return {\n    running,\n    setRunning,\n    toggleRunning,\n  }\n}"},"isCollapsed":false,"children":[]}]}]}],"viewState":{"sidebarOpen":false,"openPage":[2]},"template":{"id":2,"name":"","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[]}},"isCollapsed":false,"children":[]}}}}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":6,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"({\n  notepad: <Example template={notepad.derivedBlock} />,\n  formulas: <Example template={formulas.derivedBlock} />,\n  extensibility: <Example template={extensibility.derivedBlock} />,\n})"}}}]}},"isCollapsed":false,"children":[]},{"id":2,"name":"Demo","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"# Demo","note":{"type":"text","tag":"h1","text":"Demo"}}},{"id":5,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"demoTemplateFile","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"eyJoaXN0b3J5IjpbXSwiaW5uZXIiOnsidCI6InJlc2hlZXQuZG9jdW1lbnQiLCJ2IjoxLCJwYWdlcyI6W3siaWQiOjMsIm5hbWUiOiJHbG9iYWwiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBHbG9iYWwgVXRpbHMgYW5kIExpYnMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiR2xvYmFsIFV0aWxzIGFuZCBMaWJzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiVGhlc2UgYXJlIGxpYnMgYW5kIGhlbHBlcnMgdGhhdCB3aWxsIGJlIGF2YWlsYWJsZSBpbiBldmVyeSBwYWdlLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlRoZXNlIGFyZSBsaWJzIGFuZCBoZWxwZXJzIHRoYXQgd2lsbCBiZSBhdmFpbGFibGUgaW4gZXZlcnkgcGFnZS4ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjQsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAoeyBsaWJzLCB1dGlscywgYmxvY2tzIH0pIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgKHsgbGlicywgdXRpbHMsIGJsb2NrcyB9KSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W3siaWQiOjMsIm5hbWUiOiJsaWJzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIFBhcGEgUGFyc2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiUGFwYSBQYXJzZSJ9fX0seyJpZCI6MzksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL3d3dy5wYXBhcGFyc2UuY29tL2RvY3MiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJodHRwczovL3d3dy5wYXBhcGFyc2UuY29tL2RvY3MifX19LHsiaWQiOjYsIm5hbWUiOiJwYXBhcGFyc2UiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGVzbXNoRGVmYXVsdCgncGFwYXBhcnNlJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaERlZmF1bHQoJ3BhcGFwYXJzZScpIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBkYXRlLWZucyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJkYXRlLWZucyJ9fX0seyJpZCI6NDAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzLyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Imh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvIn19fSx7ImlkIjoxMywibmFtZSI6ImRhdGVmbnMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGVzbXNoKCdkYXRlLWZucycpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgZXNtc2goJ2RhdGUtZm5zJykifX19LHsiaWQiOjE4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxOSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIFJlY2hhcnRzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IlJlY2hhcnRzIn19fSx7ImlkIjo0MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Imh0dHBzOi8vcmVjaGFydHMub3JnL2VuLVVTL2FwaSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Imh0dHBzOi8vcmVjaGFydHMub3JnL2VuLVVTL2FwaSJ9fX0seyJpZCI6MjAsIm5hbWUiOiJyZWNoYXJ0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2goJ3JlY2hhcnRzJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaCgncmVjaGFydHMnKSJ9fX0seyJpZCI6MzAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjI4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRGlzdGluY3QgQ29sb3JzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkRpc3RpbmN0IENvbG9ycyJ9fX0seyJpZCI6NDIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL2dpdGh1Yi5jb20vaW50ZXJuYWxmeC9kaXN0aW5jdC1jb2xvcnMjcmVhZG1lIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiaHR0cHM6Ly9naXRodWIuY29tL2ludGVybmFsZngvZGlzdGluY3QtY29sb3JzI3JlYWRtZSJ9fX0seyJpZCI6MjcsIm5hbWUiOiJkaXN0aW5jdENvbG9ycyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2hEZWZhdWx0KFwiZGlzdGluY3QtY29sb3JzXCIpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgZXNtc2hEZWZhdWx0KFwiZGlzdGluY3QtY29sb3JzXCIpIn19fSx7ImlkIjoyNSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjQsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjI2LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6Iih7XG4gIHBhcGFwYXJzZSxcbiAgZGF0ZWZucyxcbiAgcmVjaGFydHMsXG4gIGRpc3RpbmN0Q29sb3JzLFxuICBsb2FkOiB7IGVzbXNoLCBlc21zaERlZmF1bHQgfSxcbn0pIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6ImVzbXNoIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MSwibmFtZSI6ImVzbXNoIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gZXNtc2gobGliKSB7XG4gIHJldHVybiBpbXBvcnQoYGh0dHBzOi8vZXNtLnNoLyR7bGlifT9leHRlcm5hbD1yZWFjdGApXG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6ImVzbXNoRGVmYXVsdCIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjEsIm5hbWUiOiJlc21zaERlZmF1bHQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJhc3luYyBmdW5jdGlvbiBlc21zaERlZmF1bHQobGliKSB7XG4gIHJldHVybiAoYXdhaXQgZXNtc2gobGliKSkuZGVmYXVsdFxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjMsIm5hbWUiOiJlc21zaENzcyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjEsIm5hbWUiOiJjbGVhbklkIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gY2xlYW5JZChpZCkge1xuICBpZCA9IGlkLnJlcGxhY2UoL1xccysvZywgJy0nKTtcbiAgaWQgPSBpZC5yZXBsYWNlKC9bXlxcd1xccy1dL2dpLCAnJyk7XG4gIFxuICBpZiAoIS9eW2EtekEtWl9dLy50ZXN0KGlkKSkge1xuICAgIGlkID0gJ18nICsgaWQ7XG4gIH1cbiAgXG4gIHJldHVybiBpZC50b0xvd2VyQ2FzZSgpO1xufSJ9fX0seyJpZCI6MCwibmFtZSI6ImVzbXNoQ3NzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gZXNtc2hDc3MoZmlsZSkge1xuICBjb25zdCBpZCA9IGNsZWFuSWQoZmlsZSlcbiAgXG4gIGNvbnN0IGZvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpXG4gIGlmIChmb3VuZCkgeyByZXR1cm4gZm91bmQgfVxuXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJylcbiAgbGluay5pZCA9IGlkXG4gIGxpbmsuaHJlZiA9ICdodHRwczovL2VzbS5zaC8nICsgZmlsZVxuICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0J1xuICBcbiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKVxuICBcbiAgcmV0dXJuIGxpbmtcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19LHsiaWQiOjEsIm5hbWUiOiJ1dGlscyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBmb3JtYXREdXJhdGlvbihkdXJhdGlvbikge1xuICBjb25zdCBob3VycyA9IE1hdGgudHJ1bmMoZHVyYXRpb24pXG4gIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLnJvdW5kKGR1cmF0aW9uICogNjAgJSA2MClcbiAgcmV0dXJuIGAke2hvdXJzfToke1N0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCAnMCcpfWBcbn1cblxuZnVuY3Rpb24gbGFiZWxlciguLi5sYWJlbHMpIHtcbiAgcmV0dXJuIHZhbHVlcyA9PiBPYmplY3QuZnJvbUVudHJpZXMobG9kYXNoLnppcChsYWJlbHMsIHZhbHVlcykpXG59XG5cbmZ1bmN0aW9uIHJvdW5kT24obnVtLCBzdGVwKSB7XG4gIGlmIChzdGVwIDwgMCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIHN0ZXApIC8gc3RlcFxuICB9XG4gIGVsc2UgaWYgKHN0ZXAgPCAxKSB7XG4gICAgY29uc3Qgc3RlcEludiA9IDEgLyBzdGVwXG4gICAgY29uc3Qgc3RlcFJvdW5kID0gTWF0aC5yb3VuZChzdGVwSW52KVxuICAgIGNvbnN0IHN0ZXBDbGVhbiA9IE1hdGguYWJzKHN0ZXBSb3VuZCAtIHN0ZXBJbnYpIDwgMWUtMTAgPyBzdGVwUm91bmQgOiBzdGVwSW52XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogc3RlcENsZWFuKSAvIHN0ZXBDbGVhblxuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiBzdGVwICogTWF0aC5yb3VuZChudW0gLyBzdGVwKVxuICB9XG59XG5cbnJldHVybiB7XG4gIGZvcm1hdER1cmF0aW9uLFxuICBsYWJlbGVyLFxuICByb3VuZE9uLFxuICBcbiAgLi4uY2hhcnRzLFxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W3siaWQiOjAsIm5hbWUiOiJjaGFydHMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBDaGFydCBVdGlscyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJDaGFydCBVdGlscyJ9fX0seyJpZCI6MSwibmFtZSI6IlBpZURMQyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHsgUGllLCBDZWxsLCBMYWJlbExpc3QgfSA9IGxpYnMucmVjaGFydHNcblxuZnVuY3Rpb24gUGllRExDKHsgZGF0YSwgZGF0YUtleSwgbGFiZWxLZXksIGZvcm1hdHRlciwgY2hpbGRyZW4sIC4uLnByb3BzIH0pIHtcbiAgY29uc3QgY291bnQgPSBkYXRhLmxlbmd0aFxuICBjb25zdCBjb2xvcnMgPSBsaWJzLmRpc3RpbmN0Q29sb3JzKHsgY291bnQsIGxpZ2h0TWluOiAzOCwgbGlnaHRNYXg6IDk1IH0pXG4gIFxuICByZXR1cm4gKFxuICAgIDxQaWVcbiAgICAgIGRhdGE9e2RhdGF9XG4gICAgICBkYXRhS2V5PXtkYXRhS2V5fVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtkYXRhLm1hcCgoXywgaW5kZXgpID0+IChcbiAgICAgICAgPENlbGwga2V5PXtgY2VsbC0ke2luZGV4fWB9IGZpbGw9e2NvbG9yc1tpbmRleF0uaGV4KCl9IC8+XG4gICAgICApKX1cbiAgICAgIDxMYWJlbExpc3QgZGF0YUtleT17ZGF0YUtleX0gZm9ybWF0dGVyPXtmb3JtYXR0ZXJ9IHBvc2l0aW9uPVwiaW5zaWRlXCIgc3Ryb2tlPVwibm9uZVwiIGZpbGw9XCJ3aGl0ZVwiIC8+XG4gICAgICA8TGFiZWxMaXN0IGRhdGFLZXk9e2xhYmVsS2V5fSBvZmZzZXQ9ezEwfSBwb3NpdGlvbj1cIm91dHNpZGVcIiBzdHJva2U9XCJub25lXCIgLz5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1BpZT5cbiAgKVxufSJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6NCwibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgUGllRExDIH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IFBpZURMQyB9In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX1dfSx7ImlkIjoyLCJuYW1lIjoiYmxvY2tzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gKHsgU2ltcGxlQmxvY2ssIFNlbGVjdCwgRGF0ZSB9KSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiICh7IFNpbXBsZUJsb2NrLCBTZWxlY3QsIERhdGUgfSkifX19XX19LCJpc0NvbGxhcHNlZCI6ZmFsc2UsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6IlNpbXBsZUJsb2NrIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IkNvZGUiLCJpbm5lciI6ImZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgcGF0aCwgZm4pIHtcbiAgaWYgKCFwYXRoIHx8IEFycmF5LmlzQXJyYXkocGF0aCkgJiYgcGF0aC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZm4odmFsdWUpXG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIGltbXV0YWJsZS51cGRhdGUodmFsdWUsIHBhdGgsIGZuKVxuICB9XG59XG5cbmZ1bmN0aW9uIFNpbXBsZUJsb2NrKGluaXQsIHZpZXcsIGRlc2M9e30pIHtcbiAgcmV0dXJuIHJlc2hlZXQuY29yZS5ibG9jay5jcmVhdGUoe1xuICAgIGluaXQsXG4gICAgdmlldyh7IHN0YXRlLCBkaXNwYXRjaCwgZW52IH0sIHJlZikge1xuICAgICAgZnVuY3Rpb24gc2V0U3RhdGUobmV3U3RhdGUsIHBhdGg9W10pIHtcbiAgICAgICAgY29uc3QgdXBkYXRlU3RhdGUgPSAoXG4gICAgICAgICAgdHlwZW9mIG5ld1N0YXRlID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIG5ld1N0YXRlXG4gICAgICAgICAgOlxuICAgICAgICAgICAgKCkgPT4gbmV3U3RhdGVcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUgPT4gKHtcbiAgICAgICAgICBzdGF0ZTogdXBkYXRlKHN0YXRlLCBwYXRoLCB1cGRhdGVTdGF0ZSksXG4gICAgICAgIH0pKVxuICAgICAgfVxuICAgICAgXG4gICAgICBmdW5jdGlvbiBvblVwZGF0ZShldlBhdGgsIHN0YXRlUGF0aD1bXSwgcHJvY2Vzc1ZhbHVlPWxvZGFzaC5pZGVudGl0eSkge1xuICAgICAgICByZXR1cm4gZXYgPT4ge1xuICAgICAgICAgIHNldFN0YXRlKHByb2Nlc3NWYWx1ZShsb2Rhc2guZ2V0KGV2LCBldlBhdGgpKSwgc3RhdGVQYXRoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGZ1bmN0aW9uIGZpZWxkRGlzcGF0Y2hlcihmaWVsZCkge1xuICAgICAgICByZXR1cm4gcmVzaGVldC51dGlsLmRpc3BhdGNoLmZpZWxkRGlzcGF0Y2hlcihmaWVsZCwgZGlzcGF0Y2gpXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB2aWV3KHtcbiAgICAgICAgc3RhdGUsIGRpc3BhdGNoLCBlbnYsIHJlZixcbiAgICAgICAgc2V0U3RhdGUsIG9uVXBkYXRlLCBmaWVsZERpc3BhdGNoZXIsXG4gICAgICB9KVxuICAgIH0sXG4gICAgZ2V0UmVzdWx0KHN0YXRlKSB7IHJldHVybiBzdGF0ZSB9LFxuICAgIHJlY29tcHV0ZShzdGF0ZSkgeyByZXR1cm4geyBzdGF0ZSwgaW52YWxpZGF0ZWQ6IGZhbHNlIH0gfSxcbiAgICBmcm9tSlNPTihqc29uKSB7IHJldHVybiBqc29uID8/IGluaXQgfSxcbiAgICB0b0pTT04oc3RhdGUpIHsgcmV0dXJuIHN0YXRlIH0sXG4gICAgLi4uZGVzYyxcbiAgfSlcbn0ifSwiaXNDb2xsYXBzZWQiOmZhbHNlLCJjaGlsZHJlbiI6W119LHsiaWQiOjEsIm5hbWUiOiJTZWxlY3QiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBTZWxlY3QgQmxvY2siLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiU2VsZWN0IEJsb2NrIn19fSx7ImlkIjowLCJuYW1lIjoiU2VsZWN0IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gU2VsZWN0KHZhbHVlcykge1xuICByZXR1cm4gU2ltcGxlQmxvY2sodmFsdWVzWzBdLFxuICAgICh7IHJlZiwgc3RhdGUsIG9uVXBkYXRlIH0pID0+IChcbiAgICAgIDxzZWxlY3RcbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIHZhbHVlPXtzdGF0ZX1cbiAgICAgICAgb25DaGFuZ2U9e29uVXBkYXRlKCd0YXJnZXQudmFsdWUnKX1cbiAgICAgID5cbiAgICAgICAge3ZhbHVlcy5tYXAodmFsdWUgPT4gKFxuICAgICAgICAgIDxvcHRpb24ga2V5PXt2YWx1ZX0gdmFsdWU9e3ZhbHVlfT5cbiAgICAgICAgICAgIHt2YWx1ZX1cbiAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgKSl9XG4gICAgICA8L3NlbGVjdD5cbiAgICApXG4gIClcbn0ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBFeGFtcGxlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkV4YW1wbGUifX19LHsiaWQiOjQsIm5hbWUiOiJ2YWx1ZXMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCJdIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIl0ifX19LHsiaWQiOjUsIm5hbWUiOiJzZWxlY3RlZCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9TZWxlY3QodmFsdWVzKSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJTZWxlY3QodmFsdWVzKSIsInN0YXRlIjoiTWFyY2gifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHNlbGVjdGVkIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgc2VsZWN0ZWQifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjksIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBTZWxlY3QiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBTZWxlY3QifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjozLCJuYW1lIjoiRGF0ZSIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIERhdGUgQmxvY2siLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiRGF0ZSBCbG9jayJ9fX0seyJpZCI6MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPGxpYnMuRGF0ZXBpY2tlciBpbmxpbmUgLz4iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiA8bGlicy5EYXRlcGlja2VyIGlubGluZSAvPiJ9fX0seyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NSwibmFtZSI6IkRhdGVCbG9jayIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImZ1bmN0aW9uIERhdGVCbG9jayhpbml0KSB7XG4gIHJldHVybiBTaW1wbGVCbG9jayhpbml0ID8/IG5ldyBEYXRlKDApLFxuICAgICh7IHJlZiwgc3RhdGUsIHNldFN0YXRlIH0pID0+IHtcbiAgICAgIGNvbnN0IGRpdlJlZiA9IFJlYWN0LnVzZVJlZigpXG4gICAgICBcbiAgICAgIGZ1bmN0aW9uIGZvY3VzKCkge1xuICAgICAgICBkaXZSZWYuY3VycmVudFxuICAgICAgICAgID8ucXVlcnlTZWxlY3RvcignLnJlYWN0LWRhdGVwaWNrZXIgW3RhYmluZGV4PVwiMFwiXScpXG4gICAgICAgICAgPy5mb2N1cygpXG4gICAgICB9XG5cbiAgICAgIFJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoeyBmb2N1cyB9KSwgW10pXG4gICAgICBcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICByZWY9e2RpdlJlZn1cbiAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgb25LZXlEb3duPXtldiA9PiB7XG4gICAgICAgICAgICBpZiAoZXYua2V5ICE9PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgIHNldFRpbWVvdXQoZm9jdXMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxsaWJzLkRhdGVwaWNrZXJcbiAgICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgICAgaW5saW5lXG4gICAgICAgICAgICBzZWxlY3RlZD17c3RhdGV9XG4gICAgICAgICAgICBvblNlbGVjdD17ZGF0ZSA9PiBzZXRTdGF0ZShkYXRlKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweS0xIGhvdmVyOmJnLWJsdWUtNTBcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTdGF0ZShuZXcgRGF0ZSgpKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgVG9kYXlcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvbGlicy5EYXRlcGlja2VyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9LFxuICAgIHtcbiAgICAgIHRvSlNPTihkYXRlKSB7IHJldHVybiBsaWJzLmRhdGVmbnMuZm9ybWF0SVNPKGRhdGUpIH0sXG4gICAgICBmcm9tSlNPTihqc29uKSB7IHJldHVybiBsaWJzLmRhdGVmbnMucGFyc2VJU08oanNvbikgfSxcbiAgICB9LFxuICApXG59In19fV19fSwiaXNDb2xsYXBzZWQiOmZhbHNlLCJjaGlsZHJlbiI6W119XX1dfSx7ImlkIjo1LCJuYW1lIjoiV29yayIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIFdvcmsiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiV29yayJ9fX1dfX0sImlzQ29sbGFwc2VkIjpmYWxzZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiQ29uZmlnIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgQ29uZmlnIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkNvbmZpZyJ9fX0seyJpZCI6MSwibmFtZSI6Im93bmVyIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgbmFtZSA9IFwiSmFuZSBEb2VcIjtcbmNvbnN0IGRlc2NyaXB0aW9uID0gXCJQcmV0dHlHb29kU29sdXRpb25zIENvbnN1bHRhbnRcIjtcbmNvbnN0IGFkZHJlc3MgPSBbXG4gIG5hbWUsXG4gIFwiRG9lc2l0IFN0cmVldCAxM1wiLFxuICBcIjEyMzQ1IFdvcmtzVG93blwiLFxuXTtcbmNvbnN0IGNvbnRhY3QgPSBbXG4gIFwiKzAwIDEyMyA0NTY3ODlcIixcbiAgXCJqYW5lLmRvZUBwcmV0dHlnb29kLnNvbHV0aW9uc1wiLFxuXTtcbmNvbnN0IGJhbmsgPSA8PlxuICBCZXN0QmFuayBJbmMuPGJyLz5cbiAgSUJBTjogREU0MiAxMzM3IDEyMzQgNzY1NCA4OTg5IDAwXG48Lz47XG5cbnJldHVybiB7IG5hbWUsIGRlc2NyaXB0aW9uLCBhZGRyZXNzLCBjb250YWN0LCBiYW5rIH0ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoe1xuICBvd25lcixcbn0pIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IldvcmtpbmcgSG91cnMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBXb3JraW5nIEhvdXJzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IldvcmtpbmcgSG91cnMifX19LHsiaWQiOjExLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiSG93IHRvIGFkZCBuZXcgZGF0YTogQWRkIHRoZSBtb250aGx5IGV4cG9ydCBmaWxlcyBmcm9tIEF0V29yayBpbiBcIkF0V29yayBJbXBvcnRzXCIgYW5kIGFsbCBjaGFydHMgaGVyZSBhdXRvbWF0aWNhbGx5IGdldCB1cGRhdGVkLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkhvdyB0byBhZGQgbmV3IGRhdGE6IEFkZCB0aGUgbW9udGhseSBleHBvcnQgZmlsZXMgZnJvbSBBdFdvcmsgaW4gXCJBdFdvcmsgSW1wb3J0c1wiIGFuZCBhbGwgY2hhcnRzIGhlcmUgYXV0b21hdGljYWxseSBnZXQgdXBkYXRlZC4ifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBCeSBXZWVrIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkJ5IFdlZWsifX19LHsiaWQiOjksIm5hbWUiOiJ3ZWVrcyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2goRGF0YSlcbiAgLm1hcChlbnRyeSA9PiAoe1xuICAgIHdlZWs6IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGVudHJ5LnN0YXJ0LCBcIidXJ0kgeXl5eVwiKSxcbiAgICAuLi5lbnRyeSxcbiAgfSkpXG4gIC5ncm91cEJ5KCd3ZWVrJylcbiAgLm1hcFZhbHVlcyhlbnRyaWVzID0+IGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykpXG4gIC52YWx1ZSgpIn19fSx7ImlkIjoxMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7XG4gIFJlc3BvbnNpdmVDb250YWluZXIsXG4gIEJhckNoYXJ0LFxuICBCYXIsXG4gIFhBeGlzLFxuICBZQXhpcyxcbiAgVG9vbHRpcCxcbn0gPSBHbG9iYWwubGlicy5yZWNoYXJ0cztcblxuY29uc3QgZGF0YSA9IE9iamVjdC5lbnRyaWVzKHdlZWtzKS5tYXAoR2xvYmFsLnV0aWxzLmxhYmVsZXIoJ3dlZWsnLCAnaG91cnMnKSk7XG5cbjxSZXNwb25zaXZlQ29udGFpbmVyIGhlaWdodD17MzAwfT5cbiAgPEJhckNoYXJ0IGRhdGE9e2RhdGF9PlxuICAgIDxUb29sdGlwIGZvcm1hdHRlcj17R2xvYmFsLnV0aWxzLmZvcm1hdER1cmF0aW9ufSAvPlxuICAgIDxCYXIgdHlwZT1cIm1vbm90b25lXCIgZGF0YUtleT1cImhvdXJzXCIgZmlsbD1cIiM5REQ5RDJcIiAvPlxuICAgIDxYQXhpcyBkYXRhS2V5PVwid2Vla1wiIC8+XG4gICAgPFlBeGlzIHRpY2tGb3JtYXR0ZXI9e0dsb2JhbC51dGlscy5mb3JtYXREdXJhdGlvbn0gd2lkdGg9ezEwMH0gLz5cbiAgPC9CYXJDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgQnkgTW9udGgiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiQnkgTW9udGgifX19LHsiaWQiOjEzLCJuYW1lIjoibW9udGhzIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImxvZGFzaCgkYERhdGFgKVxuICAubWFwKGVudHJ5ID0+ICh7XG4gICAgbW9udGg6IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGVudHJ5LnN0YXJ0LCAnTExMIHl5eXknKSxcbiAgICAuLi5lbnRyeSxcbiAgfSkpXG4gIC5ncm91cEJ5KCdtb250aCcpXG4gIC5tYXBWYWx1ZXMoZW50cmllcyA9PiBsb2Rhc2guc3VtQnkoZW50cmllcywgJ3dvcmtIb3VycycpKVxuICAudmFsdWUoKSJ9fX0seyJpZCI6MTQsIm5hbWUiOiJtb250aHNDaGFydCIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7XG4gIFJlc3BvbnNpdmVDb250YWluZXIsXG4gIEJhckNoYXJ0LFxuICBCYXIsXG4gIFhBeGlzLFxuICBZQXhpcyxcbiAgVG9vbHRpcCxcbn0gPSBHbG9iYWwubGlicy5yZWNoYXJ0cztcblxuY29uc3QgZGF0YSA9IE9iamVjdC5lbnRyaWVzKG1vbnRocykubWFwKEdsb2JhbC51dGlscy5sYWJlbGVyKCdtb250aCcsICdob3VycycpKTtcblxuPFJlc3BvbnNpdmVDb250YWluZXIgaGVpZ2h0PXszMDB9PlxuICA8QmFyQ2hhcnQgZGF0YT17ZGF0YX0+XG4gICAgPFRvb2x0aXAgZm9ybWF0dGVyPXtHbG9iYWwudXRpbHMuZm9ybWF0RHVyYXRpb259IC8+XG4gICAgPEJhciB0eXBlPVwibW9ub3RvbmVcIiBkYXRhS2V5PVwiaG91cnNcIiBmaWxsPVwiIzlERDlEMlwiIC8+XG4gICAgPFhBeGlzIGRhdGFLZXk9XCJtb250aFwiIC8+XG4gICAgPFlBeGlzIHRpY2tGb3JtYXR0ZXI9e0dsb2JhbC51dGlscy5mb3JtYXREdXJhdGlvbn0gd2lkdGg9ezEwMH0gLz5cbiAgPC9CYXJDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjMsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiKHtcbiAgRGF0YSxcbiAgd2Vla3MsXG4gIG1vbnRocyxcbn0pIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6IkF0V29yayBJbXBvcnRzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MTEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEF0V29yayBJbXBvcnRzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkF0V29yayBJbXBvcnRzIn19fSx7ImlkIjoxMiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IkFkZCBhIG5ldyBgL0xvYWRGaWxlYCBCbG9jayB3aXRoIGEgY29ycmVzcG9uZGluZyBtb250aCAoYW5kIHllYXIpIGxhYmVsLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkFkZCBhIG5ldyBgL0xvYWRGaWxlYCBCbG9jayB3aXRoIGEgY29ycmVzcG9uZGluZyBtb250aCAoYW5kIHllYXIpIGxhYmVsLiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJUaGVuIGFkZCB0aGUgZmlsZSB0byB0aGUgYGV4cG9ydHNgIGxpc3QgYXQgdGhlIGVuZC4iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJUaGVuIGFkZCB0aGUgZmlsZSB0byB0aGUgYGV4cG9ydHNgIGxpc3QgYXQgdGhlIGVuZC4ifX19LHsiaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyAyMDI0Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IjIwMjQifX19LHsiaWQiOjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJKYW51YXJ5Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiSmFudWFyeSJ9fX0seyJpZCI6MiwibmFtZSI6IjIwMjQvMDEiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvTG9hZEZpbGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiTG9hZEZpbGUiLCJzdGF0ZSI6eyJzdGF0ZSI6ImxvYWRlZCIsImZpbGUiOnsiY29udGVudCI6IlJXbHVkSExEcEdkbE96czdDa0psWjJsdWJqdEZibVJsTzFCaGRYTmxPMFJoZFdWeUNqRXdMakF4TGpJd01qUWdNRGs2TXpjN01UQXVNREV1TWpBeU5DQXhOam8wTlRzaU1pdzFJanNpTkN3Mk16TWlDakV4TGpBeExqSXdNalFnTURnNk1EQTdNVEV1TURFdU1qQXlOQ0F4TXpvMU9Uc2lNU3czTlNJN0lqUXNNak16SWdveE1pNHdNUzR5TURJMElEQTNPakl5T3pFeUxqQXhMakl3TWpRZ01UUTZNREE3SWpFc05UTXpJanNpTlN3eElnb3hNeTR3TVM0eU1ESTBJREEzT2pBd096RXpMakF4TGpJd01qUWdNRGM2TkRVN095SXdMRGMxSWdveE5TNHdNUzR5TURJMElEQTJPalU0T3pFMUxqQXhMakl3TWpRZ01UTTZORFU3SWpNc01ETXpJanNpTXl3M05TSUtNVFl1TURFdU1qQXlOQ0F4TXpveU1Uc3hOaTR3TVM0eU1ESTBJREUzT2pNNE96c2lOQ3d5T0RNaUNqRTNMakF4TGpJd01qUWdNRFk2TURZN01UY3VNREV1TWpBeU5DQXhORG95TVRzaU1pdzFOU0k3SWpVc055SUtNVGd1TURFdU1qQXlOQ0F3TmpveE9Ec3hPQzR3TVM0eU1ESTBJREUwT2pRMU95SXhMRGdpT3lJMkxEWTFJZ294T1M0d01TNHlNREkwSURBMk9qSTBPekU1TGpBeExqSXdNalFnTVRJNk16QTdJakVzTmpZM0lqc2lOQ3cwTXpNaUNqSXlMakF4TGpJd01qUWdNRGs2TURFN01qSXVNREV1TWpBeU5DQXhNam94TURzN0lqTXNNVFVpQ2pJekxqQXhMakl3TWpRZ01USTZNekk3TWpNdU1ERXVNakF5TkNBeE5qb3pPRHM3SWpRc01TSUtNalF1TURFdU1qQXlOQ0F3Tmpvek16c3lOQzR3TVM0eU1ESTBJREUxT2pBNU95SXlMRGs0TXlJN0lqVXNOakUzSWdveU5TNHdNUzR5TURJMElEQTRPalF4T3pJMUxqQXhMakl3TWpRZ01UUTZNekE3SWpFc01UWTNJanNpTkN3Mk5TSUtNamt1TURFdU1qQXlOQ0F4TXpvek9Uc3lPUzR3TVM0eU1ESTBJREUzT2pFME95SXdMRFVpT3lJekxEQTRNeUlLTXpBdU1ERXVNakF5TkNBeE16b3pNRHN6TUM0d01TNHlNREkwSURFM09qTXdPenMwQ2pNeExqQXhMakl3TWpRZ01UTTZNalE3TXpFdU1ERXVNakF5TkNBeE56b3pNenM3SWpRc01UVWlDanM3T3dvPSIsIm5hbWUiOiJudW1iZXJzLWV4cG9ydC1hdHdvcmstMjAyNC0wNS0xNS0xNl8zNF8wMy5jc3YiLCJvcHRpb25zIjp7InR5cGUiOiJ0ZXh0L2NzdiIsImxhc3RNb2RpZmllZCI6MTcxNTc4MzY0MzAwMH19fX19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiRmVicnVhcnkiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJGZWJydWFyeSJ9fX0seyJpZCI6NCwibmFtZSI6IjIwMjQvMDIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvTG9hZEZpbGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiTG9hZEZpbGUiLCJzdGF0ZSI6eyJzdGF0ZSI6ImxvYWRlZCIsImZpbGUiOnsiY29udGVudCI6IlJXbHVkSExEcEdkbE96czdDa0psWjJsdWJqdEZibVJsTzFCaGRYTmxPMFJoZFdWeUNqQXlMakF5TGpJd01qUWdNRFk2TVRZN01ESXVNREl1TWpBeU5DQXdOem94TnpzN0lqRXNNREUzSWdvd01pNHdNaTR5TURJMElERTFPakF3T3pBeUxqQXlMakl3TWpRZ01UYzZORGs3T3lJeUxEZ3hOeUlLTURVdU1ESXVNakF5TkNBd05qbzBOVHN3TlM0d01pNHlNREkwSURFMU9qVTRPeUl5TERBek15STdJamNzTVRneklnb3dOaTR3TWk0eU1ESTBJREEyT2pNNE96QTJMakF5TGpJd01qUWdNakU2TURRN0lqY3NNVE16SWpzaU55d3pJZ293Tnk0d01pNHlNREkwSURBMk9qTXdPekEzTGpBeUxqSXdNalFnTVRRNk5EUTdJakVzTkRVaU95STJMRGM0TXlJS01EZ3VNREl1TWpBeU5DQXdOam94T0Rzd09DNHdNaTR5TURJMElERTBPakEwT3lJeUxETTFJanNpTlN3ME1UY2lDakE1TGpBeUxqSXdNalFnTURZNk16STdNRGt1TURJdU1qQXlOQ0F3TnpvME9UczdJakVzTWpneklnb3dPUzR3TWk0eU1ESTBJREE1T2pNd096QTVMakF5TGpJd01qUWdNVFE2TXpBN096VUtNVEl1TURJdU1qQXlOQ0F3TmpveU9Uc3hNaTR3TWk0eU1ESTBJREEzT2pFMU96c2lNQ3czTmpjaUNqRXlMakF5TGpJd01qUWdNRGs2TXpBN01USXVNREl1TWpBeU5DQXhNRG8xTlRzN0lqRXNOREUzSWdveE1pNHdNaTR5TURJMElERXhPak16T3pFeUxqQXlMakl3TWpRZ01UTTZORE03SWpBc01qTXpJanNpTVN3NU16TWlDakV5TGpBeUxqSXdNalFnTVRRNk5URTdNVEl1TURJdU1qQXlOQ0F4T0Rvd09Ec2lNQ3cxSWpzaU1pdzNPRE1pQ2pFekxqQXlMakl3TWpRZ01UTTZNelk3TVRNdU1ESXVNakF5TkNBeE9Eb3pNenM3SWpRc09UVWlDakUwTGpBeUxqSXdNalFnTURrNk1qRTdNVFF1TURJdU1qQXlOQ0F4TVRvek1EczdJaklzTVRVaUNqRTBMakF5TGpJd01qUWdNVEk2TlRjN01UUXVNREl1TWpBeU5DQXhOVG93TmpzN0lqSXNNVFVpQ2pFMUxqQXlMakl3TWpRZ01EZzZNVE03TVRVdU1ESXVNakF5TkNBeE1Ub3dPVHNpTUN3MUlqc2lNaXcwTXpNaUNqRTFMakF5TGpJd01qUWdNVEU2TkRjN01UVXVNREl1TWpBeU5DQXhORG93TkRzN0lqSXNNamd6SWdveE5pNHdNaTR5TURJMElEQTRPakkzT3pFMkxqQXlMakl3TWpRZ01EazZNelU3T3lJeExERXpNeUlLTVRZdU1ESXVNakF5TkNBeE1Eb3pNenN4Tmk0d01pNHlNREkwSURFM09qRTFPeUl3TERFMUlqc2lOaXcxTlNJS01UWXVNREl1TWpBeU5DQXhPVG95TWpzeE5pNHdNaTR5TURJMElESXhPakF4T3pzaU1TdzJOU0lLTWpBdU1ESXVNakF5TkNBeE5EbzFPVHN5TUM0d01pNHlNREkwSURFNE9qQXhPenNpTXl3d016TWlDakl3TGpBeUxqSXdNalFnTVRnNk5EVTdNakF1TURJdU1qQXlOQ0F4T1Rvek1qczdJakFzTnpneklnb3lNUzR3TWk0eU1ESTBJREEzT2pNeE96SXhMakF5TGpJd01qUWdNVEU2TWpZN0lqQXNNalVpT3lJekxEWTJOeUlLTWpFdU1ESXVNakF5TkNBeE1qb3hNRHN5TVM0d01pNHlNREkwSURFME9qTTBPenNpTWl3MElnb3lNaTR3TWk0eU1ESTBJREEzT2pJMU96SXlMakF5TGpJd01qUWdNVEk2TURBN0lqQXNOU0k3SWpRc01EZ3pJZ295TWk0d01pNHlNREkwSURFMU9qTTRPekl5TGpBeUxqSXdNalFnTVRnNk1UZzdPeUl5TERZMk55SUtNak11TURJdU1qQXlOQ0F3T0Rvd01Ec3lNeTR3TWk0eU1ESTBJREV6T2pVeE95SXdMRFVpT3lJMUxETTFJZ295Tmk0d01pNHlNREkwSURBMk9qUTFPekkyTGpBeUxqSXdNalFnTURjNk5EUTdPeUl3TERrNE15SUtNall1TURJdU1qQXlOQ0F3T0RveE5Uc3lOaTR3TWk0eU1ESTBJREUwT2pFMk95SXdMRGMxSWpzaU5Td3lOamNpQ2pJM0xqQXlMakl3TWpRZ01EWTZNVEk3TWpjdU1ESXVNakF5TkNBd05qbzBOVHM3SWpBc05UVWlDakkzTGpBeUxqSXdNalFnTVRRNk1EVTdNamN1TURJdU1qQXlOQ0F4T0Rvek9EczdJalFzTlRVaUNqSTRMakF5TGpJd01qUWdNRGM2TVRVN01qZ3VNREl1TWpBeU5DQXdPVG8xT1RzaU1Dd3lOU0k3SWpJc05EZ3pJZ295T0M0d01pNHlNREkwSURFeE9qTXdPekk0TGpBeUxqSXdNalFnTVRJNk1EQTdPeUl3TERVaUNqSTRMakF5TGpJd01qUWdNVE02TlRNN01qZ3VNREl1TWpBeU5DQXhORG95TkRzN0lqQXNOVEUzSWdveU9TNHdNaTR5TURJMElEQTJPalExT3pJNUxqQXlMakl3TWpRZ01EYzZNamc3T3lJd0xEY3hOeUlLTWprdU1ESXVNakF5TkNBd09Ub3hNanN5T1M0d01pNHlNREkwSURFME9qSTJPenNpTlN3eU16TWlDakk1TGpBeUxqSXdNalFnTVRZNk1UVTdNamt1TURJdU1qQXlOQ0F4T0Rvd01EczdJakVzTnpVaUNqczdPd289IiwibmFtZSI6Im51bWJlcnMtZXhwb3J0LWF0d29yay0yMDI0LTA1LTE1LTE2XzM0XzQ0LmNzdiIsIm9wdGlvbnMiOnsidHlwZSI6InRleHQvY3N2IiwibGFzdE1vZGlmaWVkIjoxNzE1NzgzNjg0MDAwfX19fX19LHsiaWQiOjUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJNYXJjaCIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ik1hcmNoIn19fSx7ImlkIjo4LCJuYW1lIjoiMjAyNC8wMyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Mb2FkRmlsZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJMb2FkRmlsZSIsInN0YXRlIjp7InN0YXRlIjoibG9hZGVkIiwiZmlsZSI6eyJjb250ZW50IjoiUldsdWRITERwR2RsT3pzN0NrSmxaMmx1Ymp0RmJtUmxPMUJoZFhObE8wUmhkV1Z5Q2pBeExqQXpMakl3TWpRZ01EWTZOREk3TURFdU1ETXVNakF5TkNBd056b3pNenM3SWpBc09EVWlDakF4TGpBekxqSXdNalFnTURnNk1ESTdNREV1TURNdU1qQXlOQ0F3T0Rvek16czdJakFzTlRFM0lnb3dNUzR3TXk0eU1ESTBJREE1T2pFeU96QXhMakF6TGpJd01qUWdNVFE2TXpBN0lqQXNOU0k3SWpRc09DSUtNRFF1TURNdU1qQXlOQ0F3Tnpvek1Ec3dOQzR3TXk0eU1ESTBJREE0T2pFMU96c2lNQ3czTlNJS01EUXVNRE11TWpBeU5DQXhNem96TURzd05DNHdNeTR5TURJMElERTRPakF4T3pzaU5DdzFNVGNpQ2pBMkxqQXpMakl3TWpRZ01EYzZNVGM3TURZdU1ETXVNakF5TkNBd09Eb3dORHM3SWpBc056Z3pJZ293Tmk0d015NHlNREkwSURBNE9qTXdPekEyTGpBekxqSXdNalFnTURrNk5EVTdPeUl4TERJMUlnb3dOaTR3TXk0eU1ESTBJREV3T2pNd096QTJMakF6TGpJd01qUWdNVEU2TkRVN095SXhMREkxSWdvd05pNHdNeTR5TURJMElERXlPak13T3pBMkxqQXpMakl3TWpRZ01UTTZORFU3T3lJeExESTFJZ293Tmk0d015NHlNREkwSURFME9qSTRPekEyTGpBekxqSXdNalFnTVRnNk16QTdPeUkwTERBek15SUtNRGN1TURNdU1qQXlOQ0F3Tmpvek1Uc3dOeTR3TXk0eU1ESTBJREE0T2pJek95SXdMREl6TXlJN0lqRXNOak16SWdvd055NHdNeTR5TURJMElEQTVPakF3T3pBM0xqQXpMakl3TWpRZ01USTZNRE03T3lJekxEQTFJZ293Tnk0d015NHlNREkwSURFeU9qSTRPekEzTGpBekxqSXdNalFnTVRNNk1UQTdPeUl3TERjaUNqQTRMakF6TGpJd01qUWdNVEU2TURNN01EZ3VNRE11TWpBeU5DQXhPRG94TlRzN0lqY3NNaUlLTVRFdU1ETXVNakF5TkNBeE1Eb3lOVHN4TVM0d015NHlNREkwSURFeE9qSXpPenNpTUN3NU5qY2lDakU0TGpBekxqSXdNalFnTURjNk5UWTdNVGd1TURNdU1qQXlOQ0F4TWpvMU5EczdJalFzT1RZM0lnb3hPQzR3TXk0eU1ESTBJREV6T2pJMU96RTRMakF6TGpJd01qUWdNVFU2TURrN095SXhMRGN6TXlJS01Ua3VNRE11TWpBeU5DQXhORG96TVRzeE9TNHdNeTR5TURJMElERTNPalUyT3pzaU15dzBNVGNpQ2pJd0xqQXpMakl3TWpRZ01EYzZNVFU3TWpBdU1ETXVNakF5TkNBd09Ub3hNenM3SWpFc09UWTNJZ295TUM0d015NHlNREkwSURBNU9qUTVPekl3TGpBekxqSXdNalFnTVRFNk16QTdPeUl4TERZNE15SUtNakF1TURNdU1qQXlOQ0F4TWpvek9Ec3lNQzR3TXk0eU1ESTBJREUwT2pBd096c2lNU3d6TmpjaUNqSXhMakF6TGpJd01qUWdNRGc2TXpNN01qRXVNRE11TWpBeU5DQXhNRG96TWpzN0lqRXNPVGd6SWdveU1TNHdNeTR5TURJMElERXdPalEzT3pJeExqQXpMakl3TWpRZ01URTZORFU3T3lJd0xEazJOeUlLTWpFdU1ETXVNakF5TkNBeE5qb3pNRHN5TVM0d015NHlNREkwSURFNE9qUTFPenNpTWl3eU5TSUtNakl1TURNdU1qQXlOQ0F3TnpveU5Ec3lNaTR3TXk0eU1ESTBJREUwT2pFM096c2lOaXc0T0RNaUNqSTFMakF6TGpJd01qUWdNRGM2TURJN01qVXVNRE11TWpBeU5DQXhNam93TURzN0lqUXNPVFkzSWdveU5pNHdNeTR5TURJMElERTBPakF3T3pJMkxqQXpMakl3TWpRZ01UYzZOVE03T3lJekxEZzRNeUlLTWpjdU1ETXVNakF5TkNBd09Eb3hNRHN5Tnk0d015NHlNREkwSURFME9qRTVPeUl3TERVaU95STFMRFkxSWdveU9DNHdNeTR5TURJMElEQTNPakk1T3pJNExqQXpMakl3TWpRZ01USTZORGs3SWpBc05TSTdJalFzT0RNeklnb3lPQzR3TXk0eU1ESTBJREUyT2pNd096STRMakF6TGpJd01qUWdNVGc2TkRVN095SXlMREkxSWdveU9DNHdNeTR5TURJMElERTVPakl6T3pJNExqQXpMakl3TWpRZ01UazZORGs3T3lJd0xEUXpNeUlLTWpndU1ETXVNakF5TkNBeU1Eb3lNVHN5T0M0d015NHlNREkwSURJeU9qRTRPenNpTVN3NU5TSUtNamd1TURNdU1qQXlOQ0F5TWpvMU5qc3lPUzR3TXk0eU1ESTBJREF3T2pRNE96c2lNU3c0TmpjaUNqSTVMakF6TGpJd01qUWdNRGM2TkRJN01qa3VNRE11TWpBeU5DQXhNam96TnpzaU1Dd3lOU0k3SWpRc05qWTNJZ283T3pzSyIsIm5hbWUiOiJudW1iZXJzLWV4cG9ydC1hdHdvcmstMjAyNC0wNS0xNS0xNl8zNV8wNS5jc3YiLCJvcHRpb25zIjp7InR5cGUiOiJ0ZXh0L2NzdiIsImxhc3RNb2RpZmllZCI6MTcxNTc4MzcwNjAwMH19fX19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6NywibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IFskYDIwMjQvMDFgLCAkYDIwMjQvMDJgLCAkYDIwMjQvMDNgXSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIFskYDIwMjQvMDFgLCAkYDIwMjQvMDJgLCAkYDIwMjQvMDNgXSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjEsIm5hbWUiOiJEYXRhIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRGF0YSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJEYXRhIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiVGhlc2UgYXJlIGFsbCB0aGUgaW1wb3J0ZWQgYW5kIHBhcnNlZCB3b3JraW5nIGhvdXJzOiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlRoZXNlIGFyZSBhbGwgdGhlIGltcG9ydGVkIGFuZCBwYXJzZWQgd29ya2luZyBob3VyczoifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjAsIm5hbWUiOiJkYXRhIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBsb2Rhc2guZmxhdHRlbihhd2FpdCBQcm9taXNlLmFsbCgkYEF0V29yayBJbXBvcnRzYC5tYXAocGFyc2UpKSkiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBsb2Rhc2guZmxhdHRlbihhd2FpdCBQcm9taXNlLmFsbCgkYEF0V29yayBJbXBvcnRzYC5tYXAocGFyc2UpKSkifX19LHsiaWQiOjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtkYXRhfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtkYXRhfSAvPiJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6NCwibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGRhdGEiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBkYXRhIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6InBhcnNlIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIFBhcnNlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IlBhcnNlIn19fSx7ImlkIjoxNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEV4YW1wbGUgcGFyc2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiRXhhbXBsZSBwYXJzZSJ9fX0seyJpZCI6MCwibmFtZSI6ImV4YW1wbGVGaWxlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAkYEF0V29yayBJbXBvcnRzYFswXSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiICRgQXRXb3JrIEltcG9ydHNgWzBdIn19fSx7ImlkIjoxLCJuYW1lIjoiY3N2IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBHbG9iYWwubGlicy5wYXBhcGFyc2UucGFyc2UoYXdhaXQgZXhhbXBsZUZpbGUudGV4dCgpKSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIEdsb2JhbC5saWJzLnBhcGFwYXJzZS5wYXJzZShhd2FpdCBleGFtcGxlRmlsZS50ZXh0KCkpIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0LCJuYW1lIjoiZGF0YSIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gY3N2LmRhdGEuc2xpY2UoMiwgLTIpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgY3N2LmRhdGEuc2xpY2UoMiwgLTIpIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17ZGF0YX0gLz4iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17ZGF0YX0gLz4ifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjIsIm5hbWUiOiJwYXJzZWQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCBkYXRlRm10ID0gXCJkZC5NTS55eXl5IEhIOm1tXCJcblxuZnVuY3Rpb24gcGFyc2VOdW0oc3RyKSB7XG4gIGlmIChzdHIudHJpbSgpID09PSAnJykge1xuICAgIHJldHVybiAwXG4gIH1cbiAgcmV0dXJuIE51bWJlci5wYXJzZUZsb2F0KHN0ci5yZXBsYWNlKCcsJywgJy4nKSlcbn1cblxuZGF0YS5tYXAoXG4gIChbc3RhcnQsIGVuZCwgYnJlYWtIb3Vycywgd29ya0hvdXJzXSkgPT4gKHtcbiAgICBzdGFydDogR2xvYmFsLmxpYnMuZGF0ZWZucy5wYXJzZShzdGFydCwgZGF0ZUZtdCwgbmV3IERhdGUoKSksXG4gICAgZW5kOiBHbG9iYWwubGlicy5kYXRlZm5zLnBhcnNlKGVuZCwgZGF0ZUZtdCwgbmV3IERhdGUoKSksXG4gICAgYnJlYWtIb3VyczogcGFyc2VOdW0oYnJlYWtIb3VycyksXG4gICAgd29ya0hvdXJzOiBwYXJzZU51bSh3b3JrSG91cnMpLFxuICB9KVxuKSJ9fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPHJlYWN0SW5zcGVjdG9yLlRhYmxlSW5zcGVjdG9yIGRhdGE9e3BhcnNlZH0gLz4iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17cGFyc2VkfSAvPiJ9fX0seyJpZCI6OCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJmdWxsIiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6MTUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgQWN0dWFsIFBhcnNlciIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJBY3R1YWwgUGFyc2VyIn19fSx7ImlkIjo5LCJuYW1lIjoicGFyc2UiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBwYXJzZU51bShzdHIpIHtcbiAgaWYgKHN0ci50cmltKCkgPT09ICcnKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQoc3RyLnJlcGxhY2UoJywnLCAnLicpKVxufVxuIFxuY29uc3QgZGF0ZUZtdCA9IFwiZGQuTU0ueXl5eSBISDptbVwiXG5cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlKGZpbGUpIHtcbiAgY29uc3QgY3N2ID0gYXdhaXQgR2xvYmFsLmxpYnMucGFwYXBhcnNlLnBhcnNlKGF3YWl0IGZpbGUudGV4dCgpKVxuICBcbiAgY29uc3QgZGF0YSA9IGNzdi5kYXRhLnNsaWNlKDIsIC0yKVxuICBcbiAgcmV0dXJuIGRhdGEubWFwKFxuICAgIChbc3RhcnQsIGVuZCwgYnJlYWtIb3Vycywgd29ya0hvdXJzXSkgPT4gKHtcbiAgICAgIHN0YXJ0OiBHbG9iYWwubGlicy5kYXRlZm5zLnBhcnNlKHN0YXJ0LCBkYXRlRm10LCBuZXcgRGF0ZSgpKSxcbiAgICAgIGVuZDogR2xvYmFsLmxpYnMuZGF0ZWZucy5wYXJzZShlbmQsIGRhdGVGbXQsIG5ldyBEYXRlKCkpLFxuICAgICAgYnJlYWtIb3VyczogcGFyc2VOdW0oYnJlYWtIb3VycyksXG4gICAgICB3b3JrSG91cnM6IHBhcnNlTnVtKHdvcmtIb3VycyksXG4gICAgfSlcbiAgKVxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119XX1dfSx7ImlkIjoyLCJuYW1lIjoiSW52b2ljZSIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEludm9pY2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiSW52b2ljZSJ9fX0seyJpZCI6MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IkdlbmVyYXRlIGFuIGludm9pY2UgZm9yIGEgZ2l2ZW4gbW9udGguIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiR2VuZXJhdGUgYW4gaW52b2ljZSBmb3IgYSBnaXZlbiBtb250aC4ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiJtb250aHMiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoibG9kYXNoKCRgV29ya2luZyBIb3Vyc2AuRGF0YSlcbiAgLm1hcChlbnRyeSA9PiAoe1xuICAgIG1vbnRoOiBHbG9iYWwubGlicy5kYXRlZm5zLmZvcm1hdChlbnRyeS5zdGFydCwgJ0xMTEwgeXl5eScpLFxuICAgIC4uLmVudHJ5LFxuICB9KSlcbiAgLmdyb3VwQnkoJ21vbnRoJylcbiAgLnZhbHVlKCkifX19LHsiaWQiOjUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjQsIm5hbWUiOiJzZWxlY3RlZE1vbnRoIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBcIkphbnVhcnkgMjAyNFwiIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgXCJKYW51YXJ5IDIwMjRcIiJ9fX0seyJpZCI6MTIsIm5hbWUiOiJtb250aEVudHJpZXMiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBtb250aHNbc2VsZWN0ZWRNb250aF0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBtb250aHNbc2VsZWN0ZWRNb250aF0ifX19LHsiaWQiOjgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJXb3JraW5nIGhvdXJzOiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IldvcmtpbmcgaG91cnM6In19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gbG9kYXNoLnN1bUJ5KG1vbnRoRW50cmllcywgJ3dvcmtIb3VycycpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgbG9kYXNoLnN1bUJ5KG1vbnRoRW50cmllcywgJ3dvcmtIb3VycycpIn19fSx7ImlkIjo5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlJhbmdlIG9mIGVudHJpZXM6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiUmFuZ2Ugb2YgZW50cmllczoifX19LHsiaWQiOjExLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IGZtdCA9IGRhdGUgPT4gR2xvYmFsLmxpYnMuZGF0ZWZucy5mb3JtYXQoZGF0ZSwgXCJkbyBNTU0geXl5eVwiKVxuXG5jb25zdCBzb3J0ZWQgPSBsb2Rhc2guc29ydEJ5KG1vbnRoRW50cmllcywgJ3N0YXJ0JylcblxucmV0dXJuIDw+e2ZtdChzb3J0ZWRbMF0uc3RhcnQpfSAtIHtmbXQoc29ydGVkLnNsaWNlKC0xKVswXS5zdGFydCl9PC8+In19fSx7ImlkIjoxNywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJSZWNlaXZlcjoiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJSZWNlaXZlcjoifX19LHsiaWQiOjE5LCJuYW1lIjoicmVjZWl2ZXIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiPD5cbiAgQmlnQ29ycCBJbmMuPGJyLz5cbiAgTGFyZ2UgU3RyZWV0IDEyMzxici8+XG4gIDk5OTk5IE1lZ2FDaXR5XG48Lz4ifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ikludm9pY2UgRGF0ZToiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJJbnZvaWNlIERhdGU6In19fSx7ImlkIjoyMSwibmFtZSI6ImRhdGUiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IG5ldyBEYXRlKCkiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBuZXcgRGF0ZSgpIn19fSx7ImlkIjoyMiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBHZW5lcmF0ZWQgSW52b2ljZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJHZW5lcmF0ZWQgSW52b2ljZSJ9fX0seyJpZCI6MTYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiI8RG9jdW1lbnQ+XG4gIDxUZW1wbGF0ZVxuICAgIHJlY2VpdmVyPXtyZWNlaXZlcn1cbiAgICBkYXRlPXtkYXRlfVxuICAgIGRhdGE9e21vbnRoRW50cmllc31cbiAgICBsb2NhbGU9XCJlblwiXG4gICAgY3VycmVuY3k9XCJVU0RcIlxuICAgIGhvdXJseVdhZ2U9ezc1fVxuICAgIHRheFJhdGU9ezAuMTl9XG4gICAgLz5cbjwvRG9jdW1lbnQ+In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6IkRvY3VtZW50Iiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRG9jdW1lbnQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiRG9jdW1lbnQifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJDcmVhdGVzIGEgcHJpbnRhYmxlIGRvY3VtZW50LiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkNyZWF0ZXMgYSBwcmludGFibGUgZG9jdW1lbnQuIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxLCJuYW1lIjoiRG9jdW1lbnQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiByZW5kZXJEb2N1bWVudChjb250ZW50KSB7XG4gIHJldHVybiBSZWFjdERvbVNlcnZlci5yZW5kZXJUb1N0cmluZyhcbiAgICAgIDxodG1sPlxuICAgICAgICA8aGVhZD5cbiAgICAgICAgICA8c3R5bGU+e2BcbiAgICAgICAgICAgIEBwYWdlIHtcbiAgICAgICAgICAgICAgbWFyZ2luOiAyY20gMCAwIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tXCIgLz5cbiAgICAgICAgPC9oZWFkPlxuICAgICAgICA8Ym9keSBjbGFzc05hbWU9XCJiZy13aGl0ZVwiPlxuICAgICAgICAgIHtjb250ZW50fVxuICAgICAgICA8L2JvZHk+XG4gICAgICA8L2h0bWw+XG4gICAgKVxufVxuICBcbmZ1bmN0aW9uIERvY3VtZW50KHtjaGlsZHJlbn0pIHtcbiAgY29uc3QgaWZyYW1lUmVmID0gUmVhY3QudXNlUmVmKClcbiAgXG4gIGZ1bmN0aW9uIG9uUHJpbnRJZnJhbWUoKSB7XG4gICAgaWZyYW1lUmVmLmN1cnJlbnQ/LmNvbnRlbnRXaW5kb3c/LnByaW50KClcbiAgfVxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtc3RyZXRjaCBzcGFjZS15LTJcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmZsb3cteC1hdXRvXCI+XG4gICAgICAgIDxpZnJhbWVcbiAgICAgICAgICByZWY9e2lmcmFtZVJlZn1cbiAgICAgICAgICBjbGFzc05hbWU9XCJib3JkZXIgbWluLXctWzc2OHB4XVwiXG4gICAgICAgICAgaGVpZ2h0PVwiMTIwMFwiXG4gICAgICAgICAgc3JjRG9jPXtyZW5kZXJEb2N1bWVudChjaGlsZHJlbil9XG4gICAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGJ1dHRvblxuICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEgcm91bmRlZCBiZy1ibHVlLTEwMCBob3ZlcjpiZy1ibHVlLTIwMFwiXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUHJpbnRJZnJhbWUoKX1cbiAgICAgID5cbiAgICAgICAgUHJpbnRcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICApXG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IlRlbXBsYXRlIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgSW52b2ljZSBUZW1wbGF0ZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJJbnZvaWNlIFRlbXBsYXRlIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRm9ybWF0dGVycyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJGb3JtYXR0ZXJzIn19fSx7ImlkIjo1LCJuYW1lIjoiZm9ybWF0dGVycyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6Iih7IGxvY2FsZSwgY3VycmVuY3kgfSkgPT4gKHtcbiAgY3VycmVuY3k6IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgIGN1cnJlbmN5LFxuICB9KSxcbiAgXG4gIGRhdGU6IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7XG4gICAgZGF0ZVN0eWxlOiAnc2hvcnQnLFxuICB9KSxcbiAgXG4gIHBlcmNlbnQ6IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgIHN0eWxlOiAncGVyY2VudCcsXG4gIH0pLFxufSkifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBUYWJsZSBvZiBMaW5lIEl0ZW1zIGZvciBIb3VycyBXb3JrZWQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiVGFibGUgb2YgTGluZSBJdGVtcyBmb3IgSG91cnMgV29ya2VkIn19fSx7ImlkIjoxLCJuYW1lIjoiVGFibGUiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBUYWJsZSh7IGRhdGEsIGxvY2FsZSwgY3VycmVuY3ksIGhvdXJseVdhZ2UsIHRheFJhdGUgfSkge1xuICBjb25zdCBmbXQgPSBmb3JtYXR0ZXJzKHsgbG9jYWxlLCBjdXJyZW5jeSB9KVxuICBcbiAgY29uc3QgcHJpY2VzID0gZGF0YS5tYXAoKHsgd29ya0hvdXJzIH0pID0+IHdvcmtIb3VycyAqIGhvdXJseVdhZ2UpXG4gIGNvbnN0IHN1bSA9IGxvZGFzaC5zdW0ocHJpY2VzKVxuICBjb25zdCB0YXhlcyA9IEdsb2JhbC51dGlscy5yb3VuZE9uKHN1bSAqIHRheFJhdGUsIDAuMDEpXG4gIGNvbnN0IHRvdGFsID0gR2xvYmFsLnV0aWxzLnJvdW5kT24oc3VtICsgdGF4ZXMsIDAuMDEpXG4gIFxuICByZXR1cm4gKFxuICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ3LWZ1bGxcIj5cbiAgICAgIDx0aGVhZCBjbGFzc05hbWU9XCJmb250LWJvbGQgYmctc2t5LTEwMFwiPlxuICAgICAgICA8dHI+XG4gICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMiB0ZXh0LWxlZnRcIj5Qcm9qZWN0PC90aD5cbiAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yIHRleHQtY2VudGVyIHctMjhcIj5EYXRlPC90aD5cbiAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yIHRleHQtcmlnaHQgdy00MFwiPldvcmtpbmcgSG91cnM8L3RoPlxuICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodCB3LTI4XCI+UHJpY2U8L3RoPlxuICAgICAgICA8L3RyPlxuICAgICAgPC90aGVhZD5cbiAgICAgIFxuICAgICAgey8qXG4gICAgICAgIFwiUGFkZGluZ1wiIGF0IHRoZSB0YWJsZSBib3R0b20sIHNvIHRoZSBjb250ZW50IGRvZXNuJ3QgaGlkZVxuICAgICAgICBiZWxvdyB0aGUgZm9vdGVyIHdoZW4gcHJpbnRpbmcuXG4gICAgICAqL31cbiAgICAgIDx0Zm9vdCBjbGFzc05hbWU9XCJoaWRkZW4gcHJpbnQ6dGFibGUtZm9vdGVyLWdyb3VwXCI+XG4gICAgICAgIDx0ciBjbGFzc05hbWU9XCJoLTI4XCI+PHRkLz48L3RyPlxuICAgICAgPC90Zm9vdD5cbiAgICBcbiAgICAgIDx0Ym9keT5cbiAgICAgICAge2RhdGEubWFwKCh7IHN0YXJ0LCB3b3JrSG91cnMgfSkgPT4gKFxuICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJldmVuOmJnLXNsYXRlLTEwMFwiPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInB4LTIgcHktMS41XCI+XG4gICAgICAgICAgICAgIEJ1aWxkVGhlRnV0dXJlXG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInB4LTIgcHktMS41IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIHtmbXQuZGF0ZS5mb3JtYXQoc3RhcnQpfVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC0yIHB5LTEuNSB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICAgIHtHbG9iYWwudXRpbHMuZm9ybWF0RHVyYXRpb24od29ya0hvdXJzKX0gaFxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC0yIHB5LTEuNSB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICAgIHtmbXQuY3VycmVuY3kuZm9ybWF0KHdvcmtIb3VycyAqIGhvdXJseVdhZ2UpfVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICApKX1cbiAgICAgICAgXG4gICAgICAgIHsvKlxuICAgICAgICAgIEZvb3RlciBub3QgaW4gPHRmb290PiBiZWNhdXNlIG90aGVyd2lzZVxuICAgICAgICAgIGl0IGdldCdzIHJlcGVhdGVkIG9uIGV2ZXJ5IHByaW50ZWQgcGFnZVxuICAgICAgICAqL31cbiAgICAgICAgPHRyIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIGJnLXNreS0xMDAgYm9yZGVyLXQtMiBib3JkZXItd2hpdGUgYnJlYWstYmVmb3JlLWF2b2lkLXBhZ2VcIj5cbiAgICAgICAgICA8dGQgY29sc3Bhbj17M30gY2xhc3NOYW1lPVwicC0yIHRleHQtcmlnaHRcIj5cbiAgICAgICAgICAgIFN1bVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICB7Zm10LmN1cnJlbmN5LmZvcm1hdChzdW0pfVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDx0ciBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBiZy1za3ktMTAwIGJvcmRlci10LTIgYm9yZGVyLXdoaXRlIGJyZWFrLWJlZm9yZS1hdm9pZC1wYWdlXCI+XG4gICAgICAgICAgPHRkIGNvbFNwYW49ezN9IGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICB7Zm10LnBlcmNlbnQuZm9ybWF0KHRheFJhdGUpfSBUYXhlc1xuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICB7Zm10LmN1cnJlbmN5LmZvcm1hdCh0YXhlcyl9XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgPHRyIGNsYXNzTmFtZT1cImZvbnQtYm9sZCBiZy1za3ktMTAwIGJvcmRlci10LTIgYm9yZGVyLXdoaXRlIGJyZWFrLWJlZm9yZS1hdm9pZC1wYWdlXCI+XG4gICAgICAgICAgPHRkIGNvbFNwYW49ezN9IGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICBUb3RhbFxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICB7Zm10LmN1cnJlbmN5LmZvcm1hdCh0b3RhbCl9XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgIDwvdGJvZHk+XG4gICAgPC90YWJsZT5cbiAgKVxufSJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEludm9pY2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiSW52b2ljZSJ9fX0seyJpZCI6NCwibmFtZSI6Ikludm9pY2UiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBJbnZvaWNlKHsgZGF0ZSwgcmVjZWl2ZXIsIGRhdGEsIGxvY2FsZSwgY3VycmVuY3ksIGhvdXJseVdhZ2UsIHRheFJhdGUgfSkge1xuICBjb25zdCBmbXQgPSBmb3JtYXR0ZXJzKHsgbG9jYWxlLCBjdXJyZW5jeSB9KVxuICBcbiAgY29uc3QgaW52b2ljZU1vbnRoID0gR2xvYmFsLmxpYnMuZGF0ZWZucy5mb3JtYXREYXRlKGRhdGUsIFwieXl5eS1NTVwiKTtcbiAgY29uc3QgaW52b2ljZU5vID0gYCR7aW52b2ljZU1vbnRofS0wMWA7XG4gIFxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8bWFpbiBjbGFzc05hbWU9XCJmb250LVsnQXJpYWwnXSBteC0yMCBtYi0yOFwiPlxuICAgICAgXG4gICAgICAgIHsvKiBIZWFkZXIgdG9wIHJpZ2h0IHdpdGggbmFtZSBhbmQgZGVzY3JpcHRpb24gKi99XG4gICAgICAgIDxoMVxuICAgICAgICAgIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LTR4bCB0ZXh0LXJpZ2h0IHRleHQtc2t5LTcwMCBsZWFkaW5nLW5vcm1hbFwiXG4gICAgICAgID5cbiAgICAgICAgICB7Q29uZmlnLm93bmVyLm5hbWV9XG4gICAgICAgIDwvaDE+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yaWdodCB0ZXh0LXNsYXRlLTgwMFwiPlxuICAgICAgICAgIHtDb25maWcub3duZXIuZGVzY3JpcHRpb259XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBteS0xMlwiPlxuICAgICAgICAgIHsvKiBBZHJlc3Mgc2VuZGVyIGFuZCByZWNlaXZlciBsZWZ0ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgPGFkZHJlc3MgY2xhc3NOYW1lPVwidGV4dC14cyBub3QtaXRhbGljIHRleHQtc2t5LTcwMFwiPlxuICAgICAgICAgICAgICB7Q29uZmlnLm93bmVyLmFkZHJlc3MuZmxhdE1hcChmaWVsZCA9PiBbXCLigKJcIiwgZmllbGRdKS5zbGljZSgxKS5qb2luKFwiIFwiKX1cbiAgICAgICAgICAgIDwvYWRkcmVzcz5cbiAgICAgICAgICAgIDxhZGRyZXNzIGNsYXNzTmFtZT1cImxlYWRpbmctdGlnaHQgbm90LWl0YWxpY1wiPlxuICAgICAgICAgICAgICB7cmVjZWl2ZXJ9XG4gICAgICAgICAgICA8L2FkZHJlc3M+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIENvbnRhY3QgZGV0YWlscyByaWdodCAqL31cbiAgICAgICAgICA8YWRkcmVzc1xuICAgICAgICAgICAgY2xhc3NOYW1lPVwibGVhZGluZy10aWdodCBub3QtaXRhbGljIGZsZXgtZW5kIHRleHQtcmlnaHQgdGV4dC1zbVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge0NvbmZpZy5vd25lci5hZGRyZXNzLmZsYXRNYXAoZmllbGQgPT4gW2ZpZWxkLCA8YnIvPl0pfVxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIHtDb25maWcub3duZXIuY29udGFjdC5mbGF0TWFwKGZpZWxkID0+IFtmaWVsZCwgPGJyLz5dKX1cbiAgICAgICAgICA8L2FkZHJlc3M+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHsvKiBNZXNzYWdlIEhlYWRlciAqL31cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIHRleHQtc2t5LTcwMCBsZWFkaW5nLW5vcm1hbFwiPlxuICAgICAgICAgIEludm9pY2VcbiAgICAgICAgPC9oMj5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGxlYWRpbmctbm9ybWFsIG10LTEgbWItNVwiPlxuICAgICAgICAgIDxzcGFuPkludm9pY2VObzoge2ludm9pY2VOb308L3NwYW4+XG4gICAgICAgICAgPHNwYW4+e2ZtdC5kYXRlLmZvcm1hdChkYXRlKX08L3NwYW4+XG4gICAgICAgIDwvaDM+XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgey8qIE1lc3NhZ2UgQ29udGVudCAqL31cbiAgICAgICAgPGFydGljbGU+XG4gICAgICAgICAgPFRhYmxlXG4gICAgICAgICAgICBkYXRhPXtkYXRhfVxuICAgICAgICAgICAgbG9jYWxlPXtsb2NhbGV9XG4gICAgICAgICAgICBjdXJyZW5jeT17Y3VycmVuY3l9XG4gICAgICAgICAgICBob3VybHlXYWdlPXtob3VybHlXYWdlfVxuICAgICAgICAgICAgdGF4UmF0ZT17dGF4UmF0ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvYXJ0aWNsZT5cbiAgICAgICAgXG4gICAgICA8L21haW4+XG4gICAgICBcbiAgICAgIHsvKiBGb290ZXIgKi99XG4gICAgICA8Zm9vdGVyXG4gICAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICAgIGZpeGVkIGJvdHRvbS0wIGluc2V0LXgtMCBoLTI0IHB4LTIwIHB5LTJcbiAgICAgICAgICBiZy1zbGF0ZS02MDBcbiAgICAgICAgICBmb250LVsnQXJpYWwnXSB0ZXh0LXNtIHRleHQtd2hpdGVcbiAgICAgICAgICBmbGV4IGZsZXgtcm93IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydFxuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtDb25maWcub3duZXIuZGVzY3JpcHRpb259PGJyLz5cbiAgICAgICAgICB7Q29uZmlnLm93bmVyLm5hbWV9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YWRkcmVzcyBjbGFzc05hbWU9XCJub3QtaXRhbGljXCI+XG4gICAgICAgICAge0NvbmZpZy5vd25lci5iYW5rfVxuICAgICAgICA8L2FkZHJlc3M+XG4gICAgICA8L2Zvb3Rlcj5cbiAgICA8Lz5cbiAgKVxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119XX0seyJpZCI6MywibmFtZSI6IkZpbmFuY2VzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRmluYW5jZXMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiRmluYW5jZXMifX19LHsiaWQiOjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBFeHBlbnNlcyBCdWRnZXRzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkV4cGVuc2VzIEJ1ZGdldHMifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGp1c3RpZnktc3RyZXRjaFwiPlxuICB7RXhwZW5zZXMub2ZmaWNlQ2hhcnR9XG4gIHtFeHBlbnNlcy5lcXVpcG1lbnRDaGFydH1cbjwvZGl2PiJ9fX0seyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEluY29tZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJJbmNvbWUifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBJbmNvbWUuY2hhcnQiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBJbmNvbWUuY2hhcnQifX19LHsiaWQiOjgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjExLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6OSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6MTAsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSB7IEV4cGVuc2VzLCBJbmNvbWUsIHV0aWxzIH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IEV4cGVuc2VzLCBJbmNvbWUsIHV0aWxzIH0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjozLCJuYW1lIjoidXRpbHMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBGaW5hbmNlIFV0aWxzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkZpbmFuY2UgVXRpbHMifX19LHsiaWQiOjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCBjdXJyZW5jeUZvcm1hdHRlciA9IEludGwuTnVtYmVyRm9ybWF0KCdlbicsIHtcbiAgc3R5bGU6ICdjdXJyZW5jeScsXG4gIGN1cnJlbmN5OiAnVVNEJyxcbn0pXG5cbmZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KG51bSkge1xuICByZXR1cm4gY3VycmVuY3lGb3JtYXR0ZXIuZm9ybWF0KG51bSlcbn1cblxucmV0dXJuIHtcbiAgY3VycmVuY3lGb3JtYXR0ZXIsXG4gIGZvcm1hdEN1cnJlbmN5LFxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjIsIm5hbWUiOiJFeHBlbnNlcyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEV4cGVuc2VzIEJ1ZGdldCIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJFeHBlbnNlcyBCdWRnZXQifX19LHsiaWQiOjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBPZmZpY2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiT2ZmaWNlIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiUmVudCIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlJlbnQifX19LHsiaWQiOjMsIm5hbWUiOiJyZW50IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAzMDAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiAzMDAifX19LHsiaWQiOjQsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJJbnRlcm5ldCIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkludGVybmV0In19fSx7ImlkIjo2LCJuYW1lIjoiaW50ZXJuZXQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDUwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgNTAifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJFbGVjdHJpY2l0eSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkVsZWN0cmljaXR5In19fSx7ImlkIjo5LCJuYW1lIjoiZWxlY3RyaWNpdHkiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDMwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgMzAifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlV0aWxpdGllcyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlV0aWxpdGllcyJ9fX0seyJpZCI6MTIsIm5hbWUiOiJ1dGlsaXRpZXMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDUwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgNTAifX19LHsiaWQiOjI5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6MzAsIm5hbWUiOiJvZmZpY2UiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgcmVudCwgaW50ZXJuZXQsIGVsZWN0cmljaXR5LCB1dGlsaXRpZXMgfSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIHsgcmVudCwgaW50ZXJuZXQsIGVsZWN0cmljaXR5LCB1dGlsaXRpZXMgfSJ9fX0seyJpZCI6NDIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8PlN1bToge3V0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhvZmZpY2UpKSl9PC8+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPD5TdW06IHt1dGlscy5mb3JtYXRDdXJyZW5jeShsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMob2ZmaWNlKSkpfTwvPiJ9fX0seyJpZCI6MzUsIm5hbWUiOiJvZmZpY2VDaGFydCIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7IFBpZUNoYXJ0LCBSZXNwb25zaXZlQ29udGFpbmVyIH0gPSBHbG9iYWwubGlicy5yZWNoYXJ0cztcblxuPFJlc3BvbnNpdmVDb250YWluZXIgaGVpZ2h0PXs0MDB9PlxuICA8UGllQ2hhcnQgd2lkdGg9ezQwMH0gaGVpZ2h0PXs0MDB9PlxuICAgIHtHbG9iYWwudXRpbHMuUGllRExDKHtcbiAgICAgIGRhdGE6IE9iamVjdC5lbnRyaWVzKG9mZmljZSksXG4gICAgICBsYWJlbEtleTogXCIwXCIsXG4gICAgICBkYXRhS2V5OiBcIjFcIixcbiAgICAgIGZvcm1hdHRlcjogdXRpbHMuZm9ybWF0Q3VycmVuY3ksXG4gICAgICBjeDogXCI1MCVcIixcbiAgICAgIGN5OiBcIjUwJVwiLFxuICAgICAgaW5uZXJSYWRpdXM6IDcwLFxuICAgICAgb3V0ZXJSYWRpdXM6IDE0MCxcbiAgICAgIGlzQW5pbWF0aW9uQWN0aXZlOiBmYWxzZSxcbiAgICB9KX1cbiAgPC9QaWVDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjEzLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjUzLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEVxdWlwbWVudCIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJFcXVpcG1lbnQifX19LHsiaWQiOjE1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiTW9iaWxlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiTW9iaWxlIn19fSx7ImlkIjoxNiwibmFtZSI6Im1vYmlsZSIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gMjAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiAyMCJ9fX0seyJpZCI6MTcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiTGFwdG9wIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiTGFwdG9wIn19fSx7ImlkIjoxOSwibmFtZSI6ImxhcHRvcCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gNTAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiA1MCJ9fX0seyJpZCI6MjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjI3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiRGVza3RvcCAoVGFibGUsIE1vbml0b3JzLCBEb25nbGVzLCBldGMpIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiRGVza3RvcCAoVGFibGUsIE1vbml0b3JzLCBEb25nbGVzLCBldGMpIn19fSx7ImlkIjoyOCwibmFtZSI6ImRlc2t0b3AiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDEwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgMTAifX19LHsiaWQiOjIzLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlBlbiAmIFBhcGVyIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiUGVuICYgUGFwZXIifX19LHsiaWQiOjI1LCJuYW1lIjoicGVuUGFwZXIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDEwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgMTAifX19LHsiaWQiOjMyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozMywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6MzQsIm5hbWUiOiJlcXVpcG1lbnQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgbW9iaWxlLCBsYXB0b3AsIGRlc2t0b3AsIHBlblBhcGVyIH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IG1vYmlsZSwgbGFwdG9wLCBkZXNrdG9wLCBwZW5QYXBlciB9In19fSx7ImlkIjo0NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDw+U3VtOiB7dXRpbHMuZm9ybWF0Q3VycmVuY3kobG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGVxdWlwbWVudCkpKX08Lz4iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiA8PlN1bToge3V0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhlcXVpcG1lbnQpKSl9PC8+In19fSx7ImlkIjozNiwibmFtZSI6ImVxdWlwbWVudENoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHsgUGllQ2hhcnQsIFJlc3BvbnNpdmVDb250YWluZXIgfSA9IEdsb2JhbC5saWJzLnJlY2hhcnRzO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezQwMH0+XG4gIDxQaWVDaGFydCB3aWR0aD17NDAwfSBoZWlnaHQ9ezQwMH0+XG4gICAge0dsb2JhbC51dGlscy5QaWVETEMoe1xuICAgICAgZGF0YTogT2JqZWN0LmVudHJpZXMoZXF1aXBtZW50KSxcbiAgICAgIGxhYmVsS2V5OiBcIjBcIixcbiAgICAgIGRhdGFLZXk6IFwiMVwiLFxuICAgICAgZm9ybWF0dGVyOiB1dGlscy5mb3JtYXRDdXJyZW5jeSxcbiAgICAgIGN4OiBcIjUwJVwiLFxuICAgICAgY3k6IFwiNTAlXCIsXG4gICAgICBpbm5lclJhZGl1czogNzAsXG4gICAgICBvdXRlclJhZGl1czogMTQwLFxuICAgICAgaXNBbmltYXRpb25BY3RpdmU6IGZhbHNlLFxuICAgIH0pfVxuICA8L1BpZUNoYXJ0PlxuPC9SZXNwb25zaXZlQ29udGFpbmVyPiJ9fX0seyJpZCI6MzcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjU0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjM4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXZlcnl0aGluZyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJFdmVyeXRoaW5nIn19fSx7ImlkIjozOSwibmFtZSI6ImV2ZXJ5dGhpbmciLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgLi4ub2ZmaWNlLCAuLi5lcXVpcG1lbnQgfSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIHsgLi4ub2ZmaWNlLCAuLi5lcXVpcG1lbnQgfSJ9fX0seyJpZCI6NDYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8PlN1bToge3V0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhldmVyeXRoaW5nKSkpfTwvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDw+U3VtOiB7dXRpbHMuZm9ybWF0Q3VycmVuY3kobG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGV2ZXJ5dGhpbmcpKSl9PC8+In19fSx7ImlkIjo0MCwibmFtZSI6ImV2ZXJ5dGhpbmdDaGFydCIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7IFBpZUNoYXJ0LCBSZXNwb25zaXZlQ29udGFpbmVyIH0gPSBHbG9iYWwubGlicy5yZWNoYXJ0cztcblxuPFJlc3BvbnNpdmVDb250YWluZXIgaGVpZ2h0PXs0MDB9PlxuICA8UGllQ2hhcnQgd2lkdGg9ezQwMH0gaGVpZ2h0PXs0MDB9PlxuICAgIHtHbG9iYWwudXRpbHMuUGllRExDKHtcbiAgICAgIGRhdGE6IE9iamVjdC5lbnRyaWVzKGV2ZXJ5dGhpbmcpLFxuICAgICAgbGFiZWxLZXk6IFwiMFwiLFxuICAgICAgZGF0YUtleTogXCIxXCIsXG4gICAgICBmb3JtYXR0ZXI6IHV0aWxzLmZvcm1hdEN1cnJlbmN5LFxuICAgICAgY3g6IFwiNTAlXCIsXG4gICAgICBjeTogXCI1MCVcIixcbiAgICAgIGlubmVyUmFkaXVzOiA3MCxcbiAgICAgIG91dGVyUmFkaXVzOiAxNDAsXG4gICAgICBpc0FuaW1hdGlvbkFjdGl2ZTogZmFsc2UsXG4gICAgfSl9XG4gIDwvUGllQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjo0NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NDgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjU3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1OCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjQ5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo1MCwibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoe1xuICBvZmZpY2UsXG4gIG9mZmljZUNoYXJ0LFxuICBlcXVpcG1lbnQsXG4gIGVxdWlwbWVudENoYXJ0LFxuICBldmVyeXRoaW5nQ2hhcnQsXG4gIHN1bTogbG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGV2ZXJ5dGhpbmcpKSxcbn0pIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IkluY29tZSIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEluY29tZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJJbmNvbWUifX19LHsiaWQiOjQsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiJtb250aHMiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgaG91cmx5V2FnZSA9IDc1XG5cbmxvZGFzaCgkYFdvcmtpbmcgSG91cnNgLkRhdGEpXG4gIC5tYXAoZW50cnkgPT4gKHtcbiAgICBtb250aDogR2xvYmFsLmxpYnMuZGF0ZWZucy5mb3JtYXQoZW50cnkuc3RhcnQsICdMTEwgeXl5eScpLFxuICAgIC4uLmVudHJ5LFxuICB9KSlcbiAgLmdyb3VwQnkoJ21vbnRoJylcbiAgLm1hcFZhbHVlcyhlbnRyaWVzID0+XG4gICAgR2xvYmFsLnV0aWxzLnJvdW5kT24oXG4gICAgICBsb2Rhc2guc3VtQnkoZW50cmllcywgJ3dvcmtIb3VycycpICogaG91cmx5V2FnZSxcbiAgICAgIDAuMDEsXG4gICAgKVxuICApXG4gIC52YWx1ZSgpIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiQWZ0ZXIgcGxhbm5lZCBleHBlbnNlczoiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJBZnRlciBwbGFubmVkIGV4cGVuc2VzOiJ9fX0seyJpZCI6OCwibmFtZSI6ImJhbGFuY2UiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoibG9kYXNoLm1hcFZhbHVlcyhtb250aHMsIG1vbnRoID0+XG4gIG1vbnRoIC0gRXhwZW5zZXMuc3VtXG4pIn19fSx7ImlkIjo5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTEsIm5hbWUiOiJjaGFydCIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7XG4gIFJlc3BvbnNpdmVDb250YWluZXIsXG4gIEJhckNoYXJ0LFxuICBCYXIsXG4gIExhYmVsTGlzdCxcbiAgWEF4aXMsXG4gIFlBeGlzLFxuICBUb29sdGlwLFxufSA9IEdsb2JhbC5saWJzLnJlY2hhcnRzO1xuXG5jb25zdCBkYXRhID0gT2JqZWN0LmVudHJpZXMobW9udGhzKVxuICAubWFwKEdsb2JhbC51dGlscy5sYWJlbGVyKCdtb250aCcsICdpbmNvbWUnKSk7XG5cbjxSZXNwb25zaXZlQ29udGFpbmVyIGhlaWdodD17MzAwfT5cbiAgPEJhckNoYXJ0IGRhdGE9e2RhdGF9PlxuICAgIDxUb29sdGlwIC8+XG4gICAgPEJhciB0eXBlPVwibW9ub3RvbmVcIiBkYXRhS2V5PVwiaW5jb21lXCIgZmlsbD1cIiNmNGQwNmZcIj5cbiAgICAgIDxMYWJlbExpc3QgZGF0YUtleT1cImluY29tZVwiIHBvc2l0aW9uPVwidG9wXCIgZm9ybWF0dGVyPXt1dGlscy5mb3JtYXRDdXJyZW5jeX0gLz5cbiAgICA8L0Jhcj5cbiAgICA8WEF4aXMgZGF0YUtleT1cIm1vbnRoXCIgLz5cbiAgICA8WUF4aXMgdGlja0Zvcm1hdHRlcj17dXRpbHMuZm9ybWF0Q3VycmVuY3l9IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjoxMiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjoxNSwibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgbW9udGhzLCBiYWxhbmNlLCBjaGFydCB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBtb250aHMsIGJhbGFuY2UsIGNoYXJ0IH0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19XX1dLCJ2aWV3U3RhdGUiOnsic2lkZWJhck9wZW4iOnRydWUsIm9wZW5QYWdlIjpbNV19LCJ0ZW1wbGF0ZSI6eyJpZCI6LTEsIm5hbWUiOiIiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOltdfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119fX0=","name":"Demo Template.json","options":{"type":"application/json","lastModified":1716386322121}}}}}},{"id":3,"name":"demoTemplate","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= JSON.parse(await demoTemplateFile.text())","note":{"type":"expr","code":" JSON.parse(await demoTemplateFile.text())"}}},{"id":4,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"DefaultPageBlock","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= BlockSelector('SheetOf(Note)', SheetOf(Note))","note":{"type":"expr","code":" BlockSelector('SheetOf(Note)', SheetOf(Note))"}}},{"id":10,"name":"ReSheetBlock","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= DocumentOf(DefaultPageBlock)","note":{"type":"expr","code":" DocumentOf(DefaultPageBlock)"}}},{"id":11,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":12,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"## Editor","note":{"type":"text","tag":"h2","text":"Editor"}}},{"id":13,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Edit and export the demo here.","note":{"type":"text","tag":"p","text":"Edit and export the demo here."}}},{"id":19,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"scripts","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { makeRange, setCurrentRange } = resheet.code.useEditable\n\nreturn {\n  async jumpEnd() {\n    const element = document.activeElement\n    if (!element) { return }\n    setCurrentRange(makeRange(element, element.textContent.length - 1))\n  },\n  \n  async dummy() {},\n}"}}},{"id":20,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"demo","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/DemoRecorder(ReSheetBlock, demoTemplate, scripts)","note":{"type":"block","isInstantiated":true,"code":"DemoRecorder(ReSheetBlock, demoTemplate, scripts)","state":{"actions":[{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":true},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":true},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"input","input":"= date.getDate()"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"= date"},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":3},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"input","input":"/Global.blocks.Date()"},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"input","input":"\n  Datepicker,"},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"input","input":"esmshCss('react-datepicker/dist/react-datepicker.css')"},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"/Code"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"Datepicker"},{"type":"key","key":"R","code":"KeyR","ctrlKey":true,"metaKey":false,"shiftKey":true,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"= esmshDefault('react-datepicker')"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"## Datepicker"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"G","code":"KeyG","ctrlKey":false,"metaKey":false,"shiftKey":true,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"input","input":"/Global.blocks.Select(Object.keys(months))"},{"type":"pause","duration":1},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"key","key":" ","code":"Space","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":3},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"= \"February 2024\""},{"type":"pause","duration":0.5},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2.5},{"type":"input","input":"= <reactInspector.TableInspector data={monthEntries} />"},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"script","name":"jumpEnd"},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":" ","code":"Space","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"input","input":"."},{"type":"pause","duration":0.5},{"type":"script","name":"jumpEnd"},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":" ","code":"Space","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"= $`Working Hours`."},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"## Working Hours"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"\n  charts: { weeks: weekChart, months: monthsChart },"},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"weekChart"},{"type":"pause","duration":0.5},{"type":"key","key":"R","code":"KeyR","ctrlKey":true,"metaKey":false,"shiftKey":true,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":2},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":true},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":true},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"= 500"},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":true,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":1},{"type":"key","key":"m","code":"KeyM","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":0.5},{"type":"input","input":"balance"},{"type":"pause","duration":0.5},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Backspace","code":"Backspace","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowLeft","code":"ArrowLeft","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowRight","code":"ArrowRight","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowUp","code":"ArrowUp","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":true},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"m","code":"KeyM","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":" ","code":"Space","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"key","key":"Escape","code":"Escape","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"script","name":"jumpEnd"},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":" ","code":"Space","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"."},{"type":"pause","duration":0.5},{"type":"script","name":"jumpEnd"},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":"ArrowDown","code":"ArrowDown","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"key","key":" ","code":"Space","ctrlKey":true,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"input","input":"."},{"type":"pause","duration":1},{"type":"input","input":"= Finances"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":1},{"type":"input","input":"## Income"},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false},{"type":"pause","duration":0.5},{"type":"key","key":"Enter","code":"Enter","ctrlKey":false,"metaKey":false,"shiftKey":false,"altKey":false}]}}}},{"id":7,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= demo","note":{"type":"expr","code":" demo"}}},{"id":17,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"## Viewer","note":{"type":"text","tag":"h2","text":"Viewer"}}},{"id":15,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Loads the demo from GitHub and shows it.","note":{"type":"text","tag":"p","text":"Loads the demo from GitHub and shows it."}}},{"id":8,"name":"","visibility":"result","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"async function loadRecording() {\n  const recordingUrl = 'https://raw.githubusercontent.com/keenbug/ReSheet/main/examples/demo-recording.json'\n  const [obj, store] = await (await fetch(recordingUrl)).json()\n  return utils.deduper.dup(obj, store)\n}\n\n<RecordingLoader loadRecording={loadRecording} startJson={demoTemplate} block={ReSheetBlock} checkEvery={5} scripts={scripts} />"}}}]}},"isCollapsed":true,"children":[{"id":13,"name":"- Disclaimer -","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Disclaimer","note":{"type":"text","tag":"h1","text":"Disclaimer"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The code for creating and playing demos is rather hacky. I've already been working longer on it than I intended and just wanted to get it done. Maybe at some time I'll document and refactor it a little.","note":{"type":"text","tag":"p","text":"The code for creating and playing demos is rather hacky. I've already been working longer on it than I intended and just wanted to get it done. Maybe at some time I'll document and refactor it a little."}}}]}},"isCollapsed":false,"children":[]},{"id":12,"name":"utils","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Utils","note":{"type":"text","tag":"h1","text":"Utils"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"reactTriggerChange","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/react-trigger-change?external=react')","note":{"type":"expr","code":" import('https://esm.sh/react-trigger-change?external=react')"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"findContentEditable","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function findContentEditable(node) {\n  if (!node) {\n    return null\n  }\n  else if (!node.parentElement) {\n    return node\n  }\n  else if (node.parentElement.isContentEditable) {\n    return findContentEditable(node.parentElement)\n  }\n  else {\n    return node\n  }\n}  "}}},{"id":6,"name":"findElement","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function findElement(node) {\n  if (node instanceof Element) {\n    return node\n  }\n  else {\n    return node.parentElement\n  }\n}"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":2,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"({\n  reactTriggerChange: reactTriggerChange.default,\n  findContentEditable,\n  findElement,\n  deduper,\n  renderKey,\n})"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"deduper","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Deduper","note":{"type":"text","tag":"h1","text":"Deduper"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Deduplicates an Object structure.","note":{"type":"text","tag":"p","text":"Deduplicates an Object structure."}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"deduper","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/blocks.JSExpr","note":{"type":"block","isInstantiated":true,"code":"blocks.JSExpr","state":"function sortObj(obj) {\n  return Object.fromEntries(Object.entries(obj).sort())\n}\n\nfunction dedup(input, store = [], lookup = new Map()) {\n  if (Array.isArray(input)) {\n    const output = input.map(value => dedup(value, store, lookup)[0])\n    const hash = JSON.stringify(output)\n    const existingId = lookup.get(hash)\n    if (existingId) {\n      return [{$: existingId}, store]\n    }\n    else {\n      const id = store.length\n      store.push(output)\n      lookup.set(hash, id)\n      return [{$: id}, store]\n    }\n  }\n  else if (typeof input === 'object') {\n    const output = lodash.mapValues(input, value =>\n      dedup(value, store, lookup)[0]\n    )\n    const hash = JSON.stringify(sortObj(output))\n    const existingId = lookup.get(hash)\n    if (existingId) {\n      return [{$: existingId}, store]\n    }\n    else {\n      const id = store.length\n      store.push(output)\n      lookup.set(hash, id)\n      return [{$: id}, store]\n    }\n  }\n  else if (typeof input === 'string' && input.length > 100) {\n    const hash = JSON.stringify(input)\n    const existingId = lookup.get(hash)\n    if (existingId) {\n      return [{$: existingId}, store]\n    }\n    else {\n      const id = store.length\n      store.push(input)\n      lookup.set(hash, id)\n      return [{$: id}, store]\n    }\n  }\n  else {\n    return [input, store]\n  }\n}\n\nfunction dup(input, store, memo = new Map()) {\n  if (typeof input === 'object') {\n    if (memo.has(input.$)) { return memo.get(input.$) }\n    \n    let out = store[input.$]\n    \n    if (Array.isArray(out)) {\n      out = out.map(value => dup(value, store, memo))\n    }\n    else if (typeof out === 'object') {\n      out = lodash.mapValues(out, value => dup(value, store, memo))\n    }\n    \n    memo.set(input.$, out)\n    return out\n  }\n  else {\n    return input\n  }\n}\n\nreturn { dup, dedup }"}}}]}},"isCollapsed":false,"children":[]},{"id":1,"name":"renderKey","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Render Key","note":{"type":"text","tag":"h1","text":"Render Key"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Render a key combination with symbols.","note":{"type":"text","tag":"p","text":"Render a key combination with symbols."}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":0,"name":"renderKey","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const keyMappings = {\n  ArrowUp: <FontAwesomeIcon icon={faSolid.faArrowUp} />,\n  ArrowDown: <FontAwesomeIcon icon={faSolid.faArrowDown} />,\n  ArrowLeft: <FontAwesomeIcon icon={faSolid.faArrowLeft} />,\n  ArrowRight: <FontAwesomeIcon icon={faSolid.faArrowRight} />,\n  Backspace: <FontAwesomeIcon icon={faSolid.faDeleteLeft} className=\"text-gray-600\" />,\n  \" \": \"Space\",\n  \"Enter\": \"⏎\",\n}\n\nfunction mapKey(key) {\n  return keyMappings[key] ?? key\n}\n\nfunction renderKey(comp) {\n  if (typeof comp === 'string') {\n    return comp.length > 1 ? mapKey(comp) : mapKey(comp.toUpperCase())\n  }\n  \n  const {key, ctrlKey, metaKey, shiftKey, altKey} = comp\n  return [\n    (ctrlKey || metaKey) && \"⌘\",\n    altKey && \"⌥\",\n    shiftKey && \"⇧\",\n    key.length > 1 ? mapKey(key) : mapKey(key.toUpperCase()),\n  ]\n}"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Testing Ground","note":{"type":"text","tag":"h3","text":"Testing Ground"}}},{"id":2,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function TestKey() {\n  const [key, setKey] = React.useState()\n  \n  return (\n    <div>\n      <input\n        className=\"w-full\"\n        value=\"\"\n        placeholder=\"Type a key (combination)\"\n        onKeyDown={ev => {\n          ev.stopPropagation()\n          ev.preventDefault()\n          setKey(ev)\n        }}\n        />\n      {key && <span className=\"text-5xl\">{renderKey(key)}</span>}\n    </div>\n  )\n}\n\n<TestKey />"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":10,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= renderKey","note":{"type":"expr","code":" renderKey"}}}]}},"isCollapsed":false,"children":[]}]},{"id":9,"name":"DemoViewer","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":3,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"# Demo Viewer","note":{"type":"text","tag":"h1","text":"Demo Viewer"}}},{"id":4,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"View a demo with Block `block` and the script `demo` containing the demo's steps.","note":{"type":"text","tag":"p","text":"View a demo with Block `block` and the script `demo` containing the demo's steps."}}},{"id":5,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":1,"name":"useScript","visibility":"result","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function useScript(script) {\n  async function runScript() {\n    await script({ wait, interrupt, interval })\n    setStopped('finished')\n    stopped.current = true\n    continuation.current = runScript\n  }\n  \n  const [isStopped, setStopped] = React.useState('init')\n  const stopped = React.useRef(true)\n  const continuation = React.useRef(runScript)\n  const stopper = React.useRef(() => {})\n  \n  if (isStopped === 'init') {\n    continuation.current = runScript\n  }\n  \n  function wait(sec) {\n    return new Promise(resolve => {\n      continuation.current = resolve\n      if (!stopped.current) {\n        const timeout = setTimeout(\n          () => {\n            if (!stopped.current) {\n              resolve()\n            }\n          },\n          sec * 1000,\n        )\n        stopper.current = () => {\n          clearTimeout(timeout)\n        }\n      }\n    })\n  }\n  \n  function interval(fn, ms) {\n    setTimeout(() => {\n      if (!stopped.current) {\n        fn()\n        interval(fn, ms)\n      }\n    }, ms)\n  }\n  \n  function interrupt(reason='paused') {\n    return new Promise(resolve => {\n      setStopped(reason)\n      stopped.current = true\n      continuation.current = resolve\n    })\n  }\n  \n  return {\n    stop(reason='paused') {\n      setStopped(reason)\n      if (!stopped.current) {\n        stopped.current = true\n        stopper.current()\n      }\n    },\n    \n    start() {\n      setStopped(false)\n      if (stopped.current) {\n        stopped.current = false\n        continuation.current()\n      }\n    },\n    \n    reset() {\n      setStopped('init')\n      continuation.current = runScript\n      if (!stopped.current) {\n        stopped.current = true\n        stopper.current()\n      }\n    },\n    \n    isRunning: !isStopped,\n    stopped: isStopped,\n    stoppedRef: stopped,\n  }\n}"}}},{"id":2,"name":"DemoViewer","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { safeBlock } = resheet.blocks.component\n\nconst btn = \"w-full rounded py-1 bg-blue-50 hover:bg-blue-100\"\n\nconst env = library\nconst input = [{ env }]\n\nfunction ControlButton({ onClick, icon }) {\n  return (\n    <button\n      className=\"text-5xl mx-5 text-yellow-400 hover:text-yellow-500 drop-shadow-xl\"\n      onPointerDown={ev => ev.preventDefault()} // prevent changing focus\n      onClick={onClick}\n    >\n      <FontAwesomeIcon icon={icon} />\n    </button>\n  )\n}\n\nfunction DemoViewer({ startJson, block, demo, speeds = [0.75, 1, 1.25] }) {\n  const Block = React.useMemo(() => safeBlock(block), [block])\n\n  const [init, dispatchInit] = resheet.core.block.useBlockDispatcher(Block.init, input)\n  const [state, dispatch] = resheet.core.block.useBlockDispatcher(null, input)\n  const stateRef = React.useRef(state)\n  \n  const updateInit = React.useCallback(\n    lodash.debounce(\n      state => dispatch(() => ({ state })),\n      1000,\n    ),\n    [],\n  ) \n  \n  React.useEffect(() => {\n    stateRef.current = state\n  }, [state])\n  \n  React.useEffect(() => {\n    if (startJson) {\n      dispatchInit(() => ({\n        state: Block.fromJSON(startJson, dispatchInit, env)\n      }))\n    }\n  }, [])\n  \n  React.useEffect(() => {\n    updateInit(init)\n  }, [init])\n  \n  const blockRef = React.useRef()\n  const containerRef = React.useRef()\n  \n  const blockHandle = {\n    focus(opts) {\n      blockRef.current?.focus(opts)\n    },\n    getState() {\n      return stateRef.current\n    },\n    dispatch(action) {\n      dispatch(action)\n    },\n  }\n\n  const [speed, setSpeed] = React.useState(1)\n  const speedRef = React.useRef(speed)\n  speedRef.current = speed\n  \n  const [keysUi, showKey] = useShowKeys()\n  const script = useScript(args => demo({ ...args, showKey, blockHandle, containerRef, speedRef }))\n  \n  const scale = (\n    window.innerWidth <= 768 && script.stopped !== 'edit' ?\n      0.75\n    :\n      1\n  )\n  \n  React.useEffect(() => () => script.stop('focus'), [])\n  \n  React.useEffect(() => {\n    if (!containerRef.current) { return }\n    const intersectionObserver = new IntersectionObserver(entries => {\n      if (entries[0].intersectionRatio <= 0) {\n        !script.stoppedRef.current && script.stop()\n      }\n    })\n    intersectionObserver.observe(containerRef.current)\n    return () => intersectionObserver.disconnect()\n  }, [containerRef.current])\n  \n  function restart() {\n    script.reset()\n    dispatch(() => {\n      setTimeout(script.start)\n      return { state: init }\n    })\n  }\n  \n  return (\n    <>\n      <div\n        className=\"relative w-full h-[70vh] rounded-lg border border-gray-100 bg-white shadow-lg overflow-hidden\"\n      >\n        <div\n          ref={containerRef}\n          className={`\n            w-[${100 / scale}%] h-[${100 / scale}%]\n            origin-top-left scale-[${scale}]\n            ${script.stopped !== 'edit' && 'pointer-events-none'}\n          `}\n          onFocus={ev => {\n            const mode = script.stopped === 'edit' ? '' : 'none'\n            if (['INPUT', 'TEXTAREA'].includes(ev.target.tagName)) {\n              ev.target.inputMode = mode\n            }\n            else if (ev.target.isContentEditable) {\n              const container = utils.findContentEditable(ev.target)\n              container.inputMode = mode\n            }\n          }}\n          onBlur={ev => {\n            if (!ev.currentTarget.contains(ev.relatedTarget)) {\n              script.stopped !== 'edit' && script.stop('focus')\n            }\n          }}\n          onKeyDownCapture={ev => {\n            if (ev.isTrusted && script.stopped !== 'edit') {\n              ev.stopPropagation()\n              ev.preventDefault()\n              switch (ev.key) {\n                case \" \":\n                  if (script.isRunning) {\n                    script.stop()\n                  }\n                  else {\n                    script.start()\n                  }\n                  break\n                  \n                case \"0\":\n                  script.reset()\n                  dispatch(() => ({ state: init }))\n                  break\n                  \n                case \"e\":\n                  script.stop('edit')\n                  break\n              }\n            }\n          }}\n          onKeyDown={ev => {\n            ev.stopPropagation()\n          }}\n        >\n          {state !== null &&\n            <Block.Component ref={blockRef} state={state} dispatch={dispatch} env={env} />\n          }\n        </div>\n        <div className=\"absolute top-1/4 left-1/2\">\n          {keysUi}\n        </div>\n        {state === null &&\n          <div className=\"absolute inset-0 flex items-center justify-center text-yellow-400 text-5xl\">\n            <FontAwesomeIcon spinPulse icon={faSolid.faSpinner} />\n          </div>\n        }\n        <div\n          className={`\n            ${state === null && 'hidden'}\n            ${script.stopped === 'edit' && 'hidden'}\n            absolute inset-0 bg-white/50 hover:bg-white/75\n            flex flex-col justify-center items-center\n            transition\n            ${script.isRunning && 'opacity-0 cursor-pointer'}\n          `}\n          onPointerDown={ev => ev.preventDefault()} // prevent changing focus\n          onClick={ev => ev.currentTarget === ev.target && script.isRunning && script.stop()}\n        >\n          {!script.isRunning && script.stopped !== 'error' &&\n            <>\n              <div className=\"self-stretch flex flex-row items-center\">\n                <div className=\"flex-1 text-right\">\n                  {script.stopped !== 'init' &&\n                    <button\n                      className=\"text-2xl text-yellow-300 hover:text-yellow-400 drop-shadow\"\n                      onPointerDown={ev => ev.preventDefault()} // prevent changing focus\n                      onClick={() => {\n                        script.reset()\n                        dispatch(() => ({ state: init }))\n                      }}\n                    >\n                      <FontAwesomeIcon\n                        icon={faSolid.faBackwardStep}\n                        />\n                    </button>\n                  }\n                </div>\n                \n                {script.isRunning &&\n                  <ControlButton\n                    onClick={script.stop}\n                    icon={faSolid.faPause}\n                    />\n                }\n      \n                {(script.stopped === 'focus' || script.stopped === 'finished') ?\n                  <ControlButton\n                    onClick={restart}\n                    icon={faSolid.faRotateLeft}\n                    />\n                : (script.stopped === 'paused' || script.stopped === 'init') &&\n                  <ControlButton\n                    onClick={script.start}\n                    icon={faSolid.faPlay}\n                    />\n                }\n                \n                <div className=\"flex-1\" />\n              </div>\n              {script.stopped !== 'init' &&\n                <button\n                  className=\"mt-5 text-sm text-yellow-600 border border-zinc-100 bg-zinc-50 hover:bg-yellow-500 hover:text-white rounded-md px-2\"\n                  onClick={() => {\n                    script.stop('edit')\n                  }}\n                >\n                  start editing\n                </button>\n              }\n              <div className=\"absolute bottom-2 right-2 px-2 text-sm text-zinc-500 rounded bg-zinc-50 shadow\">\n                Playback speed: {}\n                {speeds.map(desiredSpeed => (\n                  <button\n                    key={desiredSpeed}\n                    className={`\n                      border-2 rounded-md px-2 mx-1\n                      ${desiredSpeed === speed ? 'border-yellow-500' : 'border-transparent hover:border-yellow-300'}\n                    `}\n                    onClick={() => setSpeed(desiredSpeed)}\n                  >\n                    {desiredSpeed}x\n                  </button>\n                ))}\n              </div>\n            </>\n          }\n          {script.stopped === 'error' &&\n            <>\n              <FontAwesomeIcon className=\"text-5xl text-red-500\" icon={faSolid.faTriangleExclamation} />\n              <h1 className=\"text-3xl text-red-800 my-2\">\n                There was an error during the execution of the demo\n              </h1>\n              <p className=\"text-lg text-red-700\">\n                The demo's actual state differs from its intended state.\n              </p>\n              <button\n                className=\"mt-3 text-sm text-yellow-600 border border-zinc-100 bg-zinc-50 hover:bg-yellow-500 hover:text-white rounded-md px-2\"\n                onClick={restart}\n              >\n                Try restarting it\n              </button>\n              <button\n                className=\"mt-5 text-sm text-yellow-600 border border-zinc-100 bg-zinc-50 hover:bg-yellow-500 hover:text-white rounded-md px-2\"\n                onClick={() => {\n                  script.stop('edit')\n                }}\n              >\n                start editing\n              </button>\n            </>\n          }\n        </div>\n        \n      </div>\n      {script.stopped === 'edit' &&\n        <button\n          className=\"block mx-auto mt-1 text-gray-400 hover:text-gray-700\"\n          onClick={() => {\n            dispatch(() => ({ state: init }))\n            script.reset()\n          }}\n        >\n          <FontAwesomeIcon icon={faSolid.faRotateLeft} /> {}\n          Reset demo\n        </button>\n      }\n    </>\n  )\n}"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"useShowKeys","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":3,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"# useShowKeys","note":{"type":"text","tag":"h1","text":"useShowKeys"}}},{"id":4,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Creates an overlay indicating a typed key during the demo.","note":{"type":"text","tag":"p","text":"Creates an overlay indicating a typed key during the demo."}}},{"id":5,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":0,"name":"KeyUI","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { Transition } = headlessui\n\nfunction KeyUI({ id, show, comp, onFinished }) {\n    const [visible, setVisible] = React.useState(true)\n    \n    React.useEffect(() => {\n      const timeout = setTimeout(() => setVisible(false), 2000)\n      return () => clearTimeout(timeout)\n    }, [])\n\n    return (\n    <div className=\"absolute left-0 bottom-0 -translate-x-1/2\">\n      <Transition\n          show={show && visible}\n          appear={true}\n          \n          className=\"text-3xl p-3 m-1 w-max rounded-lg border bg-white shadow-xl\"\n          \n          enter=\"origin-bottom transition-[transform,opacity] duration-150 [transform-style:preserve-3d]\"\n          enterFrom=\"opacity-0 [transform:perspective(100px)_rotateX(40deg)_translateZ(0px)]\"\n          \n          leave=\"origin-bottom transition-[opacity,transform] duration-150 [transform-style:preserve-3d]\"\n          leaveTo=\"opacity-0 [transform:perspective(100px)_rotateX(20deg)_translateZ(0px)]\"\n          \n          afterLeave={onFinished}\n      >\n        {utils.renderKey(comp)}\n      </Transition>\n    </div>\n    )\n}\n"}}},{"id":1,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"useShowKeys","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function useShowKeys() {\n    const [keys, setKeys] = React.useState([])\n\n    const showKey = React.useCallback(function showKey(key) {\n        setKeys(current => [\n            {\n                id: 1 + (current[0]?.id ?? -1),\n                key,\n            },\n            ...current,\n        ])\n    }, [setKeys])\n\n    const removeKey = React.useCallback(function removeKey(id) {\n        setKeys(current => current.filter(key => key.id !== id))\n    }, [setKeys])\n\n    const ui = keys\n        .map(({ id, key }, index) => (\n            <KeyUI\n                key={id}\n                id={id}\n                show={index === 0}\n                comp={key}\n                onFinished={() => removeKey(id)}\n                />\n        ))\n        .reverse()\n\n    return [ui, showKey]\n}"}}}]}},"isCollapsed":false,"children":[]}]},{"id":10,"name":"RecordingPlayer","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":2,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"# Recording Player","note":{"type":"text","tag":"h1","text":"Recording Player"}}},{"id":3,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Play back a recording made with the Demo Recorder.","note":{"type":"text","tag":"p","text":"Play back a recording made with the Demo Recorder."}}},{"id":4,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":1,"name":"RecordingPlayer","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// recording: Action[]\n// type Action =\n//   | { type: 'key', key: string, ctrlKey?: boolean, metaKey?: boolean, altKey?: boolean, shiftKey?: boolean }\n//   | { type: 'input', input: string }\n//   | { type: 'pause', duration: number }\n//   | { type: 'script', name: string }\n\nfunction RecordingPlayer({ startJson, block, recording, reportState, checkEvery=1, speeds, scripts={} }) {\n  const reportStateRef = React.useRef(reportState)\n  reportStateRef.current\n  \n  return (\n    <DemoViewer\n      startJson={startJson}\n      block={block}\n      speeds={speeds}\n      demo={async ({ wait, interrupt, interval, blockHandle, containerRef, showKey, speed=1, speedRef }) => {\n        // Script\n                \n        await wait(0.5)\n        \n        blockHandle.focus()\n        \n        await wait(0.5)\n        \n        \n        for (let position = recording.length - 1; position >= 0; position--) {\n          const action = recording[position]\n          switch (action.type) {\n            case 'key':\n              await typeKey(lodash.omit(action, 'type'))\n              break\n            \n            case 'input':\n              await typeText(action.input)\n              break\n              \n            case 'pause':\n              await pause(action.duration)\n              break\n              \n            case 'script':\n              await scripts[action.name]({\n                wait, interrupt, blockHandle, containerRef, showKey, speedRef,\n                pause, typeKey, typeText, atCurrentSpeed, fixFocus, checkSelection, checkFocus,\n              })\n              break\n          }\n          \n          // give ReSheet a chance to react to the input and update accordingly\n          await wait(0)\n          await wait(0)\n          await wait(0)\n          \n          if (\n            position % checkEvery === 0\n            && 'stateAfter' in action\n            \n            // TODO/FIXME: This only works for DocumentOf(...) Blocks and will break otherwise\n            // I need this because the viewState of a DocumentOf Block can vary depending on the\n            // size of the screen\n            && !lodash.isEqual(\n              action.stateAfter\n                .inner.pages,\n              block.toJSON(blockHandle.getState())\n                .inner.pages,\n            )\n          ) {\n            console.error('actual and intended states differ', action.stateAfter, block.toJSON(blockHandle.getState()))\n            interrupt('error')\n          }\n          else {\n            reportStateRef.current?.(position, blockHandle.getState())\n          }\n        }\n        \n        await wait(2)\n        \n        // End of script\n        \n        \n        \n        // Helper functions\n        \n        async function checkFocus() {\n          if (!containerRef.current || !containerRef.current.contains(document.activeElement)) {\n            await interrupt('focus')\n          }\n        }\n        \n        async function checkSelection() {\n          if (!containerRef.current) { await interrupt('focus') }\n          \n          if (['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {\n            await checkFocus()\n          }\n          else {\n            const selection = window.getSelection()\n            if (selection.rangeCount === 0) { await interrupt('focus') }\n            const range = selection.getRangeAt(0)\n            if (!containerRef.current.contains(range.startContainer)) { await interrupt('focus') }\n            if (!containerRef.current.contains(range.endContainer)) { await interrupt('focus') }\n          }\n        }\n        \n        async function checkInput(text) {\n          if (['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {\n            function inputMatches() {\n              const elem = document.activeElement\n              const [start, end] = (\n                elem.selectionStart === elem.selectionEnd ?\n                  [elem.selectionStart - text.length, elem.selectionEnd]\n                :\n                  [elem.selectionStart, elem.selectionEnd]\n              )\n              const input = elem.value.slice(start, end)\n              return input === text\n            }\n            \n            while (!inputMatches()) {\n              await wait(0)\n            }\n          }\n          \n          else {\n            function inputMatches() {\n              let range = resheet.code.useEditable.getCurrentRange()\n              if (!range.collapsed) { return false }\n              \n              const container = utils.findContentEditable(range.commonAncestorContainer)\n              \n              const rangeAfter = document.createRange()\n              rangeAfter.setStart(range.endContainer, range.endOffset)\n              rangeAfter.setEndAfter(container)\n              \n              let position = resheet.code.useEditable.getPosition(container).start\n              if (rangeAfter.toString() === '' && container.textContent.endsWith('\\n')) {\n                position--\n              }\n              range = resheet.code.useEditable.makeRange(container, position - text.length, position)\n              \n              return range.toString() === text\n            }\n            \n            for (let i = 0; i < 20 && !inputMatches(); i++) {\n              await wait(0)\n            }\n            if (!inputMatches()) {\n              window.debug = {}\n              window.debug.range = window.getSelection().getRangeAt(0)\n              await interrupt('error')\n            }\n          }\n        }\n        \n        function fixFocus() {\n          if (containerRef.current && !containerRef.current.contains(document.activeElement)) {\n            blockHandle.focus()\n          }\n        }\n        \n        function atCurrentSpeed(duration) {\n          const factor = speedRef?.current ?? speed\n          return duration / factor\n        }\n                \n        async function typeText(text, end=0.2, charsPerSec=20) {\n          for (const pos in text) {\n            await checkSelection()\n            Input.text(text[pos])\n            await wait(atCurrentSpeed(1 / charsPerSec))\n            await checkInput(text[pos])\n          }\n          await wait(atCurrentSpeed(end))\n        }\n        \n        async function typeKey(opts, end=0, show=true) {\n          await checkFocus()\n          if (show) {\n            showKey(opts)\n            await wait(0.15)\n          }\n          \n          Input.key(opts)\n          setTimeout(fixFocus)\n          await wait(atCurrentSpeed(end))\n        }\n        \n        async function pause(duration) {\n          await wait(atCurrentSpeed(duration))\n        }\n\n      }}\n    />\n  )\n}"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"Input","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Input","note":{"type":"text","tag":"h1","text":"Input"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Create simulated input. For now only keyboard input.","note":{"type":"text","tag":"p","text":"Create simulated input. For now only keyboard input."}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Shortcut Input","note":{"type":"text","tag":"h2","text":"Shortcut Input"}}},{"id":3,"name":"key","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function keyInput(opts) {\n  if (typeof opts === 'string') {\n    if (opts.length === 1) {\n      opts = { key: opts, code: 'Key' + opts.toUpperCase() }\n    }\n    else {\n      opts = { key: opts, code: opts }\n    }\n  }\n  const event = new KeyboardEvent('keydown', { ...opts, bubbles: true, cancelable: true })\n  const runDefault = document.activeElement.dispatchEvent(event)\n  document.activeElement.dispatchEvent(new KeyboardEvent('keyup', { ...opts, bubbles: true, cancelable: true }))\n  \n  if (runDefault) {\n    if (['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) {\n      (opts.key in defaultInputActions) && defaultInputActions[opts.key](opts)\n    }\n    \n    const selection = window.getSelection()\n    const range = selection.rangeCount > 0 && selection.getRangeAt(0)\n    if (utils.findElement(range?.commonAncestorContainer).isContentEditable) {\n      (opts.key in defaultEditableActions) && defaultEditableActions[opts.key](opts)\n    }\n    \n    const keyComb = [\n      opts.ctrlKey || opts.metaKey ? 'C-' : '',\n      opts.altKey ? 'Alt-' : '',\n      opts.shiftKey ? 'Shift-' : '',\n      opts.key.length === 1 ? opts.key.toUpperCase() : opts.key,\n    ].join('')\n    switch (keyComb) {\n      case 'C-C':\n        defaultActions.copy()\n        break\n        \n      case 'C-X':\n        defaultActions.cut()\n        break\n        \n      case 'C-V':\n        defaultActions.paste()\n        break\n    }\n  }\n}"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Text Input","note":{"type":"text","tag":"h2","text":"Text Input"}}},{"id":4,"name":"text","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function textInput(text) {\n  if (['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {\n    const inputElement = document.activeElement\n    const caretPos = inputElement.selectionStart;\n    \n    const currentValue = inputElement.value;\n    inputElement.value = currentValue.substring(0, caretPos) + text + currentValue.substring(inputElement.selectionEnd);\n    \n    const newCaretPos = caretPos + text.length;\n    inputElement.setSelectionRange(newCaretPos, newCaretPos);\n    \n    utils.reactTriggerChange(inputElement)\n    \n    return null\n  }\n  \n  else {\n    const selection = window.getSelection();\n    if (selection.rangeCount === 0) { return }\n    let range = selection.getRangeAt(0);\n    range.deleteContents()\n    \n    const container = utils.findContentEditable(range.commonAncestorContainer)\n    const content = container.textContent\n    \n    const afterRange = document.createRange()\n    afterRange.setStart(range.endContainer, range.endOffset)\n    afterRange.setEndAfter(container)\n    \n    if (content.endsWith('\\n') && afterRange.toString() === '') {\n      // We're after the mandatory newline character at the end\n      //  => we need to get before it\n      range = resheet.code.useEditable.makeRange(container, content.length - 1)\n      afterRange.setStart(range.endContainer, range.endOffset)\n      afterRange.setEndAfter(container)\n    }\n      \n    if (afterRange.toString() === '') {\n      afterRange.insertNode(document.createTextNode('\\n'))\n    }\n    \n    const textNode = document.createTextNode(text)\n    range.insertNode(textNode);\n    \n    range.setStart(textNode, text.length);\n    range.setEnd(textNode, text.length);\n      \n    utils.findElement(range.endContainer).scrollIntoView({ block: 'nearest', behavior: 'instant' })\n\n    selection.removeAllRanges()\n    selection.addRange(range)\n  }\n}"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":6,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ({ key, text })","note":{"type":"expr","code":" ({ key, text })"}}}]}},"isCollapsed":true,"children":[{"id":3,"name":"defaultInputActions","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Default Input Actions","note":{"type":"text","tag":"h1","text":"Default Input Actions"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Simulate the default browser behavior on keyboard input.","note":{"type":"text","tag":"p","text":"Simulate the default browser behavior on keyboard input."}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"defaultInputActions","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function moveX(x) {\n  return ev => {\n    const input = document.activeElement\n    const position = (\n      Math.max(\n        0,\n        Math.min(\n          input.value.length,\n          input.selectionStart + x,\n        )\n      )\n    )\n    input.selectionStart = position\n    input.selectionEnd = position\n  }\n}\n\nreturn {\n  Backspace(ev) {\n    const input = document.activeElement\n    if (input.selectionStart !== input.selectionEnd) {\n      const start = input.selectionStart\n      input.value = (\n        input.value.slice(0, input.selectionStart)\n        + input.value.slice(input.selectionEnd)\n      )\n      utils.reactTriggerChange(input)\n      input.selectionStart = start\n      input.selectionEnd = start\n    }\n    else {\n      const start = Math.max(0, input.selectionStart - 1)\n      input.value = (\n        input.value.slice(0, start)\n        + input.value.slice(input.selectionStart)\n      )\n      utils.reactTriggerChange(input)\n      input.selectionStart = start\n      input.selectionEnd = start\n    }\n  },\n  \n  ArrowLeft: moveX(-1),\n  ArrowRight: moveX(1),\n}"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Testing Ground","note":{"type":"text","tag":"h2","text":"Testing Ground"}}},{"id":4,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div className=\"flex flex-col space-y-1 items-center\">\n  {Object.entries(defaultInputActions).map(([name, action]) =>\n    <button\n      className=\"px-3 min-w-16 py-1 text-xl rounded bg-blue-100 hover:bg-blue-200 text-blue-900\"\n      onPointerDown={ev => ev.preventDefault()}\n      onClick={() => action()}\n      onDoubleClick={ev => ev.stopPropagation()}\n    >\n      {utils.renderKey(name)}\n    </button>\n  )}\n</div>"}}},{"id":5,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <input className=\"w-full\" defaultValue=\"this is some example input\" />","note":{"type":"expr","code":" <input className=\"w-full\" defaultValue=\"this is some example input\" />"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":9,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= defaultInputActions","note":{"type":"expr","code":" defaultInputActions"}}}]}},"isCollapsed":false,"children":[]},{"id":1,"name":"defaultEditableActions","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Default Editable Actions","note":{"type":"text","tag":"h1","text":"Default Editable Actions"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Simulate the default browser behavior on keyboard input.","note":{"type":"text","tag":"p","text":"Simulate the default browser behavior on keyboard input."}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":1,"name":"defaultEditableActions","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const editable = resheet.code.useEditable\n\nfunction moveX(x) {\n  return ev => {\n    const range = editable.getCurrentRange()\n    if (!range.collapsed) {\n      // TODO: not implemented yet\n      return\n    }\n    \n    const container = utils.findContentEditable(range.commonAncestorContainer)\n    const content = container.textContent\n    const afterRange = document.createRange()\n    afterRange.setStart(range.endContainer, range.endOffset)\n    afterRange.setEndAfter(container)\n\n    // Get before the mandatory newline character at the end\n    const offset = content.endsWith('\\n') && afterRange.toString() === '' ? -1 : 0\n\n    const position = editable.getPosition(container).start\n    const newRange = editable.makeRange(container, position + offset + x)\n    editable.setCurrentRange(newRange)\n  }\n}\n\nfunction moveY(y) {\n  return ev => {\n    const range = editable.getCurrentRange()\n    if (!range.collapsed) {\n      // TODO: not implemented yet\n      return\n    }\n\n    const container = utils.findContentEditable(range.commonAncestorContainer)\n    const position = editable.getPosition(container).start\n    const pos2d = editable.posToRowCol(container.textContent, position)\n    const newPos2d = {\n      ...pos2d,\n      row: pos2d.row + y,\n    }\n    const newPosition = editable.rowColToPos(container.textContent, newPos2d)\n    const newRange = editable.makeRange(container, newPosition)\n    editable.setCurrentRange(newRange)\n  }\n}\n\nreturn {\n  Backspace(ev) {\n    const range = editable.getCurrentRange()\n    if (!range.collapsed) {\n      range.deleteContents()\n      return\n    }\n    \n    const container = utils.findContentEditable(range.commonAncestorContainer)\n    const position = editable.getPosition(container).start\n    \n    let newRange\n    if (ev.ctrlKey || ev.metaKey) {\n      const pos2d = editable.posToRowCol(container.textContent, position)\n      if (pos2d.col === 0) {\n        newRange = editable.makeRange(container, position - 1, position)\n      }\n      else {\n        const startOfLine2d = { col: 0, row: pos2d.row }\n        const startOfLine = editable.rowColToPos(container.textContent, startOfLine2d)\n        newRange = editable.makeRange(container, startOfLine, position)\n      }\n    }\n    else {\n      newRange = editable.makeRange(container, position - 1, position)\n    }\n    \n    newRange.deleteContents()\n    editable.setCurrentRange(newRange)\n  },\n  \n  ArrowUp: moveY(-1),\n  ArrowDown: moveY(1),\n  ArrowLeft: moveX(-1),\n  ArrowRight: moveX(1),\n}"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Testing Ground","note":{"type":"text","tag":"h2","text":"Testing Ground"}}},{"id":3,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div className=\"flex flex-col space-y-1 items-center\">\n  <button\n    className=\"px-3 min-w-16 py-1 text-xl rounded bg-blue-100 hover:bg-blue-200 text-blue-900\"\n    onPointerDown={ev => ev.preventDefault()}\n    onClick={() => defaultEditableActions.Backspace({ metaKey: true, key: 'Backspace' })}\n    onDoubleClick={ev => ev.stopPropagation()}\n  >\n    {utils.renderKey({ metaKey: true, key: 'Backspace' })}\n  </button>\n  {Object.entries(defaultEditableActions)\n    .map(([key, action]) =>\n      <button\n        className=\"px-3 min-w-16 py-1 text-xl rounded bg-blue-100 hover:bg-blue-200 text-blue-900\"\n        onPointerDown={ev => ev.preventDefault()}\n        onClick={() => action({})}\n        onDoubleClick={ev => ev.stopPropagation()}\n      >\n        {utils.renderKey(key)}\n      </button>\n    )\n  }\n</div>"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// some test\n// text to\n// test with"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":6,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= defaultEditableActions","note":{"type":"expr","code":" defaultEditableActions"}}}]}},"isCollapsed":false,"children":[]},{"id":2,"name":"defaultActions","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Default Actions","note":{"type":"text","tag":"h1","text":"Default Actions"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Simulate default browser behavior for some events.","note":{"type":"text","tag":"p","text":"Simulate default browser behavior for some events."}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Copy & Paste","note":{"type":"text","tag":"h2","text":"Copy & Paste"}}},{"id":2,"name":"copyPaste","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const options = {\n  clipboardData: undefined,\n  bubbles: true,\n  cancelable: true,\n}\n\nfunction copy() {\n  options.clipboardData = new DataTransfer()\n  const event = new ClipboardEvent('copy', options)\n  const runDefault = document.activeElement.dispatchEvent(event)\n  // TODO: emulate default behavior when runDefault === true\n}\n\nfunction cut() {\n  options.clipboardData = new DataTransfer()\n  const event = new ClipboardEvent('cut', options)\n  const runDefault = document.activeElement.dispatchEvent(event)\n  // TODO: emulate default behavior when runDefault === true\n}\n\nfunction paste() {\n  const event = new ClipboardEvent('paste', options)\n  const runDefault = document.activeElement.dispatchEvent(event)\n  // TODO: emulate default behavior when runDefault === true\n}\n\nreturn { copy, cut, paste }"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Testing Ground","note":{"type":"text","tag":"h3","text":"Testing Ground"}}},{"id":8,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div className=\"flex flex-col space-y-1 items-center\">\n  {Object.entries(copyPaste).map(([name, action]) =>\n    <button\n      className=\"px-3 min-w-16 py-1 text-xl rounded bg-blue-100 hover:bg-blue-200 text-blue-900\"\n      onPointerDown={ev => ev.preventDefault()}\n      onClick={() => action()}\n      onDoubleClick={ev => ev.stopPropagation()}\n    >\n      {utils.renderKey(name)}\n    </button>\n  )}\n</div>"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Test 1","note":{"type":"text","tag":"p","text":"Test 1"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Test 2","note":{"type":"text","tag":"p","text":"Test 2"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Test 3","note":{"type":"text","tag":"p","text":"Test 3"}}}]}}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":6,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...copyPaste }","note":{"type":"expr","code":" { ...copyPaste }"}}}]}},"isCollapsed":false,"children":[]}]}]},{"id":5,"name":"DemoRecorder","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":12,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"# Demo Recorder","note":{"type":"text","tag":"h1","text":"Demo Recorder"}}},{"id":13,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Record and edit a demo with keyboard input.","note":{"type":"text","tag":"p","text":"Record and edit a demo with keyboard input."}}},{"id":14,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"appendOrMergeAction","visibility":"result","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function appendOrMergeAction(action, actions) {\n  const lastAction = actions[0]\n  \n  if (action.type === 'input' && lastAction?.type === 'input') {\n    return [\n      { ...action, input: lastAction.input + action.input },\n      ...actions.slice(1),\n    ]\n  }\n  if (action.type === 'pause' && lastAction?.type === 'pause') {\n    return [\n      { ...action, duration: action.duration + lastAction.duration },\n      ...actions.slice(1),\n    ]\n  }\n  \n  return [action, ...actions]\n}"}}},{"id":10,"name":"compactActions","visibility":"result","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function compactActions(actions) {\n  return actions.reduceRight(\n    (actions, action) => appendOrMergeAction(action, actions),\n    [],\n  )\n}"}}},{"id":8,"name":"ActionsEditor","visibility":"result","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function ActionsEditor({ actions, position, setActions, loadState }) {\n  return (\n    actions.map((action, index) => (\n      <div\n        key={actions.length - index}\n        className={`\n          relative group/action-item\n          flex flex-row items-stretch\n          hover:bg-white\n        `}\n      >\n        {/* position indicator */}\n        <code className={`py-1 px-2 min-w-16 text-right ${index === position ? 'bg-green-100' : 'bg-gray-100'}`}>\n          {actions.length - index}\n        </code>\n        \n        {/* action description/editor */}\n        <div className=\"py-1 px-1 flex-1\">\n          {action.type === 'pause' ?\n            <>\n              <span className=\"italic\">-- PAUSE {action.duration}s --</span> {}\n              <button\n                className=\"text-gray-500\"\n                onClick={() => {\n                  setActions(actions => \n                    immutable.set(actions, index, { type: 'pause', duration: 0.5 })\n                  )\n                }}\n              >\n                <FontAwesomeIcon icon={faSolid.faRotateLeft} />\n              </button>\n            </>\n            \n          : action.type === 'script' ?\n            <>\n              <FontAwesomeIcon icon={faSolid.faScroll} /> {}\n              <input\n                value={action.name}\n                onChange={ev => {\n                  setActions(actions => [\n                    ...actions.slice(0, index).map(action => lodash.omit(action, 'stateAfter')),\n                    {\n                      ...lodash.omit(actions[index], 'stateAfter'),\n                      name: ev.target.value,\n                    },\n                    ...actions.slice(index + 1),\n                  ])\n                }}\n              />\n            </>\n            \n          : action.type === 'key' ?\n            <kbd className=\"px-1 rounded bg-gray-200\">{utils.renderKey(action)}</kbd>\n            \n          :\n            <textarea\n              className=\"monospace w-full bg-transparent\"\n              rows={action.input.split('\\n').length}\n              value={action.input}\n              onChange={ev => {\n                setActions(actions => [\n                  ...actions.slice(0, index).map(action => lodash.omit(action, 'stateAfter')),\n                  {\n                    ...lodash.omit(actions[index], 'stateAfter'),\n                    input: ev.target.value,\n                  },\n                  ...actions.slice(index + 1),\n                ])\n              }}\n              />\n          }\n        </div>\n        \n        {/* delete button */}\n        <button\n          className=\"invisible group-hover/action-item:visible self-center mx-2 text-sm text-red-700 hover:text-red-500 py-1 px-2 rounded-full bg-red-100\"\n          onClick={() => {\n            setActions(actions => compactActions([\n              ...actions.slice(0, index).map(action => lodash.omit(action, 'stateAfter')),\n              ...actions.slice(index + 1),\n            ]))\n          }}\n          onDoubleClick={ev => ev.stopPropagation()}\n        >\n          <FontAwesomeIcon icon={faSolid.faTrash} />\n        </button>\n        \n        {/* saved state indicator */}\n        {'stateAfter' in action &&\n          <FontAwesomeIcon className=\"self-center mx-2 text-gray-400\" icon={faRegular.faFloppyDisk} />\n        }\n        \n        {/* hover actions */}\n        <div\n          className={`\n            absolute bottom-0 left-1/2 translate-y-1/2 -translate-x-1/2 z-10\n            ${index === position ? 'flex' : 'hidden group-hover/action-item:flex hover:flex'}\n            flex-row justify-center space-x-3 px-5\n          `}\n        >\n          {/* current position indicator */}\n          {position === index &&\n            <div\n              className={`\n                rounded-full px-2 py-1\n                text-sm space-x-1\n                bg-gray-200 text-gray-700\n              `}\n            >\n              <FontAwesomeIcon icon={faSolid.faPlay} />\n            </div>\n          }\n          \n          {/* jump to position button */}\n          {'stateAfter' in action && position !== index &&\n            <button\n              className={`\n                rounded-full px-2 py-1\n                text-sm space-x-1\n                bg-gray-200 text-gray-700\n                hover:bg-blue-100 hover:text-blue-700\n              `}\n              onClick={() => {\n                loadState(index, action.stateAfter)\n              }}\n              onDoubleClick={ev => ev.stopPropagation()}\n            >\n              <FontAwesomeIcon\n                icon={\n                  index > position ?\n                    faSolid.faBackward\n                  :\n                    faSolid.faForward\n                }\n                />\n            </button>\n          }\n          \n          {/* insert script button */}\n          <button\n            className={`\n              rounded-full px-2 py-1\n              text-sm space-x-1\n              bg-gray-200 text-gray-700\n              hover:bg-blue-100 hover:text-blue-700\n            `}\n            onClick={() =>\n              setActions(actions =>\n                compactActions(\n                  actions.toSpliced(index, 0, { type: 'script', name: 'script' })\n                )\n              )\n            }\n            onDoubleClick={ev => ev.stopPropagation()}\n          >\n            <FontAwesomeIcon icon={faSolid.faPlus} />\n            <FontAwesomeIcon icon={faSolid.faScroll} />\n          </button>\n          \n          {/* insert pause button */}\n          <button\n            className={`\n              rounded-full px-2 py-1\n              text-sm space-x-1\n              bg-gray-200 text-gray-700\n              hover:bg-blue-100 hover:text-blue-700\n            `}\n            onClick={() =>\n              setActions(actions =>\n                compactActions(\n                  actions.toSpliced(index, 0, { type: 'pause', duration: 0.5 })\n                )\n              )\n            }\n            onDoubleClick={ev => ev.stopPropagation()}\n          >\n            <FontAwesomeIcon icon={faSolid.faPlus} />\n            <FontAwesomeIcon icon={faSolid.faPause} />\n          </button>\n        </div>\n      </div>\n    )).toReversed()\n  )\n}"}}},{"id":11,"name":"actionFromKeyEvent","visibility":"result","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function actionFromKeyEvent(ev) {\n  if ((ev.ctrlKey || ev.metaKey) && ev.shiftKey && ev.key === 'Escape') {\n    return { type: 'script', name: 'script' }\n  }\n  else if ((ev.ctrlKey || ev.metaKey) && ev.key === 'Escape') {\n    return { type: 'pause', duration: 0.5 }\n  }\n  else if (ev.key === 'Enter' && ev.target !== document.activeElement) {\n    return { type: 'key', ...lodash.pick(ev, 'key code ctrlKey metaKey shiftKey altKey'.split(' ')) }\n  }\n  else if (ev.ctrlKey || ev.metaKey || (ev.key.length > 1 && ev.key !== 'Enter')) {\n    return { type: 'key', ...lodash.pick(ev, 'key code ctrlKey metaKey shiftKey altKey'.split(' ')) }\n  } \n  else if (!ev.nativeEvent.defaultPrevented && ev.target.isContentEditable || ev.target instanceof HTMLInputElement) {\n    switch (ev.key) {\n      case 'Enter': return { type: 'input', input: '\\n' }\n      default: return { type: 'input', input: ev.key }\n    }\n  }\n  else {\n    return { type: 'key', ...lodash.pick(ev, 'key code ctrlKey metaKey shiftKey altKey'.split(' ')) }\n  }\n}"}}},{"id":0,"name":"DemoRecorder","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { LoadFileButton, saveFile } = resheet.blocks.utils.ui\n\nconst modifiers = 'Shift,Meta,Control,Alt'.split(',').flatMap(mod => [mod, mod + 'L', mod + 'R'])\n\nconst env = library\nconst input = [{ env }]\n\nfunction DemoRecorder(block, startJson, scripts={}) {\n  const innerBlock = resheet.blocks.component.safeBlock(block)\n  \n  return resheet.core.block.create({\n    init: { actions: [], position: 0 },\n    \n    view({ state, dispatch }, ref) {\n      const actionsViewRef = React.useRef()\n      \n      const [stateInner, dispatchInner] = resheet.core.block.useBlockDispatcher(innerBlock.init, input)\n\n      const stateRef = React.useRef(state)\n      stateRef.current = stateInner\n\n      const openState = React.useCallback(\n        lodash.debounce(\n          state => {\n            dispatchInner(() => ({ state }))\n          },\n          2000,\n        ),\n        [],\n      )\n      \n      React.useEffect(() => {\n        if (startJson) {\n          dispatchInner(() => ({\n            state: innerBlock.fromJSON(startJson, dispatchInner, env)\n          }))\n        }\n      }, [])\n      \n      function focusStep(position, options) {\n        if (!actionsViewRef.current) { return }\n        \n        dispatch(state => {\n          const itemPosition = state.actions.length - position - 1\n          const item = actionsViewRef.current.children[itemPosition]\n          item?.scrollIntoView(options ?? { behavior: 'smooth', block: 'nearest' })\n          \n          return { state }\n        })\n      }\n      \n      function insertAction(action) {\n        dispatch(state => {\n          const newAction = {\n            ...action,\n            stateAfter: innerBlock.toJSON(stateRef.current),\n          }\n          const newActions = [\n            ...state.actions.slice(0, state.position).map(action => lodash.omit(action, 'stateAfter')),\n            newAction,\n            ...state.actions.slice(state.position),\n          ]\n\n          return {\n            state: {\n              ...state,\n              actions: compactActions(newActions),\n            }\n          }\n        })\n        setTimeout(() => {\n          focusStep(state.position)\n        })\n      }\n      \n      function reportState(position, stateAfter) {\n        dispatch(state => ({\n          state: {\n            ...state,\n            position,\n            actions: immutable.update(\n              state.actions,\n              position,\n              action => ({\n                ...action,\n                stateAfter: innerBlock.toJSON(stateAfter),\n              }),\n            ),\n          },\n        }))\n        openState(stateAfter)\n        focusStep(position, { behavior: 'instant', block: 'nearest' })\n      }\n      \n      function loadState(position, json) {\n        dispatch(state => ({\n          state: {\n            ...state,\n            position,\n          },\n        }))\n        dispatchInner(() => ({\n          state: innerBlock.fromJSON(json, dispatchInner, env),\n        }))\n      }\n      \n      function onKeyDown(ev) {\n        if (modifiers.includes(ev.key)) { return }\n        \n        // 4 setTimeouts so an input can be handled, ui updated, focus changed and\n        // seemingly something more, before we check if the focus changed\n        setTimeout(() => setTimeout(() => setTimeout(() => setTimeout(() => {\n          insertAction(actionFromKeyEvent(ev))\n        }))))\n      }\n      \n      return (\n        <>\n          <div\n            tabIndex={-1}\n            onKeyDownCapture={onKeyDown}\n            className=\"h-[70vh]\"\n          >\n            <innerBlock.Component ref={ref} state={stateInner} dispatch={dispatchInner} env={env} />\n          </div>\n          <div className=\"flex flex-row justify-stretch space-x-1\">\n            <button\n              className=\"w-full py-1 bg-blue-100 hover:bg-blue-200 rounded text-blue-900\"\n              onClick={() =>\n                dispatch(state => ({\n                  state: {\n                    ...state,\n                    inner: innerBlock.init,\n                    position: state.actions.length,\n                  }\n                }))\n              }\n            >\n              Jump start\n            </button>\n            <button\n              className=\"w-full py-1 bg-blue-100 hover:bg-blue-200 rounded text-blue-900\"\n              onClick={() =>\n                dispatch(state => ({\n                  state: {\n                    ...state,\n                    actions: state.actions.map(action => lodash.omit(action, 'stateAfter')),\n                  }\n                }))\n              }\n            >\n              Clear Checkpoints\n            </button>\n            <button\n              className=\"w-full py-1 bg-red-100 hover:bg-red-200 rounded text-red-900\"\n              onClick={() =>\n                dispatch(state => ({\n                  state: {\n                    ...state,\n                    actions: [],\n                    position: 0,\n                  }\n                }))\n              }\n            >\n              Delete all Actions\n            </button>\n            <button\n              className=\"w-full py-1 bg-blue-100 hover:bg-blue-200 rounded text-blue-900\"\n              onClick={() => {\n                const json = JSON.stringify(utils.deduper.dedup(state.actions))\n                saveFile('recording.json', new Blob([json], { type: 'application/json' }))\n              }}\n            >\n              Export Recording\n            </button>\n            <LoadFileButton\n              className=\"w-full py-1 bg-blue-100 hover:bg-blue-200 rounded text-blue-900\"\n              onLoad={async file => {\n                const json = JSON.parse(await file.text())\n                const actions = utils.deduper.dup(...json)\n                dispatch(() => ({\n                  state: {\n                    actions,\n                    position: actions.length,\n                  }\n                }))\n              }}\n            >\n              Import Recording\n            </LoadFileButton>\n\n          </div>\n          <div ref={actionsViewRef} className=\"h-[20vh] pb-5 overflow-y-auto border-t-2 border-b-2 bg-gray-50 divide-y divide-gray-100\">\n            <ActionsEditor\n              actions={state.actions}\n              position={state.position}\n              setActions={update =>\n                dispatch(state => ({\n                  state: {\n                    ...state,\n                    actions: update(state.actions),\n                  },\n                }))\n              }\n              loadState={loadState}\n              />\n          </div>\n          <RecordingPlayer\n            startJson={startJson}\n            speeds={[0.5, 0.75, 1, 1.25, 1.5, 2, 3, 4, 5]}\n            block={block}\n            recording={state.actions}\n            reportState={reportState}\n            scripts={scripts}\n            />\n        </>\n      )\n    },\n    \n    getResult(state) {\n      return <RecordingPlayer startJson={startJson} block={block} recording={state.actions} checkEvery={5} scripts={scripts} />\n    },\n    \n    recompute(state) {\n      return {\n        state,\n        invalidated: false,\n      }\n    },\n    \n    fromJSON(json) {\n      const actions = Array.isArray(json) ? utils.deduper.dedup(...json) : json.actions\n      return {\n        actions: actions,\n        position: actions.length,\n      }\n    },\n    \n    toJSON(state) {\n      return {\n        actions: state.actions.map(action => lodash.omit(action, 'stateAfter'))\n      }\n    },\n  })\n}\n"}}}]}},"isCollapsed":false,"children":[]},{"id":11,"name":"RecordingLoader","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Recording Loader","note":{"type":"text","tag":"h1","text":"Recording Loader"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Load a recording and play it back.","note":{"type":"text","tag":"p","text":"Load a recording and play it back."}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function RecordingLoader({ loadRecording, ...recordingProps }) {\n  const [recording, setRecording] = React.useState(null)\n  \n  function load() {\n    setRecording(null)\n    loadRecording().then(setRecording).catch(setRecording)\n  }\n  \n  React.useEffect(() => {\n    load()\n  }, [loadRecording])\n  \n  if (recording === null) {\n    return (\n      <div className={`\n        w-full h-[70vh]\n        rounded-lg border border-gray-100\n        bg-white shadow-lg overflow-hidden\n        flex items-center justify-center\n      `}>\n        <FontAwesomeIcon\n          className=\"text-yellow-400 text-5xl\"\n          spinPulse\n          icon={faSolid.faSpinner}\n          />\n      </div>\n    )\n  }\n  if (recording instanceof Error) {\n    return (\n      <div className={`\n        w-full h-[70vh]\n        rounded-lg border border-gray-100\n        bg-white shadow-lg overflow-hidden\n        flex flex-col items-center justify-center space-y-4\n      `}>\n        <FontAwesomeIcon className=\"text-red-500 text-5xl\" icon={faSolid.faTriangleExclamation} />\n        <div className=\"text-lg text-red-900\">\n          Could not load recording\n        </div>\n        <button className=\"text-red-950\" onClick={load}>\n          <FontAwesomeIcon icon={faSolid.faRotateLeft} /> {}\n          Retry\n        </button>\n        <resheet.code.ui.ErrorView\n          title=\"Could not load recording\"\n          error={recording}\n          />\n      </div>\n    )\n  }\n  \n  \n  return <RecordingPlayer recording={recording} {...recordingProps} />\n}"}}}]}},"isCollapsed":false,"children":[]}]}]},{"id":2,"name":"Getting Started","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Getting Started","note":{"type":"text","tag":"h1","text":"Getting Started"}}},{"id":86,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":87,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"ReSheet is a notepad similar to Notion. Format your notes with Markdown:","note":{"type":"text","tag":"p","text":"ReSheet is a notepad similar to Notion. Format your notes with Markdown:"}}},{"id":102,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Example**","note":{"type":"text","tag":"p","text":"**Example**"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Formatting your text `monospace`, *italic* and **bold**","note":{"type":"text","tag":"p","text":"Formatting your text `monospace`, *italic* and **bold**"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[ ] A todo item","note":{"type":"checkbox","checked":false,"text":"A todo item"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"- A list item","note":{"type":"text","tag":"li","text":"A list item"}}}]}}}},{"id":101,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":108,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":109,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Formulas","note":{"type":"text","tag":"h4","text":"Formulas"}}},{"id":104,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"In every line you can choose to write a formula in JavaScript. Just start with a \"`=`\" like in a spreadsheet:","note":{"type":"text","tag":"p","text":"In every line you can choose to write a formula in JavaScript. Just start with a \"`=`\" like in a spreadsheet:"}}},{"id":105,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Example**","note":{"type":"text","tag":"p","text":"**Example**"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 12 * 12","note":{"type":"expr","code":" 12 * 12"}}},{"id":2,"name":"string","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"this string has a name\"","note":{"type":"expr","code":" \"this string has a name\""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= string.repeat(3)","note":{"type":"expr","code":" string.repeat(3)"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"normally you can edit the names to the left\"","note":{"type":"expr","code":" \"normally you can edit the names to the left\""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"but when space is tight names move to the top and ...\"","note":{"type":"expr","code":" \"but when space is tight names move to the top and ...\""}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"... to edit a line's name you have to press ⌘⇧R\"","note":{"type":"expr","code":" \"... to edit a line's name you have to press ⌘⇧R\""}}}]}}}},{"id":103,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":106,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"You can use React and tailwind.css to create custom UIs:","note":{"type":"text","tag":"p","text":"You can use React and tailwind.css to create custom UIs:"}}},{"id":107,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Example**","note":{"type":"text","tag":"p","text":"**Example**"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <button className=\"rounded px-2 bg-blue-500 text-white\" onClick={() => alert(\"Hello\")}>Hello ReSheet</button>","note":{"type":"expr","code":" <button className=\"rounded px-2 bg-blue-500 text-white\" onClick={() => alert(\"Hello\")}>Hello ReSheet</button>"}}}]}}}},{"id":110,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":111,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":112,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Blocks","note":{"type":"text","tag":"h4","text":"Blocks"}}},{"id":99,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Every line here is a Block. A Block can be thought of like a cell in a spreadsheet.","note":{"type":"text","tag":"p","text":"Every line here is a Block. A Block can be thought of like a cell in a spreadsheet."}}},{"id":118,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"In this case the lines are `Note` Blocks, which implement the Markdown and Formula (and Block nesting) functionality.","note":{"type":"text","tag":"p","text":"In this case the lines are `Note` Blocks, which implement the Markdown and Formula (and Block nesting) functionality."}}},{"id":114,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"There are other types of Blocks you can use; to use one type `/<BlockName>` and hit **⌘Enter**:","note":{"type":"text","tag":"p","text":"There are other types of Blocks you can use; to use one type `/<BlockName>` and hit **⌘Enter**:"}}},{"id":113,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Example**","note":{"type":"text","tag":"p","text":"**Example**"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Note`","note":{"type":"text","tag":"p","text":"`/Note`"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Note","note":{"type":"block","isInstantiated":true,"code":"Note","state":{"t":"resheet.note","v":1,"level":0,"input":"This is the `Note` Block we already know","note":{"type":"text","tag":"p","text":"This is the `Note` Block we already know"}}}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/LoadFile`","note":{"type":"text","tag":"p","text":"`/LoadFile`"}}},{"id":4,"name":"tasksFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"WwogIHsgInRhc2siOiAiQ2xlYW51cCIsICJkdXJhdGlvbiI6IDQsICAgImJyZWFrIjogMSB9LAogIHsgInRhc2siOiAiQ2xlYW51cCIsICJkdXJhdGlvbiI6IDUuNSwgImJyZWFrIjogMC4zIH0sCiAgeyAidGFzayI6ICJGZWF0dXJlIiwgImR1cmF0aW9uIjogOC4zLCAiYnJlYWsiOiAxLjUgfSwKICB7ICJ0YXNrIjogIkZlYXR1cmUiLCAiZHVyYXRpb24iOiAzLjUsICJicmVhayI6IDAgfQpdCg==","name":"tasks.json","options":{"type":"application/json","lastModified":1715249897272}}}}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"tasks","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= JSON.parse(await tasksFile.text())","note":{"type":"expr","code":" JSON.parse(await tasksFile.text())"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Code`","note":{"type":"text","tag":"p","text":"`/Code`"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// This is a Code Block, useful for multiline scripts:\nlodash(tasks)\n  .groupBy('task')\n  .mapValues(task => lodash.sumBy(task, 'duration'))\n  .value()"}}}]}}}},{"id":100,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":124,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"###### Advanced Block Usage","note":{"type":"text","tag":"h6","text":"Advanced Block Usage"}}},{"id":125,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Blocks are very powerful. They can be combined and nested. You can even write your own custom Blocks within ReSheet. See the pages \"Getting Started > Blocks\" and \"Examples > Custom Blocks\" for more details. \"Examples > Interactive Game Dev\" may give a glimpse of the possibilities of custom Blocks.","note":{"type":"text","tag":"p","text":"Blocks are very powerful. They can be combined and nested. You can even write your own custom Blocks within ReSheet. See the pages \"Getting Started > Blocks\" and \"Examples > Custom Blocks\" for more details. \"Examples > Interactive Game Dev\" may give a glimpse of the possibilities of custom Blocks."}}},{"id":115,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":121,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":116,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Interaction","note":{"type":"text","tag":"h4","text":"Interaction"}}},{"id":85,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"ReSheet is heavily keyboard-focused:","note":{"type":"text","tag":"p","text":"ReSheet is heavily keyboard-focused:"}}},{"id":120,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"- Use **⌘K/⌘⇧P** to search all commands for the currently focused block(s) and their parents.","note":{"type":"text","tag":"li","text":"Use **⌘K/⌘⇧P** to search all commands for the currently focused block(s) and their parents."}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"-  Use **⌘?** to display all currently available shortcuts","note":{"type":"text","tag":"li","text":"Use **⌘?** to display all currently available shortcuts"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"- Use the **ArrowKeys** or **`H`/`J`/`K`/`L`** and **`Enter`/`Escape`** to move between Blocks.","note":{"type":"text","tag":"li","text":"Use the **ArrowKeys** or **`H`/`J`/`K`/`L`** and **`Enter`/`Escape`** to move between Blocks."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"*⌘ = Meta = Ctrl (can be used interchangeably, useful if the browser intercepts a variant)*","note":{"type":"text","tag":"p","text":"*⌘ = Meta = Ctrl (can be used interchangeably, useful if the browser intercepts a variant)*"}}}]}}}}]}},"isCollapsed":false,"children":[{"id":1,"name":"Formulas","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Formulas","note":{"type":"text","tag":"h1","text":"Formulas"}}},{"id":1,"name":"msInADay","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 24 /*h*/ * 60 /*min*/ * 60 /*sec*/ * 1000 /*ms*/","note":{"type":"expr","code":" 24 /*h*/ * 60 /*min*/ * 60 /*sec*/ * 1000 /*ms*/"}}},{"id":2,"name":"startOfThisYear","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= new Date(new Date().getFullYear(), 0, 1)","note":{"type":"expr","code":" new Date(new Date().getFullYear(), 0, 1)"}}},{"id":3,"name":"daysInThisYear","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= (Date.now() - startOfThisYear.getTime()) / msInADay","note":{"type":"expr","code":" (Date.now() - startOfThisYear.getTime()) / msInADay"}}},{"id":4,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= // using react:\n<p className=\"py-2\">\n  This year is already {/* preserve the space character before this comment */}\n  {daysInThisYear.toLocaleString(\"en-US\", { maximumFractionDigits: 1 })}\n  {} days long. {}\n  <span className=\"text-sm text-gray-700\">(Double-click on this line to show or hide the code)</span>\n</p>","note":{"type":"expr","code":" // using react:\n<p className=\"py-2\">\n  This year is already {/* preserve the space character before this comment */}\n  {daysInThisYear.toLocaleString(\"en-US\", { maximumFractionDigits: 1 })}\n  {} days long. {}\n  <span className=\"text-sm text-gray-700\">(Double-click on this line to show or hide the code)</span>\n</p>"}}},{"id":30,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Important**","note":{"type":"text","tag":"p","text":"**Important**"}}},{"id":32,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Don't mutate values of other cells. ReSheet is designed to be used like a functional language.","note":{"type":"text","tag":"p","text":"Don't mutate values of other cells. ReSheet is designed to be used like a functional language."}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"*Side note:* This is just like any other Spreadsheet works. You can't write formulas that change another cell's value. Cells only change because the values of other cells they depend on change.","note":{"type":"text","tag":"p","text":"*Side note:* This is just like any other Spreadsheet works. You can't write formulas that change another cell's value. Cells only change because the values of other cells they depend on change."}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## External Libraries","note":{"type":"text","tag":"h2","text":"External Libraries"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"[esm.sh](https://esm.sh/) works great for loading npm libraries","note":{"type":"text","tag":"p","text":"[esm.sh](https://esm.sh/) works great for loading npm libraries"}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Number Formatting","note":{"type":"text","tag":"h3","text":"Number Formatting"}}},{"id":7,"name":"numeral","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/numeral')","note":{"type":"expr","code":" import('https://esm.sh/numeral')"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= numeral.default(123456.789).format('0,0.00')","note":{"type":"expr","code":" numeral.default(123456.789).format('0,0.00')"}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### CSV Parsing","note":{"type":"text","tag":"h3","text":"CSV Parsing"}}},{"id":11,"name":"Papa","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/papaparse')","note":{"type":"expr","code":" import('https://esm.sh/papaparse')"}}},{"id":12,"name":"csv","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"id,name,age,plan,email\n0,John,28,free,john@example.com\n1,Alice,34,premium,alice@boo\n2,Bob,43,premium,bob@b.b","note":{"type":"text","tag":"p","text":"id,name,age,plan,email\n0,John,28,free,john@example.com\n1,Alice,34,premium,alice@boo\n2,Bob,43,premium,bob@b.b"}}},{"id":13,"name":"data","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= Papa.default.parse(csv.text, { header: true }).data","note":{"type":"expr","code":" Papa.default.parse(csv.text, { header: true }).data"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Data Validation","note":{"type":"text","tag":"h3","text":"Data Validation"}}},{"id":16,"name":"validator","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/validator')","note":{"type":"expr","code":" import('https://esm.sh/validator')"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= data.map(user => ({ ...user, validEmail: validator.default.isEmail(user.email) }))","note":{"type":"expr","code":" data.map(user => ({ ...user, validEmail: validator.default.isEmail(user.email) }))"}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Data Processing","note":{"type":"text","tag":"h3","text":"Data Processing"}}},{"id":19,"name":"lodash","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/lodash')","note":{"type":"expr","code":" import('https://esm.sh/lodash')"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.default.groupBy(data, 'plan')","note":{"type":"expr","code":" lodash.default.groupBy(data, 'plan')"}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Dates","note":{"type":"text","tag":"h3","text":"Dates"}}},{"id":22,"name":"datefns","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/date-fns')","note":{"type":"expr","code":" import('https://esm.sh/date-fns')"}}},{"id":23,"name":"startOfThisyear","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= datefns.startOfYear(new Date())","note":{"type":"expr","code":" datefns.startOfYear(new Date())"}}},{"id":28,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= datefns.differenceInDays(new Date(), startOfThisYear)","note":{"type":"expr","code":" datefns.differenceInDays(new Date(), startOfThisYear)"}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= datefns.getDayOfYear(new Date())","note":{"type":"expr","code":" datefns.getDayOfYear(new Date())"}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Charts","note":{"type":"text","tag":"h3","text":"Charts"}}},{"id":25,"name":"recharts","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/recharts?external=react')","note":{"type":"expr","code":" import('https://esm.sh/recharts?external=react')"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis } = recharts;\n\n<ResponsiveContainer height={400}>\n  <BarChart data={data}>\n    <Bar type=\"monotone\" dataKey=\"age\" fill=\"#8884d8\" />\n    <XAxis dataKey=\"name\"/>\n    <YAxis/>\n  </BarChart>\n</ResponsiveContainer>"}}}]}},"isCollapsed":true,"children":[]},{"id":3,"name":"Blocks","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Blocks","note":{"type":"text","tag":"h1","text":"Blocks"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Blocks are the equivalent to cells in a spreadsheet. Most things in ReSheet are Blocks.","note":{"type":"text","tag":"p","text":"Blocks are the equivalent to cells in a spreadsheet. Most things in ReSheet are Blocks."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Every line here contains a `Note` Block, which allows writing Markdown or Formulas (e.g. \"`= 1 + 1`\").","note":{"type":"text","tag":"p","text":"Every line here contains a `Note` Block, which allows writing Markdown or Formulas (e.g. \"`= 1 + 1`\")."}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"A `Note` Block also allows using another Block, for example `Code`. Type in an empty line:","note":{"type":"text","tag":"p","text":"A `Note` Block also allows using another Block, for example `Code`. Type in an empty line:"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Code`","note":{"type":"text","tag":"p","text":"`/Code`"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"and after hitting ⌘`Enter` you get:","note":{"type":"text","tag":"p","text":"and after hitting ⌘`Enter` you get:"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// This is a Code Block now\nfunction Mark({ children }) {\n  return (\n    <span className=\"before:block before:absolute before:-inset-0.5 before:-skew-y-2 before:bg-blue-400 relative inline-block\">\n      <span className=\"relative text-white px-0.5 tracking-wide\">\n        {children}\n      </span>\n    </span>\n  )\n}\n\n<p className=\"py-1\">\n  <Mark>Look</Mark> at it!\n</p>"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"All lines here are part of the `SheetOf` Block:","note":{"type":"text","tag":"p","text":"All lines here are part of the `SheetOf` Block:"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/SheetOf(Note)`","note":{"type":"text","tag":"p","text":"`/SheetOf(Note)`"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SheetOf(Note)","note":{"type":"block","isInstantiated":true,"code":"SheetOf(Note)","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Now we have a Sheet inside of a Sheet","note":{"type":"text","tag":"p","text":"Now we have a Sheet inside of a Sheet"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= $9.text","note":{"type":"expr","code":" $9.text"}}}]}}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"There are other Blocks available in `blocks`. (Use completion/docs with ⌘`Space`/⌘`D`)","note":{"type":"text","tag":"p","text":"There are other Blocks available in `blocks`. (Use completion/docs with ⌘`Space`/⌘`D`)"}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= blocks","note":{"type":"expr","code":" blocks"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Custom Blocks","note":{"type":"text","tag":"h2","text":"Custom Blocks"}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"You can build your own blocks. In Examples > \"Custom Blocks\" you can see more elaborate examples. For now you either have to shoot me a message or look at the source code of the existing Blocks to find out more.","note":{"type":"text","tag":"p","text":"You can build your own blocks. In Examples > \"Custom Blocks\" you can see more elaborate examples. For now you either have to shoot me a message or look at the source code of the existing Blocks to find out more."}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Ok, I'll give you a small example:","note":{"type":"text","tag":"p","text":"Ok, I'll give you a small example:"}}},{"id":21,"name":"RAW","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"resheet.core.block.create({\n  init: \"\",\n  view({ state, dispatch, env }, ref) {\n    return (\n      <textarea\n        ref={ref}\n        value={state}\n        onChange={ev => dispatch(stateBefore => ({ state: ev.target.value }))}\n        rows={state.split('\\n').length}\n        />\n    )\n  },\n  recompute(state, update, env) {\n    return { state, invalidated: false }\n  },\n  getResult(state) {\n    return state\n  },\n  fromJSON(json) {\n    return typeof json === 'string' ? json : ''\n  },\n  toJSON(state) {\n    return state\n  },\n})"}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/RAW`","note":{"type":"text","tag":"p","text":"`/RAW`"}}},{"id":23,"name":"rawText","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/RAW","note":{"type":"block","isInstantiated":true,"code":"RAW","state":"{\n  \"hello\": \"world\"\n}"}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= JSON.parse(rawText)","note":{"type":"expr","code":" JSON.parse(rawText)"}}}]}},"isCollapsed":true,"children":[]},{"id":0,"name":"Notes","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Notes","note":{"type":"text","tag":"h1","text":"Notes"}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Your Responsibility","note":{"type":"text","tag":"h4","text":"Your Responsibility"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"ReSheet gives you the full power of JavaScript and React.","note":{"type":"text","tag":"p","text":"ReSheet gives you the full power of JavaScript and React."}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Be aware:** You have the **power to break it** (but generally you can undo it – ⌘Z) and full responsibilty to **ensure you trust the code you run**.","note":{"type":"text","tag":"p","text":"**Be aware:** You have the **power to break it** (but generally you can undo it – ⌘Z) and full responsibilty to **ensure you trust the code you run**."}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Also beware of side-effects in your code: Everything is automatically rerun as needed (for changes), so side-effects may execute for every character you type.","note":{"type":"text","tag":"p","text":"Also beware of side-effects in your code: Everything is automatically rerun as needed (for changes), so side-effects may execute for every character you type."}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Privacy and Data","note":{"type":"text","tag":"h4","text":"Privacy and Data"}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"ReSheet operates local-only. Your documents reside 100% on your devices. They are not stored or sent anywhere on/to a server. All computations happen locally in your browser.","note":{"type":"text","tag":"p","text":"ReSheet operates local-only. Your documents reside 100% on your devices. They are not stored or sent anywhere on/to a server. All computations happen locally in your browser."}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Your documents are automatically backed up to IndexedDB, so you don't lose them because of accidentally reloading or closing ReSheet. The backups get deleted after 7 days since last opening them. To persist your documents use the \"Save File\" and \"Load local File ...\" actions in the File menu.","note":{"type":"text","tag":"p","text":"Your documents are automatically backed up to IndexedDB, so you don't lose them because of accidentally reloading or closing ReSheet. The backups get deleted after 7 days since last opening them. To persist your documents use the \"Save File\" and \"Load local File ...\" actions in the File menu."}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"ReSheet collects some very basic analytics like visitor count, visit time, browser type and OS without any personally identifiable information with [umami.is](https://umami.is).","note":{"type":"text","tag":"p","text":"ReSheet collects some very basic analytics like visitor count, visit time, browser type and OS without any personally identifiable information with [umami.is](https://umami.is)."}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Shortcuts","note":{"type":"text","tag":"h4","text":"Shortcuts"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"If a shortcut triggers a browser action, try an alternative key combination by switching ⌘/Meta/Ctrl.","note":{"type":"text","tag":"p","text":"If a shortcut triggers a browser action, try an alternative key combination by switching ⌘/Meta/Ctrl."}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"For example:","note":{"type":"text","tag":"p","text":"For example:"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"⌘N = Meta-N = Ctrl-N","note":{"type":"text","tag":"p","text":"⌘N = Meta-N = Ctrl-N"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"⌘⇧P = Meta-Shift-P = Ctrl-Shift-P","note":{"type":"text","tag":"p","text":"⌘⇧P = Meta-Shift-P = Ctrl-Shift-P"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"etc","note":{"type":"text","tag":"p","text":"etc"}}}]}},"isCollapsed":true,"children":[]}]},{"id":1,"name":"Examples","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Examples","note":{"type":"text","tag":"h1","text":"Examples"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The following examples reside in subpages. You find them in the sidebar on the left inside \"Examples\".","note":{"type":"text","tag":"p","text":"The following examples reside in subpages. You find them in the sidebar on the left inside \"Examples\"."}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"All example content (text, design and code) is licensed under [CC0](https://creativecommons.org/public-domain/cc0/) (public domain). Use and adapt it to your needs however you want. 🙂","note":{"type":"text","tag":"p","text":"All example content (text, design and code) is licensed under [CC0](https://creativecommons.org/public-domain/cc0/) (public domain). Use and adapt it to your needs however you want. 🙂"}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"----","note":{"type":"text","tag":"p","text":"----"}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Personal Finances","note":{"type":"text","tag":"h2","text":"Personal Finances"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Load and parse a CSV file, process and display the data in a chart.","note":{"type":"text","tag":"p","text":"Load and parse a CSV file, process and display the data in a chart."}}},{"id":8,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div className=\"m-4 p-3 rounded border bg-gray-50\">\n  <h2 className=\"font-medium text-xl border-b\">\n    Personal Finances Preview\n  </h2>\n  {$`Personal Finances`}\n</div>"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"----","note":{"type":"text","tag":"p","text":"----"}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Curriculum Vitae","note":{"type":"text","tag":"h2","text":"Curriculum Vitae"}}},{"id":45,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Create a CV out of custom-built components.","note":{"type":"text","tag":"p","text":"Create a CV out of custom-built components."}}},{"id":46,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div className=\"m-4 p-3 rounded border bg-gray-50\">\n  <h2 className=\"font-medium text-xl border-b mb-4\">\n    Curriculum Vitae Preview\n  </h2>\n  {$`Curriculum Vitae`}\n</div>"}}},{"id":47,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":48,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"----","note":{"type":"text","tag":"p","text":"----"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Invoice","note":{"type":"text","tag":"h2","text":"Invoice"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Load a working hours export (from atWork) and generate an invoice.","note":{"type":"text","tag":"p","text":"Load a working hours export (from atWork) and generate an invoice."}}},{"id":9,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div className=\"m-4 p-3 rounded border bg-gray-50\">\n  <h2 className=\"font-medium text-xl border-b\">Invoice Preview</h2>\n  {Invoice}\n</div>"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":51,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"----","note":{"type":"text","tag":"p","text":"----"}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":53,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Analyse JSON Size","note":{"type":"text","tag":"h2","text":"Analyse JSON Size"}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Analyse which part of a JSON file is huge.","note":{"type":"text","tag":"p","text":"Analyse which part of a JSON file is huge."}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":57,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/$`Analyse JSON Size`.derivedBlock","note":{"type":"block","isInstantiated":true,"code":"$`Analyse JSON Size`.derivedBlock","state":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Analyse JSON Size Preview","note":{"type":"text","tag":"h3","text":"Analyse JSON Size Preview"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We analyse some JSON data for its size.","note":{"type":"text","tag":"p","text":"We analyse some JSON data for its size."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":4,"name":"jsonFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"eyJoaXN0b3J5IjpbXSwiaW5uZXIiOnsidCI6InJlc2hlZXQuZG9jdW1lbnQiLCJ2IjoxLCJwYWdlcyI6W3siaWQiOjMsIm5hbWUiOiJHbG9iYWwiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBHbG9iYWwgVXRpbHMgYW5kIExpYnMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiR2xvYmFsIFV0aWxzIGFuZCBMaWJzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiVGhlc2UgYXJlIGxpYnMgYW5kIGhlbHBlcnMgdGhhdCB3aWxsIGJlIGF2YWlsYWJsZSBpbiBldmVyeSBwYWdlLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlRoZXNlIGFyZSBsaWJzIGFuZCBoZWxwZXJzIHRoYXQgd2lsbCBiZSBhdmFpbGFibGUgaW4gZXZlcnkgcGFnZS4ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjQsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAoeyBsaWJzLCB1dGlscywgYmxvY2tzIH0pIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgKHsgbGlicywgdXRpbHMsIGJsb2NrcyB9KSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W3siaWQiOjMsIm5hbWUiOiJsaWJzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIFBhcGEgUGFyc2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiUGFwYSBQYXJzZSJ9fX0seyJpZCI6MzksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL3d3dy5wYXBhcGFyc2UuY29tL2RvY3MiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJodHRwczovL3d3dy5wYXBhcGFyc2UuY29tL2RvY3MifX19LHsiaWQiOjYsIm5hbWUiOiJwYXBhcGFyc2UiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGVzbXNoRGVmYXVsdCgncGFwYXBhcnNlJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaERlZmF1bHQoJ3BhcGFwYXJzZScpIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBkYXRlLWZucyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJkYXRlLWZucyJ9fX0seyJpZCI6NDAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzLyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Imh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvIn19fSx7ImlkIjoxMywibmFtZSI6ImRhdGVmbnMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGVzbXNoKCdkYXRlLWZucycpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgZXNtc2goJ2RhdGUtZm5zJykifX19LHsiaWQiOjE4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxOSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIFJlY2hhcnRzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IlJlY2hhcnRzIn19fSx7ImlkIjo0MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Imh0dHBzOi8vcmVjaGFydHMub3JnL2VuLVVTL2FwaSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Imh0dHBzOi8vcmVjaGFydHMub3JnL2VuLVVTL2FwaSJ9fX0seyJpZCI6MjAsIm5hbWUiOiJyZWNoYXJ0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2goJ3JlY2hhcnRzJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaCgncmVjaGFydHMnKSJ9fX0seyJpZCI6MzAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjI4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRGlzdGluY3QgQ29sb3JzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkRpc3RpbmN0IENvbG9ycyJ9fX0seyJpZCI6NDIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL2dpdGh1Yi5jb20vaW50ZXJuYWxmeC9kaXN0aW5jdC1jb2xvcnMjcmVhZG1lIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiaHR0cHM6Ly9naXRodWIuY29tL2ludGVybmFsZngvZGlzdGluY3QtY29sb3JzI3JlYWRtZSJ9fX0seyJpZCI6MjcsIm5hbWUiOiJkaXN0aW5jdENvbG9ycyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2hEZWZhdWx0KFwiZGlzdGluY3QtY29sb3JzXCIpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgZXNtc2hEZWZhdWx0KFwiZGlzdGluY3QtY29sb3JzXCIpIn19fSx7ImlkIjoyNSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MzUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBEYXRlcGlja2VyIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkRhdGVwaWNrZXIifX19LHsiaWQiOjM2LCJuYW1lIjoiRGF0ZXBpY2tlciIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2hEZWZhdWx0KCdyZWFjdC1kYXRlcGlja2VyJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaERlZmF1bHQoJ3JlYWN0LWRhdGVwaWNrZXInKSJ9fX0seyJpZCI6MzgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJlc21zaENzcygncmVhY3QtZGF0ZXBpY2tlci9kaXN0L3JlYWN0LWRhdGVwaWNrZXIuY3NzJykifX19LHsiaWQiOjM3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6MjYsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiKHtcbiAgcGFwYXBhcnNlLFxuICBkYXRlZm5zLFxuICByZWNoYXJ0cyxcbiAgZGlzdGluY3RDb2xvcnMsXG4gIERhdGVwaWNrZXIsXG4gIGxvYWQ6IHsgZXNtc2gsIGVzbXNoRGVmYXVsdCB9LFxufSkifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiZXNtc2giLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxLCJuYW1lIjoiZXNtc2giLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBlc21zaChsaWIpIHtcbiAgcmV0dXJuIGltcG9ydChgaHR0cHM6Ly9lc20uc2gvJHtsaWJ9P2V4dGVybmFsPXJlYWN0YClcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjoxLCJuYW1lIjoiZXNtc2hEZWZhdWx0Iiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MSwibmFtZSI6ImVzbXNoRGVmYXVsdCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImFzeW5jIGZ1bmN0aW9uIGVzbXNoRGVmYXVsdChsaWIpIHtcbiAgcmV0dXJuIChhd2FpdCBlc21zaChsaWIpKS5kZWZhdWx0XG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MywibmFtZSI6ImVzbXNoQ3NzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MSwibmFtZSI6ImNsZWFuSWQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBjbGVhbklkKGlkKSB7XG4gIGlkID0gaWQucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xuICBpZCA9IGlkLnJlcGxhY2UoL1teXFx3XFxzLV0vZ2ksICcnKTtcbiAgXG4gIGlmICghL15bYS16QS1aX10vLnRlc3QoaWQpKSB7XG4gICAgaWQgPSAnXycgKyBpZDtcbiAgfVxuICBcbiAgcmV0dXJuIGlkLnRvTG93ZXJDYXNlKCk7XG59In19fSx7ImlkIjowLCJuYW1lIjoiZXNtc2hDc3MiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBlc21zaENzcyhmaWxlKSB7XG4gIGNvbnN0IGlkID0gY2xlYW5JZChmaWxlKVxuICBcbiAgY29uc3QgZm91bmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcbiAgaWYgKGZvdW5kKSB7IHJldHVybiBmb3VuZCB9XG5cbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKVxuICBsaW5rLmlkID0gaWRcbiAgbGluay5ocmVmID0gJ2h0dHBzOi8vZXNtLnNoLycgKyBmaWxlXG4gIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnXG4gIFxuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspXG4gIFxuICByZXR1cm4gbGlua1xufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119XX0seyJpZCI6MSwibmFtZSI6InV0aWxzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uKSB7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhkdXJhdGlvbilcbiAgY29uc3QgbWludXRlcyA9IE1hdGgucm91bmQoZHVyYXRpb24gKiA2MCAlIDYwKVxuICByZXR1cm4gYCR7aG91cnN9OiR7U3RyaW5nKG1pbnV0ZXMpLnBhZFN0YXJ0KDIsICcwJyl9YFxufVxuXG5mdW5jdGlvbiBsYWJlbGVyKC4uLmxhYmVscykge1xuICByZXR1cm4gdmFsdWVzID0+IE9iamVjdC5mcm9tRW50cmllcyhsb2Rhc2guemlwKGxhYmVscywgdmFsdWVzKSlcbn1cblxuZnVuY3Rpb24gcm91bmRPbihudW0sIHN0ZXApIHtcbiAgaWYgKHN0ZXAgPCAwKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogc3RlcCkgLyBzdGVwXG4gIH1cbiAgZWxzZSBpZiAoc3RlcCA8IDEpIHtcbiAgICBjb25zdCBzdGVwSW52ID0gMSAvIHN0ZXBcbiAgICBjb25zdCBzdGVwUm91bmQgPSBNYXRoLnJvdW5kKHN0ZXBJbnYpXG4gICAgY29uc3Qgc3RlcENsZWFuID0gTWF0aC5hYnMoc3RlcFJvdW5kIC0gc3RlcEludikgPCAxZS0xMCA/IHN0ZXBSb3VuZCA6IHN0ZXBJbnZcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBzdGVwQ2xlYW4pIC8gc3RlcENsZWFuXG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHN0ZXAgKiBNYXRoLnJvdW5kKG51bSAvIHN0ZXApXG4gIH1cbn1cblxucmV0dXJuIHtcbiAgZm9ybWF0RHVyYXRpb24sXG4gIGxhYmVsZXIsXG4gIHJvdW5kT24sXG4gIFxuICAuLi5jaGFydHMsXG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6ImNoYXJ0cyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIENoYXJ0IFV0aWxzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkNoYXJ0IFV0aWxzIn19fSx7ImlkIjoxLCJuYW1lIjoiUGllRExDIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgeyBQaWUsIENlbGwsIExhYmVsTGlzdCB9ID0gbGlicy5yZWNoYXJ0c1xuXG5mdW5jdGlvbiBQaWVETEMoeyBkYXRhLCBkYXRhS2V5LCBsYWJlbEtleSwgZm9ybWF0dGVyLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkge1xuICBjb25zdCBjb3VudCA9IGRhdGEubGVuZ3RoXG4gIGNvbnN0IGNvbG9ycyA9IGxpYnMuZGlzdGluY3RDb2xvcnMoeyBjb3VudCwgbGlnaHRNaW46IDM4LCBsaWdodE1heDogOTUgfSlcbiAgXG4gIHJldHVybiAoXG4gICAgPFBpZVxuICAgICAgZGF0YT17ZGF0YX1cbiAgICAgIGRhdGFLZXk9e2RhdGFLZXl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAge2RhdGEubWFwKChfLCBpbmRleCkgPT4gKFxuICAgICAgICA8Q2VsbCBrZXk9e2BjZWxsLSR7aW5kZXh9YH0gZmlsbD17Y29sb3JzW2luZGV4XS5oZXgoKX0gLz5cbiAgICAgICkpfVxuICAgICAgPExhYmVsTGlzdCBkYXRhS2V5PXtkYXRhS2V5fSBmb3JtYXR0ZXI9e2Zvcm1hdHRlcn0gcG9zaXRpb249XCJpbnNpZGVcIiBzdHJva2U9XCJub25lXCIgZmlsbD1cIndoaXRlXCIgLz5cbiAgICAgIDxMYWJlbExpc3QgZGF0YUtleT17bGFiZWxLZXl9IG9mZnNldD17MTB9IHBvc2l0aW9uPVwib3V0c2lkZVwiIHN0cm9rZT1cIm5vbmVcIiAvPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvUGllPlxuICApXG59In19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo0LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0geyBQaWVETEMgfSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIHsgUGllRExDIH0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19LHsiaWQiOjIsIm5hbWUiOiJibG9ja3MiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAoeyBTaW1wbGVCbG9jaywgU2VsZWN0LCBEYXRlIH0pIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgKHsgU2ltcGxlQmxvY2ssIFNlbGVjdCwgRGF0ZSB9KSJ9fX1dfX0sImlzQ29sbGFwc2VkIjpmYWxzZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiU2ltcGxlQmxvY2siLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiQ29kZSIsImlubmVyIjoiZnVuY3Rpb24gdXBkYXRlKHZhbHVlLCBwYXRoLCBmbikge1xuICBpZiAoIXBhdGggfHwgQXJyYXkuaXNBcnJheShwYXRoKSAmJiBwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmbih2YWx1ZSlcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gaW1tdXRhYmxlLnVwZGF0ZSh2YWx1ZSwgcGF0aCwgZm4pXG4gIH1cbn1cblxuZnVuY3Rpb24gU2ltcGxlQmxvY2soaW5pdCwgdmlldywgZGVzYz17fSkge1xuICByZXR1cm4gcmVzaGVldC5jb3JlLmJsb2NrLmNyZWF0ZSh7XG4gICAgaW5pdCxcbiAgICB2aWV3KHsgc3RhdGUsIGRpc3BhdGNoLCBlbnYgfSwgcmVmKSB7XG4gICAgICBmdW5jdGlvbiBzZXRTdGF0ZShuZXdTdGF0ZSwgcGF0aD1bXSkge1xuICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZSA9IChcbiAgICAgICAgICB0eXBlb2YgbmV3U3RhdGUgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgbmV3U3RhdGVcbiAgICAgICAgICA6XG4gICAgICAgICAgICAoKSA9PiBuZXdTdGF0ZVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBkaXNwYXRjaChzdGF0ZSA9PiAoe1xuICAgICAgICAgIHN0YXRlOiB1cGRhdGUoc3RhdGUsIHBhdGgsIHVwZGF0ZVN0YXRlKSxcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGZ1bmN0aW9uIG9uVXBkYXRlKGV2UGF0aCwgc3RhdGVQYXRoPVtdLCBwcm9jZXNzVmFsdWU9bG9kYXNoLmlkZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBldiA9PiB7XG4gICAgICAgICAgc2V0U3RhdGUocHJvY2Vzc1ZhbHVlKGxvZGFzaC5nZXQoZXYsIGV2UGF0aCkpLCBzdGF0ZVBhdGgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZnVuY3Rpb24gZmllbGREaXNwYXRjaGVyKGZpZWxkKSB7XG4gICAgICAgIHJldHVybiByZXNoZWV0LnV0aWwuZGlzcGF0Y2guZmllbGREaXNwYXRjaGVyKGZpZWxkLCBkaXNwYXRjaClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHZpZXcoe1xuICAgICAgICBzdGF0ZSwgZGlzcGF0Y2gsIGVudiwgcmVmLFxuICAgICAgICBzZXRTdGF0ZSwgb25VcGRhdGUsIGZpZWxkRGlzcGF0Y2hlcixcbiAgICAgIH0pXG4gICAgfSxcbiAgICBnZXRSZXN1bHQoc3RhdGUpIHsgcmV0dXJuIHN0YXRlIH0sXG4gICAgcmVjb21wdXRlKHN0YXRlKSB7IHJldHVybiB7IHN0YXRlLCBpbnZhbGlkYXRlZDogZmFsc2UgfSB9LFxuICAgIGZyb21KU09OKGpzb24pIHsgcmV0dXJuIGpzb24gPz8gaW5pdCB9LFxuICAgIHRvSlNPTihzdGF0ZSkgeyByZXR1cm4gc3RhdGUgfSxcbiAgICAuLi5kZXNjLFxuICB9KVxufSJ9LCJpc0NvbGxhcHNlZCI6ZmFsc2UsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IlNlbGVjdCIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiJTZWxlY3QiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBTZWxlY3QodmFsdWVzKSB7XG4gIHJldHVybiBTaW1wbGVCbG9jayh2YWx1ZXNbMF0sXG4gICAgKHsgcmVmLCBzdGF0ZSwgb25VcGRhdGUgfSkgPT4gKFxuICAgICAgPHNlbGVjdFxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgdmFsdWU9e3N0YXRlfVxuICAgICAgICBvbkNoYW5nZT17b25VcGRhdGUoJ3RhcmdldC52YWx1ZScpfVxuICAgICAgPlxuICAgICAgICB7dmFsdWVzLm1hcCh2YWx1ZSA9PiAoXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3ZhbHVlfSB2YWx1ZT17dmFsdWV9PlxuICAgICAgICAgICAge3ZhbHVlfVxuICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICApKX1cbiAgICAgIDwvc2VsZWN0PlxuICAgIClcbiAgKVxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjIsIm5hbWUiOiJEYXRlIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRGF0ZSBCbG9jayIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJEYXRlIEJsb2NrIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8bGlicy5EYXRlcGlja2VyIGlubGluZSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxsaWJzLkRhdGVwaWNrZXIgaW5saW5lIC8+In19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1LCJuYW1lIjoiRGF0ZUJsb2NrIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gRGF0ZUJsb2NrKGluaXQpIHtcbiAgcmV0dXJuIFNpbXBsZUJsb2NrKGluaXQgPz8gbmV3IERhdGUoKSxcbiAgICAoeyByZWYsIHN0YXRlLCBzZXRTdGF0ZSB9KSA9PiB7XG4gICAgICBjb25zdCBkaXZSZWYgPSBSZWFjdC51c2VSZWYoKVxuICAgICAgXG4gICAgICBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICAgICAgZGl2UmVmLmN1cnJlbnRcbiAgICAgICAgICA/LnF1ZXJ5U2VsZWN0b3IoJy5yZWFjdC1kYXRlcGlja2VyIFt0YWJpbmRleD1cIjBcIl0nKVxuICAgICAgICAgID8uZm9jdXMoKVxuICAgICAgfVxuXG4gICAgICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHsgZm9jdXMgfSksIFtdKVxuICAgICAgXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgcmVmPXtkaXZSZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgIG9uS2V5RG93bj17ZXYgPT4ge1xuICAgICAgICAgICAgaWYgKGV2LmtleSAhPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmb2N1cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGxpYnMuRGF0ZXBpY2tlclxuICAgICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICAgIHNlbGVjdGVkPXtzdGF0ZX1cbiAgICAgICAgICAgIG9uU2VsZWN0PXtkYXRlID0+IHNldFN0YXRlKGRhdGUpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB5LTEgaG92ZXI6YmctYmx1ZS01MFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFN0YXRlKG5ldyBEYXRlKCkpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBUb2RheVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9saWJzLkRhdGVwaWNrZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0sXG4gICAge1xuICAgICAgdG9KU09OKGRhdGUpIHsgcmV0dXJuIGxpYnMuZGF0ZWZucy5mb3JtYXRJU08oZGF0ZSkgfSxcbiAgICAgIGZyb21KU09OKGpzb24pIHsgcmV0dXJuIGxpYnMuZGF0ZWZucy5wYXJzZUlTTyhqc29uKSB9LFxuICAgIH0sXG4gIClcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6ZmFsc2UsImNoaWxkcmVuIjpbXX1dfV19LHsiaWQiOjUsIm5hbWUiOiJXb3JrIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgV29yayIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJXb3JrIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bFwiPkluY29tZSBhZnRlciBFeHBlbnNlczoge0ZpbmFuY2VzLnV0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhGaW5hbmNlcy5JbmNvbWUuYmFsYW5jZSkpKX08L3NwYW4+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bFwiPkluY29tZSBhZnRlciBFeHBlbnNlczoge0ZpbmFuY2VzLnV0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhGaW5hbmNlcy5JbmNvbWUuYmFsYW5jZSkpKX08L3NwYW4+In19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgV29ya2luZyBIb3VycyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJXb3JraW5nIEhvdXJzIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gJGBXb3JraW5nIEhvdXJzYC5jaGFydHMubW9udGhzIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgJGBXb3JraW5nIEhvdXJzYC5jaGFydHMubW9udGhzIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgSW5jb21lIGFmdGVyIEV4cGVuc2VzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkluY29tZSBhZnRlciBFeHBlbnNlcyJ9fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IEZpbmFuY2VzLkluY29tZS5jaGFydCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIEZpbmFuY2VzLkluY29tZS5jaGFydCJ9fX1dfX0sImlzQ29sbGFwc2VkIjpmYWxzZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiQ29uZmlnIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgQ29uZmlnIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkNvbmZpZyJ9fX0seyJpZCI6MSwibmFtZSI6Im93bmVyIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgbmFtZSA9IFwiSmFuZSBEb2VcIjtcbmNvbnN0IGRlc2NyaXB0aW9uID0gXCJQcmV0dHlHb29kU29sdXRpb25zIENvbnN1bHRhbnRcIjtcbmNvbnN0IGFkZHJlc3MgPSBbXG4gIG5hbWUsXG4gIFwiRG9lc2l0IFN0cmVldCAxM1wiLFxuICBcIjEyMzQ1IFdvcmtzVG93blwiLFxuXTtcbmNvbnN0IGNvbnRhY3QgPSBbXG4gIFwiKzAwIDEyMyA0NTY3ODlcIixcbiAgXCJqYW5lLmRvZUBwcmV0dHlnb29kLnNvbHV0aW9uc1wiLFxuXTtcbmNvbnN0IGJhbmsgPSA8PlxuICBCZXN0QmFuayBJbmMuPGJyLz5cbiAgSUJBTjogREU0MiAxMzM3IDEyMzQgNzY1NCA4OTg5IDAwXG48Lz47XG5cbnJldHVybiB7IG5hbWUsIGRlc2NyaXB0aW9uLCBhZGRyZXNzLCBjb250YWN0LCBiYW5rIH0ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoe1xuICBvd25lcixcbn0pIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IldvcmtpbmcgSG91cnMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBXb3JraW5nIEhvdXJzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IldvcmtpbmcgSG91cnMifX19LHsiaWQiOjExLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiSG93IHRvIGFkZCBuZXcgZGF0YTogQWRkIHRoZSBtb250aGx5IGV4cG9ydCBmaWxlcyBmcm9tIEF0V29yayBpbiBcIkF0V29yayBJbXBvcnRzXCIgYW5kIGFsbCBjaGFydHMgaGVyZSBhdXRvbWF0aWNhbGx5IGdldCB1cGRhdGVkLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkhvdyB0byBhZGQgbmV3IGRhdGE6IEFkZCB0aGUgbW9udGhseSBleHBvcnQgZmlsZXMgZnJvbSBBdFdvcmsgaW4gXCJBdFdvcmsgSW1wb3J0c1wiIGFuZCBhbGwgY2hhcnRzIGhlcmUgYXV0b21hdGljYWxseSBnZXQgdXBkYXRlZC4ifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBCeSBXZWVrIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkJ5IFdlZWsifX19LHsiaWQiOjksIm5hbWUiOiJ3ZWVrcyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2goRGF0YSlcbiAgLm1hcChlbnRyeSA9PiAoe1xuICAgIHdlZWs6IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGVudHJ5LnN0YXJ0LCBcIidXJ0kgeXl5eVwiKSxcbiAgICAuLi5lbnRyeSxcbiAgfSkpXG4gIC5ncm91cEJ5KCd3ZWVrJylcbiAgLm1hcFZhbHVlcyhlbnRyaWVzID0+IGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykpXG4gIC52YWx1ZSgpIn19fSx7ImlkIjoxMCwibmFtZSI6IndlZWtzQ2hhcnQiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3Qge1xuICBSZXNwb25zaXZlQ29udGFpbmVyLFxuICBCYXJDaGFydCxcbiAgQmFyLFxuICBYQXhpcyxcbiAgWUF4aXMsXG4gIFRvb2x0aXAsXG59ID0gR2xvYmFsLmxpYnMucmVjaGFydHM7XG5cbmNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyh3ZWVrcykubWFwKEdsb2JhbC51dGlscy5sYWJlbGVyKCd3ZWVrJywgJ2hvdXJzJykpO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezMwMH0+XG4gIDxCYXJDaGFydCBkYXRhPXtkYXRhfT5cbiAgICA8VG9vbHRpcCBmb3JtYXR0ZXI9e0dsb2JhbC51dGlscy5mb3JtYXREdXJhdGlvbn0gLz5cbiAgICA8QmFyIHR5cGU9XCJtb25vdG9uZVwiIGRhdGFLZXk9XCJob3Vyc1wiIGZpbGw9XCIjOUREOUQyXCIgLz5cbiAgICA8WEF4aXMgZGF0YUtleT1cIndlZWtcIiAvPlxuICAgIDxZQXhpcyB0aWNrRm9ybWF0dGVyPXtHbG9iYWwudXRpbHMuZm9ybWF0RHVyYXRpb259IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgQnkgTW9udGgiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiQnkgTW9udGgifX19LHsiaWQiOjUsIm5hbWUiOiJtb250aHMiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoibG9kYXNoKCRgRGF0YWApXG4gIC5tYXAoZW50cnkgPT4gKHtcbiAgICBtb250aDogR2xvYmFsLmxpYnMuZGF0ZWZucy5mb3JtYXQoZW50cnkuc3RhcnQsICdMTEwgeXl5eScpLFxuICAgIC4uLmVudHJ5LFxuICB9KSlcbiAgLmdyb3VwQnkoJ21vbnRoJylcbiAgLm1hcFZhbHVlcyhlbnRyaWVzID0+IGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykpXG4gIC52YWx1ZSgpIn19fSx7ImlkIjo2LCJuYW1lIjoibW9udGhzQ2hhcnQiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3Qge1xuICBSZXNwb25zaXZlQ29udGFpbmVyLFxuICBCYXJDaGFydCxcbiAgQmFyLFxuICBYQXhpcyxcbiAgWUF4aXMsXG4gIFRvb2x0aXAsXG59ID0gR2xvYmFsLmxpYnMucmVjaGFydHM7XG5cbmNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyhtb250aHMpLm1hcChHbG9iYWwudXRpbHMubGFiZWxlcignbW9udGgnLCAnaG91cnMnKSk7XG5cbjxSZXNwb25zaXZlQ29udGFpbmVyIGhlaWdodD17MzAwfT5cbiAgPEJhckNoYXJ0IGRhdGE9e2RhdGF9PlxuICAgIDxUb29sdGlwIGZvcm1hdHRlcj17R2xvYmFsLnV0aWxzLmZvcm1hdER1cmF0aW9ufSAvPlxuICAgIDxCYXIgdHlwZT1cIm1vbm90b25lXCIgZGF0YUtleT1cImhvdXJzXCIgZmlsbD1cIiM5REQ5RDJcIiAvPlxuICAgIDxYQXhpcyBkYXRhS2V5PVwibW9udGhcIiAvPlxuICAgIDxZQXhpcyB0aWNrRm9ybWF0dGVyPXtHbG9iYWwudXRpbHMuZm9ybWF0RHVyYXRpb259IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjozLCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoe1xuICBEYXRhLFxuICB3ZWVrcyxcbiAgbW9udGhzLFxuICBjaGFydHM6IHtcbiAgICB3ZWVrczogd2Vla3NDaGFydCxcbiAgICBtb250aHM6IG1vbnRoc0NoYXJ0LFxuICB9LFxufSkifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiQXRXb3JrIEltcG9ydHMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgQXRXb3JrIEltcG9ydHMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiQXRXb3JrIEltcG9ydHMifX19LHsiaWQiOjEyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiQWRkIGEgbmV3IGAvTG9hZEZpbGVgIEJsb2NrIHdpdGggYSBjb3JyZXNwb25kaW5nIG1vbnRoIChhbmQgeWVhcikgbGFiZWwuIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiQWRkIGEgbmV3IGAvTG9hZEZpbGVgIEJsb2NrIHdpdGggYSBjb3JyZXNwb25kaW5nIG1vbnRoIChhbmQgeWVhcikgbGFiZWwuIn19fSx7ImlkIjoxMywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlRoZW4gYWRkIHRoZSBmaWxlIHRvIHRoZSBgZXhwb3J0c2AgbGlzdCBhdCB0aGUgZW5kLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlRoZW4gYWRkIHRoZSBmaWxlIHRvIHRoZSBgZXhwb3J0c2AgbGlzdCBhdCB0aGUgZW5kLiJ9fX0seyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIDIwMjQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiMjAyNCJ9fX0seyJpZCI6MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IkphbnVhcnkiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJKYW51YXJ5In19fSx7ImlkIjoyLCJuYW1lIjoiMjAyNC8wMSIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Mb2FkRmlsZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJMb2FkRmlsZSIsInN0YXRlIjp7InN0YXRlIjoibG9hZGVkIiwiZmlsZSI6eyJjb250ZW50IjoiUldsdWRITERwR2RsT3pzN0NrSmxaMmx1Ymp0RmJtUmxPMUJoZFhObE8wUmhkV1Z5Q2pFd0xqQXhMakl3TWpRZ01EazZNemM3TVRBdU1ERXVNakF5TkNBeE5qbzBOVHNpTWl3MUlqc2lOQ3cyTXpNaUNqRXhMakF4TGpJd01qUWdNRGc2TURBN01URXVNREV1TWpBeU5DQXhNem8xT1RzaU1TdzNOU0k3SWpRc01qTXpJZ294TWk0d01TNHlNREkwSURBM09qSXlPekV5TGpBeExqSXdNalFnTVRRNk1EQTdJakVzTlRNeklqc2lOU3d4SWdveE15NHdNUzR5TURJMElEQTNPakF3T3pFekxqQXhMakl3TWpRZ01EYzZORFU3T3lJd0xEYzFJZ294TlM0d01TNHlNREkwSURBMk9qVTRPekUxTGpBeExqSXdNalFnTVRNNk5EVTdJak1zTURNeklqc2lNeXczTlNJS01UWXVNREV1TWpBeU5DQXhNem95TVRzeE5pNHdNUzR5TURJMElERTNPak00T3pzaU5Dd3lPRE1pQ2pFM0xqQXhMakl3TWpRZ01EWTZNRFk3TVRjdU1ERXVNakF5TkNBeE5Eb3lNVHNpTWl3MU5TSTdJalVzTnlJS01UZ3VNREV1TWpBeU5DQXdOam94T0RzeE9DNHdNUzR5TURJMElERTBPalExT3lJeExEZ2lPeUkyTERZMUlnb3hPUzR3TVM0eU1ESTBJREEyT2pJME96RTVMakF4TGpJd01qUWdNVEk2TXpBN0lqRXNOalkzSWpzaU5DdzBNek1pQ2pJeUxqQXhMakl3TWpRZ01EazZNREU3TWpJdU1ERXVNakF5TkNBeE1qb3hNRHM3SWpNc01UVWlDakl6TGpBeExqSXdNalFnTVRJNk16STdNak11TURFdU1qQXlOQ0F4Tmpvek9EczdJalFzTVNJS01qUXVNREV1TWpBeU5DQXdOam96TXpzeU5DNHdNUzR5TURJMElERTFPakE1T3lJeUxEazRNeUk3SWpVc05qRTNJZ295TlM0d01TNHlNREkwSURBNE9qUXhPekkxTGpBeExqSXdNalFnTVRRNk16QTdJakVzTVRZM0lqc2lOQ3cyTlNJS01qa3VNREV1TWpBeU5DQXhNem96T1RzeU9TNHdNUzR5TURJMElERTNPakUwT3lJd0xEVWlPeUl6TERBNE15SUtNekF1TURFdU1qQXlOQ0F4TXpvek1Ec3pNQzR3TVM0eU1ESTBJREUzT2pNd096czBDak14TGpBeExqSXdNalFnTVRNNk1qUTdNekV1TURFdU1qQXlOQ0F4Tnpvek16czdJalFzTVRVaUNqczdPd289IiwibmFtZSI6Im51bWJlcnMtZXhwb3J0LWF0d29yay0yMDI0LTA1LTE1LTE2XzM0XzAzLmNzdiIsIm9wdGlvbnMiOnsidHlwZSI6InRleHQvY3N2IiwibGFzdE1vZGlmaWVkIjoxNzE1NzgzNjQzMDAwfX19fX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJGZWJydWFyeSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkZlYnJ1YXJ5In19fSx7ImlkIjo0LCJuYW1lIjoiMjAyNC8wMiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Mb2FkRmlsZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJMb2FkRmlsZSIsInN0YXRlIjp7InN0YXRlIjoibG9hZGVkIiwiZmlsZSI6eyJjb250ZW50IjoiUldsdWRITERwR2RsT3pzN0NrSmxaMmx1Ymp0RmJtUmxPMUJoZFhObE8wUmhkV1Z5Q2pBeUxqQXlMakl3TWpRZ01EWTZNVFk3TURJdU1ESXVNakF5TkNBd056b3hOenM3SWpFc01ERTNJZ293TWk0d01pNHlNREkwSURFMU9qQXdPekF5TGpBeUxqSXdNalFnTVRjNk5EazdPeUl5TERneE55SUtNRFV1TURJdU1qQXlOQ0F3TmpvME5Uc3dOUzR3TWk0eU1ESTBJREUxT2pVNE95SXlMREF6TXlJN0lqY3NNVGd6SWdvd05pNHdNaTR5TURJMElEQTJPak00T3pBMkxqQXlMakl3TWpRZ01qRTZNRFE3SWpjc01UTXpJanNpTnl3eklnb3dOeTR3TWk0eU1ESTBJREEyT2pNd096QTNMakF5TGpJd01qUWdNVFE2TkRRN0lqRXNORFVpT3lJMkxEYzRNeUlLTURndU1ESXVNakF5TkNBd05qb3hPRHN3T0M0d01pNHlNREkwSURFME9qQTBPeUl5TERNMUlqc2lOU3cwTVRjaUNqQTVMakF5TGpJd01qUWdNRFk2TXpJN01Ea3VNREl1TWpBeU5DQXdOem8wT1RzN0lqRXNNamd6SWdvd09TNHdNaTR5TURJMElEQTVPak13T3pBNUxqQXlMakl3TWpRZ01UUTZNekE3T3pVS01USXVNREl1TWpBeU5DQXdOam95T1RzeE1pNHdNaTR5TURJMElEQTNPakUxT3pzaU1DdzNOamNpQ2pFeUxqQXlMakl3TWpRZ01EazZNekE3TVRJdU1ESXVNakF5TkNBeE1EbzFOVHM3SWpFc05ERTNJZ294TWk0d01pNHlNREkwSURFeE9qTXpPekV5TGpBeUxqSXdNalFnTVRNNk5ETTdJakFzTWpNeklqc2lNU3c1TXpNaUNqRXlMakF5TGpJd01qUWdNVFE2TlRFN01USXVNREl1TWpBeU5DQXhPRG93T0RzaU1DdzFJanNpTWl3M09ETWlDakV6TGpBeUxqSXdNalFnTVRNNk16WTdNVE11TURJdU1qQXlOQ0F4T0Rvek16czdJalFzT1RVaUNqRTBMakF5TGpJd01qUWdNRGs2TWpFN01UUXVNREl1TWpBeU5DQXhNVG96TURzN0lqSXNNVFVpQ2pFMExqQXlMakl3TWpRZ01USTZOVGM3TVRRdU1ESXVNakF5TkNBeE5Ub3dOanM3SWpJc01UVWlDakUxTGpBeUxqSXdNalFnTURnNk1UTTdNVFV1TURJdU1qQXlOQ0F4TVRvd09Uc2lNQ3cxSWpzaU1pdzBNek1pQ2pFMUxqQXlMakl3TWpRZ01URTZORGM3TVRVdU1ESXVNakF5TkNBeE5Eb3dORHM3SWpJc01qZ3pJZ294Tmk0d01pNHlNREkwSURBNE9qSTNPekUyTGpBeUxqSXdNalFnTURrNk16VTdPeUl4TERFek15SUtNVFl1TURJdU1qQXlOQ0F4TURvek16c3hOaTR3TWk0eU1ESTBJREUzT2pFMU95SXdMREUxSWpzaU5pdzFOU0lLTVRZdU1ESXVNakF5TkNBeE9Ub3lNanN4Tmk0d01pNHlNREkwSURJeE9qQXhPenNpTVN3Mk5TSUtNakF1TURJdU1qQXlOQ0F4TkRvMU9Uc3lNQzR3TWk0eU1ESTBJREU0T2pBeE96c2lNeXd3TXpNaUNqSXdMakF5TGpJd01qUWdNVGc2TkRVN01qQXVNREl1TWpBeU5DQXhPVG96TWpzN0lqQXNOemd6SWdveU1TNHdNaTR5TURJMElEQTNPak14T3pJeExqQXlMakl3TWpRZ01URTZNalk3SWpBc01qVWlPeUl6TERZMk55SUtNakV1TURJdU1qQXlOQ0F4TWpveE1Ec3lNUzR3TWk0eU1ESTBJREUwT2pNME96c2lNaXcwSWdveU1pNHdNaTR5TURJMElEQTNPakkxT3pJeUxqQXlMakl3TWpRZ01USTZNREE3SWpBc05TSTdJalFzTURneklnb3lNaTR3TWk0eU1ESTBJREUxT2pNNE96SXlMakF5TGpJd01qUWdNVGc2TVRnN095SXlMRFkyTnlJS01qTXVNREl1TWpBeU5DQXdPRG93TURzeU15NHdNaTR5TURJMElERXpPalV4T3lJd0xEVWlPeUkxTERNMUlnb3lOaTR3TWk0eU1ESTBJREEyT2pRMU96STJMakF5TGpJd01qUWdNRGM2TkRRN095SXdMRGs0TXlJS01qWXVNREl1TWpBeU5DQXdPRG94TlRzeU5pNHdNaTR5TURJMElERTBPakUyT3lJd0xEYzFJanNpTlN3eU5qY2lDakkzTGpBeUxqSXdNalFnTURZNk1USTdNamN1TURJdU1qQXlOQ0F3TmpvME5UczdJakFzTlRVaUNqSTNMakF5TGpJd01qUWdNVFE2TURVN01qY3VNREl1TWpBeU5DQXhPRG96T0RzN0lqUXNOVFVpQ2pJNExqQXlMakl3TWpRZ01EYzZNVFU3TWpndU1ESXVNakF5TkNBd09UbzFPVHNpTUN3eU5TSTdJaklzTkRneklnb3lPQzR3TWk0eU1ESTBJREV4T2pNd096STRMakF5TGpJd01qUWdNVEk2TURBN095SXdMRFVpQ2pJNExqQXlMakl3TWpRZ01UTTZOVE03TWpndU1ESXVNakF5TkNBeE5Eb3lORHM3SWpBc05URTNJZ295T1M0d01pNHlNREkwSURBMk9qUTFPekk1TGpBeUxqSXdNalFnTURjNk1qZzdPeUl3TERjeE55SUtNamt1TURJdU1qQXlOQ0F3T1RveE1qc3lPUzR3TWk0eU1ESTBJREUwT2pJMk96c2lOU3d5TXpNaUNqSTVMakF5TGpJd01qUWdNVFk2TVRVN01qa3VNREl1TWpBeU5DQXhPRG93TURzN0lqRXNOelVpQ2pzN093bz0iLCJuYW1lIjoibnVtYmVycy1leHBvcnQtYXR3b3JrLTIwMjQtMDUtMTUtMTZfMzRfNDQuY3N2Iiwib3B0aW9ucyI6eyJ0eXBlIjoidGV4dC9jc3YiLCJsYXN0TW9kaWZpZWQiOjE3MTU3ODM2ODQwMDB9fX19fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ik1hcmNoIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiTWFyY2gifX19LHsiaWQiOjgsIm5hbWUiOiIyMDI0LzAzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0xvYWRGaWxlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkxvYWRGaWxlIiwic3RhdGUiOnsic3RhdGUiOiJsb2FkZWQiLCJmaWxlIjp7ImNvbnRlbnQiOiJSV2x1ZEhMRHBHZGxPenM3Q2tKbFoybHVianRGYm1SbE8xQmhkWE5sTzBSaGRXVnlDakF4TGpBekxqSXdNalFnTURZNk5ESTdNREV1TURNdU1qQXlOQ0F3Tnpvek16czdJakFzT0RVaUNqQXhMakF6TGpJd01qUWdNRGc2TURJN01ERXVNRE11TWpBeU5DQXdPRG96TXpzN0lqQXNOVEUzSWdvd01TNHdNeTR5TURJMElEQTVPakV5T3pBeExqQXpMakl3TWpRZ01UUTZNekE3SWpBc05TSTdJalFzT0NJS01EUXVNRE11TWpBeU5DQXdOem96TURzd05DNHdNeTR5TURJMElEQTRPakUxT3pzaU1DdzNOU0lLTURRdU1ETXVNakF5TkNBeE16b3pNRHN3TkM0d015NHlNREkwSURFNE9qQXhPenNpTkN3MU1UY2lDakEyTGpBekxqSXdNalFnTURjNk1UYzdNRFl1TURNdU1qQXlOQ0F3T0Rvd05EczdJakFzTnpneklnb3dOaTR3TXk0eU1ESTBJREE0T2pNd096QTJMakF6TGpJd01qUWdNRGs2TkRVN095SXhMREkxSWdvd05pNHdNeTR5TURJMElERXdPak13T3pBMkxqQXpMakl3TWpRZ01URTZORFU3T3lJeExESTFJZ293Tmk0d015NHlNREkwSURFeU9qTXdPekEyTGpBekxqSXdNalFnTVRNNk5EVTdPeUl4TERJMUlnb3dOaTR3TXk0eU1ESTBJREUwT2pJNE96QTJMakF6TGpJd01qUWdNVGc2TXpBN095STBMREF6TXlJS01EY3VNRE11TWpBeU5DQXdOam96TVRzd055NHdNeTR5TURJMElEQTRPakl6T3lJd0xESXpNeUk3SWpFc05qTXpJZ293Tnk0d015NHlNREkwSURBNU9qQXdPekEzTGpBekxqSXdNalFnTVRJNk1ETTdPeUl6TERBMUlnb3dOeTR3TXk0eU1ESTBJREV5T2pJNE96QTNMakF6TGpJd01qUWdNVE02TVRBN095SXdMRGNpQ2pBNExqQXpMakl3TWpRZ01URTZNRE03TURndU1ETXVNakF5TkNBeE9Eb3hOVHM3SWpjc01pSUtNVEV1TURNdU1qQXlOQ0F4TURveU5Uc3hNUzR3TXk0eU1ESTBJREV4T2pJek96c2lNQ3c1TmpjaUNqRTRMakF6TGpJd01qUWdNRGM2TlRZN01UZ3VNRE11TWpBeU5DQXhNam8xTkRzN0lqUXNPVFkzSWdveE9DNHdNeTR5TURJMElERXpPakkxT3pFNExqQXpMakl3TWpRZ01UVTZNRGs3T3lJeExEY3pNeUlLTVRrdU1ETXVNakF5TkNBeE5Eb3pNVHN4T1M0d015NHlNREkwSURFM09qVTJPenNpTXl3ME1UY2lDakl3TGpBekxqSXdNalFnTURjNk1UVTdNakF1TURNdU1qQXlOQ0F3T1RveE16czdJakVzT1RZM0lnb3lNQzR3TXk0eU1ESTBJREE1T2pRNU96SXdMakF6TGpJd01qUWdNVEU2TXpBN095SXhMRFk0TXlJS01qQXVNRE11TWpBeU5DQXhNam96T0RzeU1DNHdNeTR5TURJMElERTBPakF3T3pzaU1Td3pOamNpQ2pJeExqQXpMakl3TWpRZ01EZzZNek03TWpFdU1ETXVNakF5TkNBeE1Eb3pNanM3SWpFc09UZ3pJZ295TVM0d015NHlNREkwSURFd09qUTNPekl4TGpBekxqSXdNalFnTVRFNk5EVTdPeUl3TERrMk55SUtNakV1TURNdU1qQXlOQ0F4Tmpvek1Ec3lNUzR3TXk0eU1ESTBJREU0T2pRMU96c2lNaXd5TlNJS01qSXVNRE11TWpBeU5DQXdOem95TkRzeU1pNHdNeTR5TURJMElERTBPakUzT3pzaU5pdzRPRE1pQ2pJMUxqQXpMakl3TWpRZ01EYzZNREk3TWpVdU1ETXVNakF5TkNBeE1qb3dNRHM3SWpRc09UWTNJZ295Tmk0d015NHlNREkwSURFME9qQXdPekkyTGpBekxqSXdNalFnTVRjNk5UTTdPeUl6TERnNE15SUtNamN1TURNdU1qQXlOQ0F3T0RveE1Ec3lOeTR3TXk0eU1ESTBJREUwT2pFNU95SXdMRFVpT3lJMUxEWTFJZ295T0M0d015NHlNREkwSURBM09qSTVPekk0TGpBekxqSXdNalFnTVRJNk5EazdJakFzTlNJN0lqUXNPRE16SWdveU9DNHdNeTR5TURJMElERTJPak13T3pJNExqQXpMakl3TWpRZ01UZzZORFU3T3lJeUxESTFJZ295T0M0d015NHlNREkwSURFNU9qSXpPekk0TGpBekxqSXdNalFnTVRrNk5EazdPeUl3TERRek15SUtNamd1TURNdU1qQXlOQ0F5TURveU1Uc3lPQzR3TXk0eU1ESTBJREl5T2pFNE96c2lNU3c1TlNJS01qZ3VNRE11TWpBeU5DQXlNam8xTmpzeU9TNHdNeTR5TURJMElEQXdPalE0T3pzaU1TdzROamNpQ2pJNUxqQXpMakl3TWpRZ01EYzZOREk3TWprdU1ETXVNakF5TkNBeE1qb3pOenNpTUN3eU5TSTdJalFzTmpZM0lnbzdPenNLIiwibmFtZSI6Im51bWJlcnMtZXhwb3J0LWF0d29yay0yMDI0LTA1LTE1LTE2XzM1XzA1LmNzdiIsIm9wdGlvbnMiOnsidHlwZSI6InRleHQvY3N2IiwibGFzdE1vZGlmaWVkIjoxNzE1NzgzNzA2MDAwfX19fX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo3LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gWyRgMjAyNC8wMWAsICRgMjAyNC8wMmAsICRgMjAyNC8wM2BdIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgWyRgMjAyNC8wMWAsICRgMjAyNC8wMmAsICRgMjAyNC8wM2BdIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IkRhdGEiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjo1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBEYXRhIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkRhdGEifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJUaGVzZSBhcmUgYWxsIHRoZSBpbXBvcnRlZCBhbmQgcGFyc2VkIHdvcmtpbmcgaG91cnM6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiVGhlc2UgYXJlIGFsbCB0aGUgaW1wb3J0ZWQgYW5kIHBhcnNlZCB3b3JraW5nIGhvdXJzOiJ9fX0seyJpZCI6NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MCwibmFtZSI6ImRhdGEiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGxvZGFzaC5mbGF0dGVuKGF3YWl0IFByb21pc2UuYWxsKCRgQXRXb3JrIEltcG9ydHNgLm1hcChwYXJzZSkpKSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIGxvZGFzaC5mbGF0dGVuKGF3YWl0IFByb21pc2UuYWxsKCRgQXRXb3JrIEltcG9ydHNgLm1hcChwYXJzZSkpKSJ9fX0seyJpZCI6MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPHJlYWN0SW5zcGVjdG9yLlRhYmxlSW5zcGVjdG9yIGRhdGE9e2RhdGF9IC8+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPHJlYWN0SW5zcGVjdG9yLlRhYmxlSW5zcGVjdG9yIGRhdGE9e2RhdGF9IC8+In19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo0LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZGF0YSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIGRhdGEifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoicGFyc2UiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxMywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgUGFyc2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiUGFyc2UifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXhhbXBsZSBwYXJzZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJFeGFtcGxlIHBhcnNlIn19fSx7ImlkIjowLCJuYW1lIjoiZXhhbXBsZUZpbGUiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9ICRgQXRXb3JrIEltcG9ydHNgWzBdIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgJGBBdFdvcmsgSW1wb3J0c2BbMF0ifX19LHsiaWQiOjEsIm5hbWUiOiJjc3YiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IEdsb2JhbC5saWJzLnBhcGFwYXJzZS5wYXJzZShhd2FpdCBleGFtcGxlRmlsZS50ZXh0KCkpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgR2xvYmFsLmxpYnMucGFwYXBhcnNlLnBhcnNlKGF3YWl0IGV4YW1wbGVGaWxlLnRleHQoKSkifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjQsIm5hbWUiOiJkYXRhIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBjc3YuZGF0YS5zbGljZSgyLCAtMikiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBjc3YuZGF0YS5zbGljZSgyLCAtMikifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtkYXRhfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtkYXRhfSAvPiJ9fX0seyJpZCI6NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MiwibmFtZSI6InBhcnNlZCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IGRhdGVGbXQgPSBcImRkLk1NLnl5eXkgSEg6bW1cIlxuXG5mdW5jdGlvbiBwYXJzZU51bShzdHIpIHtcbiAgaWYgKHN0ci50cmltKCkgPT09ICcnKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQoc3RyLnJlcGxhY2UoJywnLCAnLicpKVxufVxuXG5kYXRhLm1hcChcbiAgKFtzdGFydCwgZW5kLCBicmVha0hvdXJzLCB3b3JrSG91cnNdKSA9PiAoe1xuICAgIHN0YXJ0OiBHbG9iYWwubGlicy5kYXRlZm5zLnBhcnNlKHN0YXJ0LCBkYXRlRm10LCBuZXcgRGF0ZSgpKSxcbiAgICBlbmQ6IEdsb2JhbC5saWJzLmRhdGVmbnMucGFyc2UoZW5kLCBkYXRlRm10LCBuZXcgRGF0ZSgpKSxcbiAgICBicmVha0hvdXJzOiBwYXJzZU51bShicmVha0hvdXJzKSxcbiAgICB3b3JrSG91cnM6IHBhcnNlTnVtKHdvcmtIb3VycyksXG4gIH0pXG4pIn19fSx7ImlkIjo1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17cGFyc2VkfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtwYXJzZWR9IC8+In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6ImZ1bGwiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjoxNSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBBY3R1YWwgUGFyc2VyIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkFjdHVhbCBQYXJzZXIifX19LHsiaWQiOjksIm5hbWUiOiJwYXJzZSIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImZ1bmN0aW9uIHBhcnNlTnVtKHN0cikge1xuICBpZiAoc3RyLnRyaW0oKSA9PT0gJycpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIHJldHVybiBOdW1iZXIucGFyc2VGbG9hdChzdHIucmVwbGFjZSgnLCcsICcuJykpXG59XG4gXG5jb25zdCBkYXRlRm10ID0gXCJkZC5NTS55eXl5IEhIOm1tXCJcblxuYXN5bmMgZnVuY3Rpb24gcGFyc2UoZmlsZSkge1xuICBjb25zdCBjc3YgPSBhd2FpdCBHbG9iYWwubGlicy5wYXBhcGFyc2UucGFyc2UoYXdhaXQgZmlsZS50ZXh0KCkpXG4gIFxuICBjb25zdCBkYXRhID0gY3N2LmRhdGEuc2xpY2UoMiwgLTIpXG4gIFxuICByZXR1cm4gZGF0YS5tYXAoXG4gICAgKFtzdGFydCwgZW5kLCBicmVha0hvdXJzLCB3b3JrSG91cnNdKSA9PiAoe1xuICAgICAgc3RhcnQ6IEdsb2JhbC5saWJzLmRhdGVmbnMucGFyc2Uoc3RhcnQsIGRhdGVGbXQsIG5ldyBEYXRlKCkpLFxuICAgICAgZW5kOiBHbG9iYWwubGlicy5kYXRlZm5zLnBhcnNlKGVuZCwgZGF0ZUZtdCwgbmV3IERhdGUoKSksXG4gICAgICBicmVha0hvdXJzOiBwYXJzZU51bShicmVha0hvdXJzKSxcbiAgICAgIHdvcmtIb3VyczogcGFyc2VOdW0od29ya0hvdXJzKSxcbiAgICB9KVxuICApXG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX1dfV19LHsiaWQiOjIsIm5hbWUiOiJJbnZvaWNlIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgSW52b2ljZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJJbnZvaWNlIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiR2VuZXJhdGUgYW4gaW52b2ljZSBmb3IgYSBnaXZlbiBtb250aC4iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJHZW5lcmF0ZSBhbiBpbnZvaWNlIGZvciBhIGdpdmVuIG1vbnRoLiJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MywibmFtZSI6Im1vbnRocyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2goJGBXb3JraW5nIEhvdXJzYC5EYXRhKVxuICAubWFwKGVudHJ5ID0+ICh7XG4gICAgbW9udGg6IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGVudHJ5LnN0YXJ0LCAnTExMTCB5eXl5JyksXG4gICAgLi4uZW50cnksXG4gIH0pKVxuICAuZ3JvdXBCeSgnbW9udGgnKVxuICAudmFsdWUoKSJ9fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NCwibmFtZSI6InNlbGVjdGVkTW9udGgiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvR2xvYmFsLmJsb2Nrcy5TZWxlY3QoT2JqZWN0LmtleXMobW9udGhzKSkiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjpmYWxzZSwiY29kZSI6Ikdsb2JhbC5ibG9ja3MuU2VsZWN0KE9iamVjdC5rZXlzKG1vbnRocykpIn19fSx7ImlkIjoxMiwibmFtZSI6Im1vbnRoRW50cmllcyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IG1vbnRoc1tzZWxlY3RlZE1vbnRoXSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIG1vbnRoc1tzZWxlY3RlZE1vbnRoXSJ9fX0seyJpZCI6MjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17bW9udGhFbnRyaWVzfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXttb250aEVudHJpZXN9IC8+In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiV29ya2luZyBob3VyczoiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJXb3JraW5nIGhvdXJzOiJ9fX0seyJpZCI6NiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGxvZGFzaC5zdW1CeShtb250aEVudHJpZXMsICd3b3JrSG91cnMnKSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIGxvZGFzaC5zdW1CeShtb250aEVudHJpZXMsICd3b3JrSG91cnMnKSJ9fX0seyJpZCI6OSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJSYW5nZSBvZiBlbnRyaWVzOiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlJhbmdlIG9mIGVudHJpZXM6In19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCBmbXQgPSBkYXRlID0+IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGRhdGUsIFwiZG8gTU1NIHl5eXlcIilcblxuY29uc3Qgc29ydGVkID0gbG9kYXNoLnNvcnRCeShtb250aEVudHJpZXMsICdzdGFydCcpXG5cbnJldHVybiA8PntmbXQoc29ydGVkWzBdLnN0YXJ0KX0gLSB7Zm10KHNvcnRlZC5zbGljZSgtMSlbMF0uc3RhcnQpfTwvPiJ9fX0seyJpZCI6MTcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiUmVjZWl2ZXI6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiUmVjZWl2ZXI6In19fSx7ImlkIjoxOSwibmFtZSI6InJlY2VpdmVyIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6Ijw+XG4gIEJpZ0NvcnAgSW5jLjxici8+XG4gIExhcmdlIFN0cmVldCAxMjM8YnIvPlxuICA5OTk5OSBNZWdhQ2l0eVxuPC8+In19fSx7ImlkIjoxNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJJbnZvaWNlIERhdGU6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiSW52b2ljZSBEYXRlOiJ9fX0seyJpZCI6MjEsIm5hbWUiOiJkYXRlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0dsb2JhbC5ibG9ja3MuRGF0ZSgpIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6ZmFsc2UsImNvZGUiOiJHbG9iYWwuYmxvY2tzLkRhdGUoKSJ9fX0seyJpZCI6MjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgR2VuZXJhdGVkIEludm9pY2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiR2VuZXJhdGVkIEludm9pY2UifX19LHsiaWQiOjE2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiPERvY3VtZW50PlxuICA8VGVtcGxhdGVcbiAgICByZWNlaXZlcj17cmVjZWl2ZXJ9XG4gICAgZGF0ZT17ZGF0ZX1cbiAgICBkYXRhPXttb250aEVudHJpZXN9XG4gICAgbG9jYWxlPVwiZW5cIlxuICAgIGN1cnJlbmN5PVwiVVNEXCJcbiAgICBob3VybHlXYWdlPXs3NX1cbiAgICB0YXhSYXRlPXswLjE5fVxuICAgIC8+XG48L0RvY3VtZW50PiJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W3siaWQiOjAsIm5hbWUiOiJEb2N1bWVudCIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIERvY3VtZW50Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkRvY3VtZW50In19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiQ3JlYXRlcyBhIHByaW50YWJsZSBkb2N1bWVudC4iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJDcmVhdGVzIGEgcHJpbnRhYmxlIGRvY3VtZW50LiJ9fX0seyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MSwibmFtZSI6IkRvY3VtZW50IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gcmVuZGVyRG9jdW1lbnQoY29udGVudCkge1xuICByZXR1cm4gUmVhY3REb21TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoXG4gICAgICA8aHRtbD5cbiAgICAgICAgPGhlYWQ+XG4gICAgICAgICAgPHN0eWxlPntgXG4gICAgICAgICAgICBAcGFnZSB7XG4gICAgICAgICAgICAgIG1hcmdpbjogMmNtIDAgMCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbVwiIC8+XG4gICAgICAgIDwvaGVhZD5cbiAgICAgICAgPGJvZHkgY2xhc3NOYW1lPVwiYmctd2hpdGVcIj5cbiAgICAgICAgICB7Y29udGVudH1cbiAgICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIClcbn1cbiAgXG5mdW5jdGlvbiBEb2N1bWVudCh7Y2hpbGRyZW59KSB7XG4gIGNvbnN0IGlmcmFtZVJlZiA9IFJlYWN0LnVzZVJlZigpXG4gIFxuICBmdW5jdGlvbiBvblByaW50SWZyYW1lKCkge1xuICAgIGlmcmFtZVJlZi5jdXJyZW50Py5jb250ZW50V2luZG93Py5wcmludCgpXG4gIH1cbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLXN0cmV0Y2ggc3BhY2UteS0yXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJmbG93LXgtYXV0b1wiPlxuICAgICAgICA8aWZyYW1lXG4gICAgICAgICAgcmVmPXtpZnJhbWVSZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYm9yZGVyIG1pbi13LVs3NjhweF1cIlxuICAgICAgICAgIGhlaWdodD1cIjEyMDBcIlxuICAgICAgICAgIHNyY0RvYz17cmVuZGVyRG9jdW1lbnQoY2hpbGRyZW4pfVxuICAgICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIHJvdW5kZWQgYmctYmx1ZS0xMDAgaG92ZXI6YmctYmx1ZS0yMDBcIlxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblByaW50SWZyYW1lKCl9XG4gICAgICA+XG4gICAgICAgIFByaW50XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjEsIm5hbWUiOiJUZW1wbGF0ZSIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEludm9pY2UgVGVtcGxhdGUiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiSW52b2ljZSBUZW1wbGF0ZSJ9fX0seyJpZCI6NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6OCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEZvcm1hdHRlcnMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiRm9ybWF0dGVycyJ9fX0seyJpZCI6NSwibmFtZSI6ImZvcm1hdHRlcnMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoeyBsb2NhbGUsIGN1cnJlbmN5IH0pID0+ICh7XG4gIGN1cnJlbmN5OiBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICBzdHlsZTogJ2N1cnJlbmN5JyxcbiAgICBjdXJyZW5jeSxcbiAgfSksXG4gIFxuICBkYXRlOiBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgIGRhdGVTdHlsZTogJ3Nob3J0JyxcbiAgfSksXG4gIFxuICBwZXJjZW50OiBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICBzdHlsZTogJ3BlcmNlbnQnLFxuICB9KSxcbn0pIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgVGFibGUgb2YgTGluZSBJdGVtcyBmb3IgSG91cnMgV29ya2VkIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IlRhYmxlIG9mIExpbmUgSXRlbXMgZm9yIEhvdXJzIFdvcmtlZCJ9fX0seyJpZCI6MSwibmFtZSI6IlRhYmxlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gVGFibGUoeyBkYXRhLCBsb2NhbGUsIGN1cnJlbmN5LCBob3VybHlXYWdlLCB0YXhSYXRlIH0pIHtcbiAgY29uc3QgZm10ID0gZm9ybWF0dGVycyh7IGxvY2FsZSwgY3VycmVuY3kgfSlcbiAgXG4gIGNvbnN0IHByaWNlcyA9IGRhdGEubWFwKCh7IHdvcmtIb3VycyB9KSA9PiB3b3JrSG91cnMgKiBob3VybHlXYWdlKVxuICBjb25zdCBzdW0gPSBsb2Rhc2guc3VtKHByaWNlcylcbiAgY29uc3QgdGF4ZXMgPSBHbG9iYWwudXRpbHMucm91bmRPbihzdW0gKiB0YXhSYXRlLCAwLjAxKVxuICBjb25zdCB0b3RhbCA9IEdsb2JhbC51dGlscy5yb3VuZE9uKHN1bSArIHRheGVzLCAwLjAxKVxuICBcbiAgcmV0dXJuIChcbiAgICA8dGFibGUgY2xhc3NOYW1lPVwidy1mdWxsXCI+XG4gICAgICA8dGhlYWQgY2xhc3NOYW1lPVwiZm9udC1ib2xkIGJnLXNreS0xMDBcIj5cbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTIgdGV4dC1sZWZ0XCI+UHJvamVjdDwvdGg+XG4gICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMiB0ZXh0LWNlbnRlciB3LTI4XCI+RGF0ZTwvdGg+XG4gICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0IHctNDBcIj5Xb3JraW5nIEhvdXJzPC90aD5cbiAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yIHRleHQtcmlnaHQgdy0yOFwiPlByaWNlPC90aD5cbiAgICAgICAgPC90cj5cbiAgICAgIDwvdGhlYWQ+XG4gICAgICBcbiAgICAgIHsvKlxuICAgICAgICBcIlBhZGRpbmdcIiBhdCB0aGUgdGFibGUgYm90dG9tLCBzbyB0aGUgY29udGVudCBkb2Vzbid0IGhpZGVcbiAgICAgICAgYmVsb3cgdGhlIGZvb3RlciB3aGVuIHByaW50aW5nLlxuICAgICAgKi99XG4gICAgICA8dGZvb3QgY2xhc3NOYW1lPVwiaGlkZGVuIHByaW50OnRhYmxlLWZvb3Rlci1ncm91cFwiPlxuICAgICAgICA8dHIgY2xhc3NOYW1lPVwiaC0yOFwiPjx0ZC8+PC90cj5cbiAgICAgIDwvdGZvb3Q+XG4gICAgXG4gICAgICA8dGJvZHk+XG4gICAgICAgIHtkYXRhLm1hcCgoeyBzdGFydCwgd29ya0hvdXJzIH0pID0+IChcbiAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwiZXZlbjpiZy1zbGF0ZS0xMDBcIj5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC0yIHB5LTEuNVwiPlxuICAgICAgICAgICAgICBCdWlsZFRoZUZ1dHVyZVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC0yIHB5LTEuNSB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICB7Zm10LmRhdGUuZm9ybWF0KHN0YXJ0KX1cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicHgtMiBweS0xLjUgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICB7R2xvYmFsLnV0aWxzLmZvcm1hdER1cmF0aW9uKHdvcmtIb3Vycyl9IGhcbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicHgtMiBweS0xLjUgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICB7Zm10LmN1cnJlbmN5LmZvcm1hdCh3b3JrSG91cnMgKiBob3VybHlXYWdlKX1cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgKSl9XG4gICAgICAgIFxuICAgICAgICB7LypcbiAgICAgICAgICBGb290ZXIgbm90IGluIDx0Zm9vdD4gYmVjYXVzZSBvdGhlcndpc2VcbiAgICAgICAgICBpdCBnZXQncyByZXBlYXRlZCBvbiBldmVyeSBwcmludGVkIHBhZ2VcbiAgICAgICAgKi99XG4gICAgICAgIDx0ciBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBiZy1za3ktMTAwIGJvcmRlci10LTIgYm9yZGVyLXdoaXRlIGJyZWFrLWJlZm9yZS1hdm9pZC1wYWdlXCI+XG4gICAgICAgICAgPHRkIGNvbHNwYW49ezN9IGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICBTdW1cbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5jdXJyZW5jeS5mb3JtYXQoc3VtKX1cbiAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHIgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gYmctc2t5LTEwMCBib3JkZXItdC0yIGJvcmRlci13aGl0ZSBicmVhay1iZWZvcmUtYXZvaWQtcGFnZVwiPlxuICAgICAgICAgIDx0ZCBjb2xTcGFuPXszfSBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5wZXJjZW50LmZvcm1hdCh0YXhSYXRlKX0gVGF4ZXNcbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5jdXJyZW5jeS5mb3JtYXQodGF4ZXMpfVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDx0ciBjbGFzc05hbWU9XCJmb250LWJvbGQgYmctc2t5LTEwMCBib3JkZXItdC0yIGJvcmRlci13aGl0ZSBicmVhay1iZWZvcmUtYXZvaWQtcGFnZVwiPlxuICAgICAgICAgIDx0ZCBjb2xTcGFuPXszfSBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgVG90YWxcbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5jdXJyZW5jeS5mb3JtYXQodG90YWwpfVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICA8L3Rib2R5PlxuICAgIDwvdGFibGU+XG4gIClcbn0ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBJbnZvaWNlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6Ikludm9pY2UifX19LHsiaWQiOjQsIm5hbWUiOiJJbnZvaWNlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gSW52b2ljZSh7IGRhdGUsIHJlY2VpdmVyLCBkYXRhLCBsb2NhbGUsIGN1cnJlbmN5LCBob3VybHlXYWdlLCB0YXhSYXRlIH0pIHtcbiAgY29uc3QgZm10ID0gZm9ybWF0dGVycyh7IGxvY2FsZSwgY3VycmVuY3kgfSlcbiAgXG4gIGNvbnN0IGludm9pY2VNb250aCA9IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0RGF0ZShkYXRlLCBcInl5eXktTU1cIik7XG4gIGNvbnN0IGludm9pY2VObyA9IGAke2ludm9pY2VNb250aH0tMDFgO1xuICBcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPG1haW4gY2xhc3NOYW1lPVwiZm9udC1bJ0FyaWFsJ10gbXgtMjAgbWItMjhcIj5cbiAgICAgIFxuICAgICAgICB7LyogSGVhZGVyIHRvcCByaWdodCB3aXRoIG5hbWUgYW5kIGRlc2NyaXB0aW9uICovfVxuICAgICAgICA8aDFcbiAgICAgICAgICBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC00eGwgdGV4dC1yaWdodCB0ZXh0LXNreS03MDAgbGVhZGluZy1ub3JtYWxcIlxuICAgICAgICA+XG4gICAgICAgICAge0NvbmZpZy5vd25lci5uYW1lfVxuICAgICAgICA8L2gxPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmlnaHQgdGV4dC1zbGF0ZS04MDBcIj5cbiAgICAgICAgICB7Q29uZmlnLm93bmVyLmRlc2NyaXB0aW9ufVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXktMTJcIj5cbiAgICAgICAgICB7LyogQWRyZXNzIHNlbmRlciBhbmQgcmVjZWl2ZXIgbGVmdCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxhZGRyZXNzIGNsYXNzTmFtZT1cInRleHQteHMgbm90LWl0YWxpYyB0ZXh0LXNreS03MDBcIj5cbiAgICAgICAgICAgICAge0NvbmZpZy5vd25lci5hZGRyZXNzLmZsYXRNYXAoZmllbGQgPT4gW1wi4oCiXCIsIGZpZWxkXSkuc2xpY2UoMSkuam9pbihcIiBcIil9XG4gICAgICAgICAgICA8L2FkZHJlc3M+XG4gICAgICAgICAgICA8YWRkcmVzcyBjbGFzc05hbWU9XCJsZWFkaW5nLXRpZ2h0IG5vdC1pdGFsaWNcIj5cbiAgICAgICAgICAgICAge3JlY2VpdmVyfVxuICAgICAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBDb250YWN0IGRldGFpbHMgcmlnaHQgKi99XG4gICAgICAgICAgPGFkZHJlc3NcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImxlYWRpbmctdGlnaHQgbm90LWl0YWxpYyBmbGV4LWVuZCB0ZXh0LXJpZ2h0IHRleHQtc21cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtDb25maWcub3duZXIuYWRkcmVzcy5mbGF0TWFwKGZpZWxkID0+IFtmaWVsZCwgPGJyLz5dKX1cbiAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICB7Q29uZmlnLm93bmVyLmNvbnRhY3QuZmxhdE1hcChmaWVsZCA9PiBbZmllbGQsIDxici8+XSl9XG4gICAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB7LyogTWVzc2FnZSBIZWFkZXIgKi99XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCB0ZXh0LXNreS03MDAgbGVhZGluZy1ub3JtYWxcIj5cbiAgICAgICAgICBJbnZvaWNlXG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxoMyBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBsZWFkaW5nLW5vcm1hbCBtdC0xIG1iLTVcIj5cbiAgICAgICAgICA8c3Bhbj5JbnZvaWNlTm86IHtpbnZvaWNlTm99PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPntmbXQuZGF0ZS5mb3JtYXQoZGF0ZSl9PC9zcGFuPlxuICAgICAgICA8L2gzPlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHsvKiBNZXNzYWdlIENvbnRlbnQgKi99XG4gICAgICAgIDxhcnRpY2xlPlxuICAgICAgICAgIDxUYWJsZVxuICAgICAgICAgICAgZGF0YT17ZGF0YX1cbiAgICAgICAgICAgIGxvY2FsZT17bG9jYWxlfVxuICAgICAgICAgICAgY3VycmVuY3k9e2N1cnJlbmN5fVxuICAgICAgICAgICAgaG91cmx5V2FnZT17aG91cmx5V2FnZX1cbiAgICAgICAgICAgIHRheFJhdGU9e3RheFJhdGV9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L2FydGljbGU+XG4gICAgICAgIFxuICAgICAgPC9tYWluPlxuICAgICAgXG4gICAgICB7LyogRm9vdGVyICovfVxuICAgICAgPGZvb3RlclxuICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICBmaXhlZCBib3R0b20tMCBpbnNldC14LTAgaC0yNCBweC0yMCBweS0yXG4gICAgICAgICAgYmctc2xhdGUtNjAwXG4gICAgICAgICAgZm9udC1bJ0FyaWFsJ10gdGV4dC1zbSB0ZXh0LXdoaXRlXG4gICAgICAgICAgZmxleCBmbGV4LXJvdyBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnRcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7Q29uZmlnLm93bmVyLmRlc2NyaXB0aW9ufTxici8+XG4gICAgICAgICAge0NvbmZpZy5vd25lci5uYW1lfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGFkZHJlc3MgY2xhc3NOYW1lPVwibm90LWl0YWxpY1wiPlxuICAgICAgICAgIHtDb25maWcub3duZXIuYmFua31cbiAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgPC9mb290ZXI+XG4gICAgPC8+XG4gIClcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19LHsiaWQiOjMsIm5hbWUiOiJGaW5hbmNlcyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEZpbmFuY2VzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkZpbmFuY2VzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXhwZW5zZXMgQnVkZ2V0cyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJFeHBlbnNlcyBCdWRnZXRzIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6IjxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBqdXN0aWZ5LXN0cmV0Y2hcIj5cbiAge0V4cGVuc2VzLm9mZmljZUNoYXJ0fVxuICB7RXhwZW5zZXMuZXF1aXBtZW50Q2hhcnR9XG48L2Rpdj4ifX19LHsiaWQiOjQsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBJbmNvbWUgYWZ0ZXIgRXhwZW5zZXMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiSW5jb21lIGFmdGVyIEV4cGVuc2VzIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gSW5jb21lLmNoYXJ0Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgSW5jb21lLmNoYXJ0In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjEwLCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0geyBFeHBlbnNlcywgSW5jb21lLCB1dGlscyB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBFeHBlbnNlcywgSW5jb21lLCB1dGlscyB9In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MywibmFtZSI6InV0aWxzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRmluYW5jZSBVdGlscyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJGaW5hbmNlIFV0aWxzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgY3VycmVuY3lGb3JtYXR0ZXIgPSBJbnRsLk51bWJlckZvcm1hdCgnZW4nLCB7XG4gIHN0eWxlOiAnY3VycmVuY3knLFxuICBjdXJyZW5jeTogJ1VTRCcsXG59KVxuXG5mdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShudW0pIHtcbiAgcmV0dXJuIGN1cnJlbmN5Rm9ybWF0dGVyLmZvcm1hdChudW0pXG59XG5cbnJldHVybiB7XG4gIGN1cnJlbmN5Rm9ybWF0dGVyLFxuICBmb3JtYXRDdXJyZW5jeSxcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjoyLCJuYW1lIjoiRXhwZW5zZXMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBFeHBlbnNlcyBCdWRnZXQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiRXhwZW5zZXMgQnVkZ2V0In19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgT2ZmaWNlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6Ik9mZmljZSJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlJlbnQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJSZW50In19fSx7ImlkIjozLCJuYW1lIjoicmVudCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gNTAwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgNTAwIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiSW50ZXJuZXQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJJbnRlcm5ldCJ9fX0seyJpZCI6NiwibmFtZSI6ImludGVybmV0IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA1MCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDUwIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiRWxlY3RyaWNpdHkiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJFbGVjdHJpY2l0eSJ9fX0seyJpZCI6OSwibmFtZSI6ImVsZWN0cmljaXR5IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAzMCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDMwIn19fSx7ImlkIjoxMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJVdGlsaXRpZXMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJVdGlsaXRpZXMifX19LHsiaWQiOjEyLCJuYW1lIjoidXRpbGl0aWVzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA1MCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDUwIn19fSx7ImlkIjoyOSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MzEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjMwLCJuYW1lIjoib2ZmaWNlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSB7IHJlbnQsIGludGVybmV0LCBlbGVjdHJpY2l0eSwgdXRpbGl0aWVzIH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IHJlbnQsIGludGVybmV0LCBlbGVjdHJpY2l0eSwgdXRpbGl0aWVzIH0ifX19LHsiaWQiOjQyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPD5TdW06IHtsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMob2ZmaWNlKSl9PC8+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPD5TdW06IHtsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMob2ZmaWNlKSl9PC8+In19fSx7ImlkIjozNSwibmFtZSI6Im9mZmljZUNoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHsgUGllQ2hhcnQsIFJlc3BvbnNpdmVDb250YWluZXIgfSA9IEdsb2JhbC5saWJzLnJlY2hhcnRzO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezQwMH0+XG4gIDxQaWVDaGFydCB3aWR0aD17NDAwfSBoZWlnaHQ9ezQwMH0+XG4gICAge0dsb2JhbC51dGlscy5QaWVETEMoe1xuICAgICAgZGF0YTogT2JqZWN0LmVudHJpZXMob2ZmaWNlKSxcbiAgICAgIGxhYmVsS2V5OiBcIjBcIixcbiAgICAgIGRhdGFLZXk6IFwiMVwiLFxuICAgICAgZm9ybWF0dGVyOiB1dGlscy5mb3JtYXRDdXJyZW5jeSxcbiAgICAgIGN4OiBcIjUwJVwiLFxuICAgICAgY3k6IFwiNTAlXCIsXG4gICAgICBpbm5lclJhZGl1czogNzAsXG4gICAgICBvdXRlclJhZGl1czogMTQwLFxuICAgICAgaXNBbmltYXRpb25BY3RpdmU6IGZhbHNlLFxuICAgIH0pfVxuICA8L1BpZUNoYXJ0PlxuPC9SZXNwb25zaXZlQ29udGFpbmVyPiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjUxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXF1aXBtZW50Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkVxdWlwbWVudCJ9fX0seyJpZCI6MTUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJNb2JpbGUiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJNb2JpbGUifX19LHsiaWQiOjE2LCJuYW1lIjoibW9iaWxlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAyMCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDIwIn19fSx7ImlkIjoxNywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJMYXB0b3AiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJMYXB0b3AifX19LHsiaWQiOjE5LCJuYW1lIjoibGFwdG9wIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA1MCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDUwIn19fSx7ImlkIjoyMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJTZXJ2ZXIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJTZXJ2ZXIifX19LHsiaWQiOjIyLCJuYW1lIjoic2VydmVyIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAyMCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDIwIn19fSx7ImlkIjoyNiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJEZXNrdG9wIChUYWJsZSwgTW9uaXRvcnMsIERvbmdsZXMsIGV0YykiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJEZXNrdG9wIChUYWJsZSwgTW9uaXRvcnMsIERvbmdsZXMsIGV0YykifX19LHsiaWQiOjI4LCJuYW1lIjoiZGVza3RvcCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gMTAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiAxMCJ9fX0seyJpZCI6MjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjI0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiUGVuICYgUGFwZXIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJQZW4gJiBQYXBlciJ9fX0seyJpZCI6MjUsIm5hbWUiOiJwZW5QYXBlciIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gMTAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiAxMCJ9fX0seyJpZCI6MzIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMzLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjozNCwibmFtZSI6ImVxdWlwbWVudCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0geyBtb2JpbGUsIGxhcHRvcCwgc2VydmVyLCBkZXNrdG9wLCBwZW5QYXBlciB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBtb2JpbGUsIGxhcHRvcCwgc2VydmVyLCBkZXNrdG9wLCBwZW5QYXBlciB9In19fSx7ImlkIjo0NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDw+U3VtOiB7bG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGVxdWlwbWVudCkpfTwvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDw+U3VtOiB7bG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGVxdWlwbWVudCkpfTwvPiJ9fX0seyJpZCI6MzYsIm5hbWUiOiJlcXVpcG1lbnRDaGFydCIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7IFBpZUNoYXJ0LCBSZXNwb25zaXZlQ29udGFpbmVyIH0gPSBHbG9iYWwubGlicy5yZWNoYXJ0cztcblxuPFJlc3BvbnNpdmVDb250YWluZXIgaGVpZ2h0PXs0MDB9PlxuICA8UGllQ2hhcnQgd2lkdGg9ezQwMH0gaGVpZ2h0PXs0MDB9PlxuICAgIHtHbG9iYWwudXRpbHMuUGllRExDKHtcbiAgICAgIGRhdGE6IE9iamVjdC5lbnRyaWVzKGVxdWlwbWVudCksXG4gICAgICBsYWJlbEtleTogXCIwXCIsXG4gICAgICBkYXRhS2V5OiBcIjFcIixcbiAgICAgIGZvcm1hdHRlcjogdXRpbHMuZm9ybWF0Q3VycmVuY3ksXG4gICAgICBjeDogXCI1MCVcIixcbiAgICAgIGN5OiBcIjUwJVwiLFxuICAgICAgaW5uZXJSYWRpdXM6IDcwLFxuICAgICAgb3V0ZXJSYWRpdXM6IDE0MCxcbiAgICAgIGlzQW5pbWF0aW9uQWN0aXZlOiBmYWxzZSxcbiAgICB9KX1cbiAgPC9QaWVDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjM3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjU2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozOCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEV2ZXJ5dGhpbmciLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiRXZlcnl0aGluZyJ9fX0seyJpZCI6MzksIm5hbWUiOiJldmVyeXRoaW5nIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSB7IC4uLm9mZmljZSwgLi4uZXF1aXBtZW50IH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IC4uLm9mZmljZSwgLi4uZXF1aXBtZW50IH0ifX19LHsiaWQiOjQ2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPD5TdW06IHtsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMoZXZlcnl0aGluZykpfTwvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDw+U3VtOiB7bG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGV2ZXJ5dGhpbmcpKX08Lz4ifX19LHsiaWQiOjQwLCJuYW1lIjoiZXZlcnl0aGluZ0NoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHsgUGllQ2hhcnQsIFJlc3BvbnNpdmVDb250YWluZXIgfSA9IEdsb2JhbC5saWJzLnJlY2hhcnRzO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezQwMH0+XG4gIDxQaWVDaGFydCB3aWR0aD17NDAwfSBoZWlnaHQ9ezQwMH0+XG4gICAge0dsb2JhbC51dGlscy5QaWVETEMoe1xuICAgICAgZGF0YTogT2JqZWN0LmVudHJpZXMoZXZlcnl0aGluZyksXG4gICAgICBsYWJlbEtleTogXCIwXCIsXG4gICAgICBkYXRhS2V5OiBcIjFcIixcbiAgICAgIGZvcm1hdHRlcjogdXRpbHMuZm9ybWF0Q3VycmVuY3ksXG4gICAgICBjeDogXCI1MCVcIixcbiAgICAgIGN5OiBcIjUwJVwiLFxuICAgICAgaW5uZXJSYWRpdXM6IDcwLFxuICAgICAgb3V0ZXJSYWRpdXM6IDE0MCxcbiAgICAgIGlzQW5pbWF0aW9uQWN0aXZlOiBmYWxzZSxcbiAgICB9KX1cbiAgPC9QaWVDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjQ3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0OCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjU4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1OSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NDksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjUwLCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6Iih7XG4gIG9mZmljZSxcbiAgb2ZmaWNlQ2hhcnQsXG4gIGVxdWlwbWVudCxcbiAgZXF1aXBtZW50Q2hhcnQsXG4gIGV2ZXJ5dGhpbmdDaGFydCxcbiAgc3VtOiBsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMoZXZlcnl0aGluZykpLFxufSkifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjoxLCJuYW1lIjoiSW5jb21lIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgSW5jb21lIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkluY29tZSJ9fX0seyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MywibmFtZSI6Im1vbnRocyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCBob3VybHlXYWdlID0gNzVcblxubG9kYXNoKCRgV29ya2luZyBIb3Vyc2AuRGF0YSlcbiAgLm1hcChlbnRyeSA9PiAoe1xuICAgIG1vbnRoOiBHbG9iYWwubGlicy5kYXRlZm5zLmZvcm1hdChlbnRyeS5zdGFydCwgJ0xMTCB5eXl5JyksXG4gICAgLi4uZW50cnksXG4gIH0pKVxuICAuZ3JvdXBCeSgnbW9udGgnKVxuICAubWFwVmFsdWVzKGVudHJpZXMgPT5cbiAgICBHbG9iYWwudXRpbHMucm91bmRPbihcbiAgICAgIGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykgKiBob3VybHlXYWdlLFxuICAgICAgMC4wMSxcbiAgICApXG4gIClcbiAgLnZhbHVlKCkifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJBZnRlciBwbGFubmVkIGV4cGVuc2VzOiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkFmdGVyIHBsYW5uZWQgZXhwZW5zZXM6In19fSx7ImlkIjo4LCJuYW1lIjoiYmFsYW5jZSIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2gubWFwVmFsdWVzKG1vbnRocywgbW9udGggPT5cbiAgbW9udGggLSBFeHBlbnNlcy5zdW1cbikifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6ImNoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHtcbiAgUmVzcG9uc2l2ZUNvbnRhaW5lcixcbiAgQmFyQ2hhcnQsXG4gIEJhcixcbiAgTGFiZWxMaXN0LFxuICBYQXhpcyxcbiAgWUF4aXMsXG4gIFRvb2x0aXAsXG59ID0gR2xvYmFsLmxpYnMucmVjaGFydHM7XG5cbmNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyhiYWxhbmNlKVxuICAubWFwKEdsb2JhbC51dGlscy5sYWJlbGVyKCdtb250aCcsICdiYWxhbmNlJykpO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezMwMH0+XG4gIDxCYXJDaGFydCBkYXRhPXtkYXRhfT5cbiAgICA8VG9vbHRpcCAvPlxuICAgIDxCYXIgdHlwZT1cIm1vbm90b25lXCIgZGF0YUtleT1cImJhbGFuY2VcIiBmaWxsPVwiI2Y0ZDA2ZlwiPlxuICAgICAgPExhYmVsTGlzdCBkYXRhS2V5PVwiYmFsYW5jZVwiIHBvc2l0aW9uPVwidG9wXCIgZm9ybWF0dGVyPXt1dGlscy5mb3JtYXRDdXJyZW5jeX0gLz5cbiAgICA8L0Jhcj5cbiAgICA8WEF4aXMgZGF0YUtleT1cIm1vbnRoXCIgLz5cbiAgICA8WUF4aXMgdGlja0Zvcm1hdHRlcj17dXRpbHMuZm9ybWF0Q3VycmVuY3l9IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjoxMiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjoxNSwibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgbW9udGhzLCBiYWxhbmNlLCBjaGFydCB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBtb250aHMsIGJhbGFuY2UsIGNoYXJ0IH0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19XX1dLCJ2aWV3U3RhdGUiOnsic2lkZWJhck9wZW4iOnRydWUsIm9wZW5QYWdlIjpbNV19LCJ0ZW1wbGF0ZSI6eyJpZCI6LTEsIm5hbWUiOiIiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOltdfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119fX0=","name":"Demo Target.json","options":{"type":"application/json","lastModified":1716387270088}}}}}},{"id":5,"name":"json","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= JSON.parse(await jsonFile.text())","note":{"type":"expr","code":" JSON.parse(await jsonFile.text())"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"part","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= json.inner.pages[1].children","note":{"type":"expr","code":" json.inner.pages[1].children"}}},{"id":6,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip } =\n  await import('https://esm.sh/recharts?external=react');\n  \nconst { default: humanFormat } = await import('https://esm.sh/human-format')\n  \nconst data = Object.entries(part)\n  .map(([key, value]) => ({ key, size: JSON.stringify(value).length }));\n\n<ResponsiveContainer height={400}>\n  <BarChart data={data}>\n    <Tooltip formatter={humanFormat.bytes} />\n    <Bar type=\"monotone\" dataKey=\"size\" fill=\"#8884d8\" />\n    <XAxis dataKey=\"key\"/>\n    <YAxis width={100} tickFormatter={humanFormat.bytes} />\n  </BarChart>\n</ResponsiveContainer>"}}}]}}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"----","note":{"type":"text","tag":"p","text":"----"}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Custom Blocks","note":{"type":"text","tag":"h2","text":"Custom Blocks"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Create custom Blocks and use the Inspect Block to get a glimpse into ReSheet.","note":{"type":"text","tag":"p","text":"Create custom Blocks and use the Inspect Block to get a glimpse into ReSheet."}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/$`Custom Blocks`","note":{"type":"block","isInstantiated":true,"code":"$`Custom Blocks`","state":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Custom Blocks Preview","note":{"type":"text","tag":"h3","text":"Custom Blocks Preview"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We build these custom Blocks in this Page:","note":{"type":"text","tag":"p","text":"We build these custom Blocks in this Page:"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/DateBlock()`","note":{"type":"text","tag":"h4","text":"`/DateBlock()`"}}},{"id":26,"name":"dateBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/DateBlock()","note":{"type":"block","isInstantiated":true,"code":"DateBlock()","state":"2024-05-23T20:32:56+02:00"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dateBlockValue","note":{"type":"expr","code":" dateBlockValue"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/SliderBlock()`","note":{"type":"text","tag":"h4","text":"`/SliderBlock()`"}}},{"id":9,"name":"sliderBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SliderBlock()","note":{"type":"block","isInstantiated":true,"code":"SliderBlock()","state":49}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`","note":{"type":"text","tag":"h4","text":"`/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`"}}},{"id":28,"name":"options","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ['yes', 'no']","note":{"type":"expr","code":" ['yes', 'no']"}}},{"id":22,"name":"hstack","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/HStack(DateBlock(), SliderBlock(), SelectBlock(options))","note":{"type":"block","isInstantiated":true,"code":"HStack(DateBlock(), SliderBlock(), SelectBlock(options))","state":["2024-05-23T20:40:02+02:00",35,"yes"]}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= hstack","note":{"type":"expr","code":" hstack"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Built-in Blocks","note":{"type":"text","tag":"h4","text":"Built-in Blocks"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"And we inspect some built-in Blocks:","note":{"type":"text","tag":"p","text":"And we inspect some built-in Blocks:"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Note)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Note)`"}}},{"id":15,"name":"inspectNote","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Note)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Note)","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNote.state","note":{"type":"expr","code":" inspectNote.state"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>","note":{"type":"text","tag":"p","text":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>"}}}]}}}},{"id":28,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":37,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"----","note":{"type":"text","tag":"p","text":"----"}}},{"id":38,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Interactive Game Dev","note":{"type":"text","tag":"h2","text":"Interactive Game Dev"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a custom Game Block for interactively developing a simple game. Leverage existing Blocks to combine them to the tailored needs of a Game Editor.","note":{"type":"text","tag":"p","text":"Build a custom Game Block for interactively developing a simple game. Leverage existing Blocks to combine them to the tailored needs of a Game Editor."}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/$`Interactive Game Dev`","note":{"type":"block","isInstantiated":true,"code":"$`Interactive Game Dev`","state":{"init":"({\n  score: 0,\n  lives: 10,\n  character: {\n    x: 100,\n    y: 400,\n    xSpeed: 0,\n    ySpeed: 0,\n  },\n  enemies: [],\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The input:","note":{"type":"text","tag":"p","text":"The input:"}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":61,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":60,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Respect the framerate:","note":{"type":"text","tag":"p","text":"Respect the framerate:"}}},{"id":62,"name":"dt","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input?.dt ?? 16","note":{"type":"expr","code":" input?.dt ?? 16"}}},{"id":64,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Calculate in px/s:","note":{"type":"text","tag":"p","text":"Calculate in px/s:"}}},{"id":63,"name":"factor","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dt / 1000","note":{"type":"expr","code":" dt / 1000"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulate Character","note":{"type":"text","tag":"h3","text":"Simulate Character"}}},{"id":4,"name":"character","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.character","note":{"type":"expr","code":" state.character"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":6,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...character, ySpeed: character.ySpeed - 40 * factor }","note":{"type":"expr","code":" { ...character, ySpeed: character.ySpeed - 40 * factor }"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":9,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...character, ySpeed: 14 }","note":{"type":"expr","code":" { ...character, ySpeed: 14 }"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":12,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= character.y <= 0 ? jump : gravity","note":{"type":"expr","code":" character.y <= 0 ? jump : gravity"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":15,"name":"simulatedCharacter","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}","note":{"type":"expr","code":" {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulate Enemies","note":{"type":"text","tag":"h3","text":"Simulate Enemies"}}},{"id":18,"name":"enemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.enemies","note":{"type":"expr","code":" state.enemies"}}},{"id":19,"name":"enemySize","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 32","note":{"type":"expr","code":" 32"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move enemies:","note":{"type":"text","tag":"p","text":"Move enemies:"}}},{"id":22,"name":"movedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= enemies.map(enemyPosition => enemyPosition - 160 * factor)","note":{"type":"expr","code":" enemies.map(enemyPosition => enemyPosition - 160 * factor)"}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Randomly add enemies:","note":{"type":"text","tag":"p","text":"Randomly add enemies:"}}},{"id":25,"name":"addedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= [ ...movedEnemies, ...(Math.random() < 0.6 * factor ? [1300] : []) ]","note":{"type":"expr","code":" [ ...movedEnemies, ...(Math.random() < 0.6 * factor ? [1300] : []) ]"}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Filter enemies that have passed:","note":{"type":"text","tag":"p","text":"Filter enemies that have passed:"}}},{"id":28,"name":"passedAndLeftEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.partition(addedEnemies, enemyPos => enemyPos < -enemySize)","note":{"type":"expr","code":" lodash.partition(addedEnemies, enemyPos => enemyPos < -enemySize)"}}},{"id":29,"name":"passedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= passedAndLeftEnemies[0]","note":{"type":"expr","code":" passedAndLeftEnemies[0]"}}},{"id":30,"name":"leftEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= passedAndLeftEnemies[1]","note":{"type":"expr","code":" passedAndLeftEnemies[1]"}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":32,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Lives, Collisions and Score ","note":{"type":"text","tag":"h3","text":"Lives, Collisions and Score "}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Add passed enemies to score:","note":{"type":"text","tag":"p","text":"Add passed enemies to score:"}}},{"id":34,"name":"score","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.score + passedEnemies.length","note":{"type":"expr","code":" state.score + passedEnemies.length"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Find collisions with enemies:","note":{"type":"text","tag":"p","text":"Find collisions with enemies:"}}},{"id":37,"name":"collidedAndUntouchedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.partition(leftEnemies, enemyPos =>\n    simulatedCharacter.y <= enemySize\n    && Math.abs(simulatedCharacter.x - enemyPos) <= enemySize\n)","note":{"type":"expr","code":" lodash.partition(leftEnemies, enemyPos =>\n    simulatedCharacter.y <= enemySize\n    && Math.abs(simulatedCharacter.x - enemyPos) <= enemySize\n)"}}},{"id":38,"name":"collidedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedAndUntouchedEnemies[0]","note":{"type":"expr","code":" collidedAndUntouchedEnemies[0]"}}},{"id":39,"name":"untouchedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedAndUntouchedEnemies[1]","note":{"type":"expr","code":" collidedAndUntouchedEnemies[1]"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Take a life on collision:","note":{"type":"text","tag":"p","text":"Take a life on collision:"}}},{"id":42,"name":"collided","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedEnemies.length > 0","note":{"type":"expr","code":" collidedEnemies.length > 0"}}},{"id":43,"name":"leftLives","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collided ? state.lives - 1 : state.lives","note":{"type":"expr","code":" collided ? state.lives - 1 : state.lives"}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":45,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final Simulated State","note":{"type":"text","tag":"h3","text":"Final Simulated State"}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"One last thing: Are we even still alive to begin with?","note":{"type":"text","tag":"p","text":"One last thing: Are we even still alive to begin with?"}}},{"id":47,"name":"alive","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.lives > 0","note":{"type":"expr","code":" state.lives > 0"}}},{"id":48,"name":"simulation","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"!alive ?\n  state\n:\n  {\n    ...state,\n    score,\n    lives: leftLives,\n    character: simulatedCharacter,\n    enemies: untouchedEnemies,\n  }"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### React to Input","note":{"type":"text","tag":"h3","text":"React to Input"}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":52,"name":"xSpeed","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// input changes character's xSpeed\nconst previous = state.character.xSpeed\n\nconst speed = 250 * factor\n\nif (!input) return previous;\n\n// This is not 100% correct, but let's keep it simple\nif (input.type === 'keyup') return 0;\nif (input.type === 'pointerup') return 0;\n\nif (input.type === 'keydown') {\n  if (input.key === 'ArrowLeft') return -speed;\n  if (input.key === 'ArrowRight') return speed;\n}\n\nif (input.type === 'pointerdown') {\n  const rect = input.target.getBoundingClientRect()\n  if (input.clientX - rect.x < rect.width / 2) return -speed;\n  if (input.clientX - rect.x > rect.width / 2) return speed;\n}\n\nreturn previous"}}},{"id":53,"name":"reaction","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, character: { ...state.character, xSpeed } }","note":{"type":"expr","code":" { ...state, character: { ...state.character, xSpeed } }"}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final State","note":{"type":"text","tag":"h3","text":"Final State"}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Decide which state to use based on the input:","note":{"type":"text","tag":"p","text":"Decide which state to use based on the input:"}}},{"id":57,"name":"finalState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input?.type === 'simulate' ? simulation : reaction","note":{"type":"expr","code":" input?.type === 'simulate' ? simulation : reaction"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"Controls","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Controls({ state, update, running, toggleRunning }) {\n  return (\n    <div className=\"w-full flex flex-row space-x-2\">\n      <button\n        className={`\n          flex-1 rounded\n          bg-${running ? \"green\" : \"red\"}-100\n          hover:bg-${running ? \"green\" : \"red\"}-200\n        `}\n        onClick={toggleRunning}\n      >\n        {running ? \"Running\" : \"Stopped - click to play\"}\n      </button>\n\n      <button\n        className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n        onClick={() => update({ type: 'simulate', dt: 16 })}\n      >\n        Step\n      </button>\n    </div> \n  )\n}"}}},{"id":0,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst width = 800;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(dt => update({ type: 'simulate', dt }))\n  \n  function react(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    ev.target.focus()\n    \n    update(ev) // runs an update with `input` set to `ev`\n  }\n  \n  const canvasRef = React.useRef(null)\n  \n  React.useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Setting up canvas dimensions\n    canvas.width = width;\n    canvas.height = height;\n\n    // Draw the platform\n    const ptrn = ctx.createPattern(Tiles.ground, 'repeat');\n    ctx.save();\n    ctx.fillStyle = ptrn;\n    ctx.translate(0, 336);\n    ctx.scale(tileSize / Tiles.ground.naturalWidth, tileSize / Tiles.ground.naturalHeight);\n    ctx.fillRect(0, 0, width, tileSize);\n    ctx.restore();\n\n    // Draw the character\n    ctx.save();\n    ctx.translate(state.character.x, height - tileSize - state.character.y);\n    if (state.lives <= 0) ctx.rotate(90 * Math.PI / 180);\n    if (state.character.xSpeed >= 0) ctx.scale(-1, 1);\n    ctx.drawImage(Tiles.character, -tileSize/2, -tileSize, tileSize, tileSize);\n    ctx.restore();\n\n    // Draw enemies\n    state.enemies.forEach(enemyPos => {\n      ctx.save();\n      ctx.translate(enemyPos, height - tileSize);\n      ctx.scale(0.5, 0.5);\n      ctx.drawImage(Tiles.enemy, -tileSize/2, -tileSize, tileSize, tileSize);\n      ctx.restore();\n    });\n\n    // Draw text\n    ctx.font = '20px Arial';\n    ctx.fillStyle = 'black';\n    ctx.fillText(`Lives: ${\"❤️\".repeat(state.lives)}`, 20, 30);\n    ctx.fillText(`Score: ${state.score} x ⭐️`, 20, 60);\n    \n    ctx.font = '16px Arial';\n    ctx.fillStyle = '#888';\n    ctx.fillText('Use the arrow keys or press on the left and right', 20, 90);\n    \n    if (state.lives <= 0) {\n      ctx.fillStyle = 'red';\n      ctx.font = '40px Arial';\n      ctx.fillText('Game Over', 50, 200);\n    }\n  }, [state]);\n\n\n  return (\n    <div>\n      <Controls state={state} update={update} running={running} toggleRunning={toggleRunning} />\n      <canvas\n        ref={canvasRef}\n        tabIndex={-1}\n        className=\"w-full\"\n        onKeyDown={react}\n        onKeyUp={react}\n        onPointerDownCapture={react}\n        onPointerUpCapture={react}\n        />\n    </div>\n  )\n}"}}}]}}}}}]}},"isCollapsed":false,"children":[{"id":0,"name":"Personal Finances","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Personal Finances","note":{"type":"text","tag":"h1","text":"Personal Finances"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Load and parse a CSV file, process and display the data in a chart.","note":{"type":"text","tag":"p","text":"Load and parse a CSV file, process and display the data in a chart."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Load and Parse CSV","note":{"type":"text","tag":"h2","text":"Load and Parse CSV"}}},{"id":4,"name":"bankExportFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"IkV4YW1wbGViYW5rIEdsb2JhbCIKCiJUcmFuc2FjdGlvbiBPdmVydmlldyIKCiJCYW5rIENvZGU6IjsiMTIzNDU2NzgiOzsiRGF0ZToiOyIwNC8wOS8yMDEzIgoiQWNjb3VudDoiOyI5ODc2NTQzMiI7OyJUaW1lOiI7IjEyOjM5OjE4IgoiUXVlcnkgYnk6IjsiSmFuZSBEb2UiOzsiQWNjb3VudCBIb2xkZXI6IjsiSmFuZSBEb2UiCgoiUGVyaW9kOiI7OyJmcm9tOiI7IjA4LzAxLzIwMTIiOyJ0bzoiOyIwNC8wOC8yMDEzIgoiQW1vdW50IGluIEVVUjoiOzsiZnJvbToiOyIgIjsidG86IjsiICIKIlNvcnRlZCBieToiOyJCb29raW5nIGRheSI7ImRlc2NlbmRpbmciCgoiQm9va2luZyBEYXkiOyJWYWx1ZSBEYXRlIjsiUGF5ZXIvUGF5ZWUiOyJSZWNpcGllbnQvT2JsaWdvciI7IkFjY291bnQgTm8uIjsiQmFuayBDb2RlIjsiVHJhbnNhY3Rpb24vUHVycG9zZSI7IkN1cnJlbmN5IjsiQW1vdW50IjsiICIKIjA0LzAyLzIwMTMiOyIwMy8zMS8yMDEzIjs7Ozs7IlNUQVRFTUVOVAoKU1RBVEVNRU5UIEFTIE9GIDAzLzMxLzIwMTMiOyJFVVIiOyIwLjkyIjsiSCIKIjAzLzI1LzIwMTMiOyIwMy8yNS8yMDEzIjsiRjA4NDc5MjE3NDA0NyAgICAgICAwMDAwMCI7IkRFVVRTQ0hFIEJBSE4gS0FSTFNSVUhFIEhCIjsiOTQ3Mjk0ODk0MiI7IjEyMDgwMDAwIjsiRElSRUNUIERFQklUCkVDIDQ3ODI3MjQ4IDg0Mjk3MjQ5NTMyNU9DMSI7IkVVUiI7IjEyNy45MCI7IlMiCiIwMy8yMi8yMDEzIjsiMDMvMjIvMjAxMyI7IkpBTkUgRE9FIjsiQU1BWk9OIERPV05MT0FEUyI7IjQ3ODI3NDkyMDkiOyI4Mjk0Mjk4MCI7IkRJUkVDVCBERUJJVAoxNDkyODI5NDgwMzU1NjI0IjsiRVVSIjsiMy45OSI7IlMiCiIwMy8yMi8yMDEzIjsiMDMvMjIvMjAxMyI7IkpBTkUgRE9FIjsiQU1BWk9OIERPV05MT0FEUyI7IjE3NDI4NDcyNDkiOyI3MjQ5NzI0OSI7IkRJUkVDVCBERUJJVAoyNDk4OTI0ODAyNTQwMjQ5IjsiRVVSIjsiMC43OSI7IlMiCiIwMy8xOC8yMDEzIjsiMDMvMTgvMjAxMyI7IkFUTSA0ODgyIjsiQVRNIE5SMDAwMjg0MDEgQkFOSyBDT0RFNzQyOTI4OTAgMSI7OzsiQVRNIFdJVEhEUkFXQUwKMDMvMTgvMTM6NTYiOyJFVVIiOyI1MC4wMCI7IlMiCiIwMy8xMy8yMDEzIjsiMDMvMTMvMjAxMyI7IkFUTSA3NDg5IjsiQVRNIE5SMDAwMjQ5ODEgQkFOSyBDT0RFMjk0Mjg0OTAgMSI7OzsiQVRNIFdJVEhEUkFXQUwKMDMvMTMvMTg6NDMiOyJFVVIiOyI1MC4wMCI7IlMiCiIwMy8xMS8yMDEzIjsiMDMvMTEvMjAxMyI7IkpBTkUgRE9FIjsiUEVURVIgUEFSS0VSIjsiMTg0OTE0ODIiOyI5MTQ3MTk4NiI7IlNUQU5ESU5HIE9SREVSIENSRURJVApNT05FWSI7IkVVUiI7IjE3Mi4wMCI7IkgiCiIwMy8wNC8yMDEzIjsiMDMvMDQvMjAxMyI7IkFUTSAyNDgyIjsiQVRNIE5SMDAwOTg0MjEgQkFOSyBDT0RFOTE4NDk5NDAgMSI7OzsiQVRNIFdJVEhEUkFXQUwKMDMvMDQvMTk6MDEiOyJFVVIiOyI1MC4wMCI7IlMiCiIwMy8wNC8yMDEzIjsiMDMvMDQvMjAxMyI7IkFUTSA5ODQ5IjsiQVRNIE5SMDA4NDkyMzQgQkFOSyBDT0RFOTQ4MjkyNDAgMSI7OzsiQVRNIFdJVEhEUkFXQUwKMDMvMDIvMTg6MTYiOyJFVVIiOyIyMC4wMCI7IlMiCiIwMi8yNy8yMDEzIjsiMDIvMjcvMjAxMyI7IkFUTSA4MjQ5IjsiQVRNIE5SMDAwNDcyOTEgQkFOSyBDT0RFNzk1Mjg5MDIgMSI7OzsiQVRNIFdJVEhEUkFXQUwKMDIvMjcvMTk6MTUiOyJFVVIiOyIyMC4wMCI7IlMiCiIwMi8yNi8yMDEzIjsiMDIvMjYvMjAxMyI7IlNVUEVSTUFSS0VUIENPUk5FUiI7IkpBTkUgRE9FIjsiOTgyNzQ4MjkiOyIxMjA4MDAwMCI7IkRJUkVDVCBERUJJVApHUk9DRVJJRVMiOyJFVVIiOyI4NS40NyI7IlMiCiIwMi8yMC8yMDEzIjsiMDIvMjAvMjAxMyI7IkpBTkUgRE9FIjsiTUFYIE1VU1RFUk1BTk4iOyI5NDg3Mjk0OCI7IjEyOTQ4NzI5IjsiVFJBTlNGRVIKQklMTCBQQVlNRU5UIjsiRVVSIjsiMjUwLjAwIjsiUyIKIjAyLzE1LzIwMTMiOyIwMi8xNS8yMDEzIjsiVVRJTElUWSBDT01QQU5ZIENJVFkiOyJKQU5FIERPRSI7IjI5NDgyOTQ4IjsiMTIwODAwMDAiOyJESVJFQ1QgREVCSVQKRUxFQ1RSSUNJVFkvRU5FUkdZIjsiRVVSIjsiOTAuMDAiOyJTIgoiMDIvMTAvMjAxMyI7IjAyLzEwLzIwMTMiOyJKQU5FIERPRSI7Ik9OTElORSBTSE9QIFhZWiI7Ijc0ODI5NDgyIjsiMTIwODAwMDAiOyJESVJFQ1QgREVCSVQKT1JERVIgTk8uIDQ4Mjk0IjsiRVVSIjsiNDcuOTAiOyJTIgoiMDIvMDUvMjAxMyI7IjAyLzA1LzIwMTMiOyJGSVRORVNTIENFTlRFUiBHWU0iOyJKQU5FIERPRSI7IjI5Mzg0NzI5IjsiMTIwODAwMDAiOyJESVJFQ1QgREVCSVQKTUVNQkVSU0hJUCBGRUUgRkVCIjsiRVVSIjsiMjkuOTkiOyJTIgoiMDIvMDEvMjAxMyI7IjAyLzAxLzIwMTMiOyJKQU5FIERPRSI7IkxJU0EgTVVTVEVSIjsiODQ5MzcyOTQiOyIxMjA4MDAwMCI7IlRSQU5TRkVSCkJJUlRIREFZIEdJRlQiOyJFVVIiOyIxMDAuMDAiOyJIIgoiMDEvMjgvMjAxMyI7IjAxLzI4LzIwMTMiOyJDSU5FTUEgQ0hBSU4gQ0lUWSI7IkpBTkUgRE9FIjsiNDkyODM3NDkiOyIxMjA4MDAwMCI7IkRJUkVDVCBERUJJVApDSU5FTUEgVElDS0VUUyI7IkVVUiI7IjM1LjAwIjsiUyIKIjAxLzI1LzIwMTMiOyIwMS8yNS8yMDEzIjsiSkFORSBET0UiOyJWRVQgRFIuIFdVRkYiOyI4NDczOTI4NCI7IjEyMDgwMDAwIjsiRElSRUNUIERFQklUClZFVEVSSU5BUlkgVFJFQVRNRU5UIjsiRVVSIjsiMTIwLjAwIjsiUyIKIjAxLzIwLzIwMTMiOyIwMS8yMC8yMDEzIjsiSEFSRFdBUkUgU1RPUkUgRElZIjsiSkFORSBET0UiOyIyODM3NDkyOCI7IjEyMDgwMDAwIjsiRElSRUNUIERFQklUClJFTk9WQVRJT04gTUFURVJJQUwiOyJFVVIiOyIyMDAuMDAiOyJTIgoiMDEvMTUvMjAxMyI7IjAxLzE1LzIwMTMiOyJKQU5FIERPRSI7IkJPT0tTVE9SRSBSRUFESk9ZIjsiOTgyMzc0OTIiOyIxMjA4MDAwMCI7IkRJUkVDVCBERUJJVApTUEVDSUFMVFkgQk9PS1MiOyJFVVIiOyI2MC4wMCI7IlMiCiIwMS8xMC8yMDEzIjsiMDEvMTAvMjAxMyI7IkNBRkUgQ09GRkVFQ0hBVCI7IkpBTkUgRE9FIjsiODI3Mzk0ODIiOyIxMjA4MDAwMCI7IkRJUkVDVCBERUJJVApCUkVBS0ZBU1QgTUVFVElORyI7IkVVUiI7IjE1LjkwIjsiUyIKIjAxLzA1LzIwMTMiOyIwMS8wNS8yMDEzIjsiSkFORSBET0UiOyJJTlRFUk5FVCBQUk9WSURFUiBTUEVFRFkiOyI4NDczMjg5NCI7IjEyMDgwMDAwIjsiRElSRUNUIERFQklUCklOVEVSTkVUIEZFRVMgSkFOIjsiRVVSIjsiMjkuOTUiOyJTIgoiMDEvMDIvMjAxMyI7IjAxLzAxLzIwMTMiOzs7OzsiU1RBVEVNRU5UCgpTVEFURU1FTlQgQVMgT0YgMTIvMzEvMjAxMiI7IkVVUiI7IjEuNTAiOyJIIgoKCiIxMi8wNC8yMDEyIjs7Ozs7OyJFVVIiOyJPcGVuaW5nIEJhbGFuY2UiOyIxLDQxOC45MyI7IkgiCg==","name":"bank-extract.csv","options":{"type":"text/csv","lastModified":1712397176186}}}}}},{"id":5,"name":"bankExportContent","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= bankExportFile.text()","note":{"type":"expr","code":" bankExportFile.text()"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"bankExportParsed","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= libs.papaparse.parse(bankExportContent)","note":{"type":"expr","code":" libs.papaparse.parse(bankExportContent)"}}},{"id":8,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"= <reactInspector.TableInspector data={bankExportParsed.data} />","note":{"type":"expr","code":" <reactInspector.TableInspector data={bankExportParsed.data} />"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Convert and Process Data","note":{"type":"text","tag":"h2","text":"Convert and Process Data"}}},{"id":38,"name":"balanceStart","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= Number.parseFloat(\n    bankExportParsed.data.slice(-2)[0][8].replace(',','')\n  )","note":{"type":"expr","code":" Number.parseFloat(\n    bankExportParsed.data.slice(-2)[0][8].replace(',','')\n  )"}}},{"id":10,"name":"transactionsCSV","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= bankExportParsed.data.slice(13, -4)","note":{"type":"expr","code":" bankExportParsed.data.slice(13, -4)"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"transactions","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"lodash(transactionsCSV)\n  .map(\n    ([date,, payerPayee, recipientObligor, account, bankCode, purpose, currency, turnoverStr, creditDebit]) => {\n      const turnoverNum = Number.parseFloat(turnoverStr)\n      return {\n        date: libs.datefns.parse(date, 'LL/dd/uuuu', new Date()),\n        payerPayee,\n        recipientObligor,\n        purpose,\n        turnover: creditDebit === 'S' ? -turnoverNum : turnoverNum,\n        currency,\n        account,\n        bankCode,\n      }\n    }\n  )\n  .sortBy('date')\n  .value()"}}},{"id":11,"name":"","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"= <reactInspector.TableInspector data={transactions} />","note":{"type":"expr","code":" <reactInspector.TableInspector data={transactions} />"}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":30,"name":"turnoverByMonth","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"lodash.chain(transactions)\n  .map(transaction => ({\n    ...transaction,\n    month: libs.datefns.format(transaction.date, \"MMM yyyy\"),\n  }))\n  .groupBy('month')\n  .mapValues(month =>\n    lodash.chain(month)\n      .groupBy(transaction =>\n        transaction.turnover < 0 ? \"expense\" : \"income\"\n      )\n      .mapValues(transactions =>\n        lodash.sumBy(transactions, 'turnover')\n      )\n      .value()\n  )\n  .map((turnover, month) => ({ month, ...turnover }))\n  .value()"}}},{"id":33,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <reactInspector.TableInspector data={turnoverByMonth} />","note":{"type":"expr","code":" <reactInspector.TableInspector data={turnoverByMonth} />"}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Graphs","note":{"type":"text","tag":"h2","text":"Graphs"}}},{"id":23,"name":"fmtEur","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= Intl.NumberFormat('en', { style: 'currency', currency: 'EUR' })","note":{"type":"expr","code":" Intl.NumberFormat('en', { style: 'currency', currency: 'EUR' })"}}},{"id":47,"name":"formatEuro","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= num => fmtEur.format(num)","note":{"type":"expr","code":" num => fmtEur.format(num)"}}},{"id":24,"name":"fmtDate","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= Intl.DateTimeFormat('en', { dateStyle: 'short' })","note":{"type":"expr","code":" Intl.DateTimeFormat('en', { dateStyle: 'short' })"}}},{"id":48,"name":"formatDate","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= date => fmtDate.format(date)","note":{"type":"expr","code":" date => fmtDate.format(date)"}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Turnover by Month","note":{"type":"text","tag":"h3","text":"Turnover by Month"}}},{"id":32,"name":"turnoverChart","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip } = libs.recharts;\n\n<ResponsiveContainer height={300}>\n  <BarChart data={turnoverByMonth}>\n    <Tooltip formatter={formatEuro} />\n    <CartesianGrid stroke=\"#eee\" strokeDasharray=\"5 5\"/>\n    <XAxis dataKey=\"month\" />\n    <YAxis tickFormatter={formatEuro} width={80} />\n    <Bar type=\"monotone\" dataKey=\"income\" fill=\"#93bc60\" />\n    <Bar type=\"monotone\" dataKey=\"expense\" fill=\"red\" />\n  </BarChart>\n</ResponsiveContainer>"}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Transactions","note":{"type":"text","tag":"h3","text":"Transactions"}}},{"id":22,"name":"transactionsChart","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip } = libs.recharts;\n\n<ResponsiveContainer height={300}>\n  <BarChart data={transactions}>\n    <Tooltip formatter={formatEuro} labelFormatter={formatDate} />\n    <CartesianGrid stroke=\"#eee\" strokeDasharray=\"5 5\"/>\n    <XAxis dataKey=\"date\" tickFormatter={formatDate} />\n    <YAxis tickFormatter={formatEuro} width={80} />\n    <Bar type=\"monotone\" dataKey=\"turnover\" fill=\"#93bc60\" />\n  </BarChart>\n</ResponsiveContainer>"}}},{"id":28,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Account Balance","note":{"type":"text","tag":"h3","text":"Account Balance"}}},{"id":40,"name":"balances","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= utils.scan( // scan is like reduce, but returns an array of every step\n  lodash.map(transactions, 'turnover'),\n  balanceStart,\n  lodash.add,\n)","note":{"type":"expr","code":" utils.scan( // scan is like reduce, but returns an array of every step\n  lodash.map(transactions, 'turnover'),\n  balanceStart,\n  lodash.add,\n)"}}},{"id":41,"name":"transactionsWithBalance","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= utils.addColumn(transactions, 'balance', balances)","note":{"type":"expr","code":" utils.addColumn(transactions, 'balance', balances)"}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":25,"name":"accountBalanceChart","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip } = libs.recharts;\n\nconst xScaleArgs = utils.timeScaleArgs(transactionsWithBalance, \"date\");\n\n<ResponsiveContainer height={300}>\n  <LineChart data={transactionsWithBalance}>\n    <Tooltip formatter={formatEuro} labelFormatter={formatDate}/>\n    <CartesianGrid stroke=\"#eee\" strokeDasharray=\"5 5\"/>\n    <Line type=\"stepAfter\" dataKey=\"balance\" fill=\"#93bc60\" />\n    <XAxis {...xScaleArgs} tickFormatter={formatDate} />\n    <YAxis tickFormatter={formatEuro} width={80} />\n  </LineChart>\n</ResponsiveContainer>"}}},{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":49,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":45,"name":"preview","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div>\n<h3 className=\"text-xl mt-4 mb-2\">Turnover by Month</h3>\n{turnoverChart}\n\n<h3 className=\"text-xl mt-4 mb-2\">Transactions</h3>\n{transactionsChart}\n\n<h3 className=\"text-xl mt-4 mb-2\">Account Balance</h3>\n{accountBalanceChart}\n</div>"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"libs","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function esmsh(lib) {\n  return import(`https://esm.sh/${lib}?external=react`)\n}\n\nasync function esmshDefault(lib) {\n  return (await esmsh(lib)).default\n}\n\nasync function awaitValues(obj) {\n  return (\n    lodash.zipObject(\n      Object.keys(obj),\n      await Promise.all(Object.values(obj)),\n    )\n  )\n}\n\nawaitValues({\n  papaparse: esmshDefault('papaparse'),\n  datefns: esmsh('date-fns'),\n  numeral: esmshDefault('numeral'),\n  \n  recharts: esmsh('recharts'),\n  d3Scale: esmsh('d3-scale'),\n})"}}}]}},"isCollapsed":true,"children":[]},{"id":2,"name":"utils","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function scan(array, init, fn) {\n  const steps = []\n  array.reduce(\n    (acc, item) => {\n      const newAcc = fn(acc, item)\n      steps.push(newAcc)\n      return newAcc\n    },\n    init,\n  )\n  return steps\n}\n\nfunction addColumn(table, colName, colValues) {\n  return lodash.zipWith(\n    table,\n    colValues,\n    (row, col) => ({ ...row, [colName]: col }),\n  )\n}\n\nfunction timeScaleArgs(data, dataKey) {\n  const timeValues = data.map(row => row[dataKey].valueOf());\n  const scale = (\n    libs.d3Scale.scaleTime()\n      .domain([\n        Math.min(...timeValues),\n        Math.max(...timeValues),\n      ])\n  )\n  \n  return {\n    domain: scale.domain().map(date => date.valueOf()),\n    scale,\n    type: 'number',\n    ticks: scale.ticks(5).map(date => date.valueOf()),\n    data,\n    dataKey,\n  }\n}\n\n({\n  scan,\n  addColumn,\n  timeScaleArgs,\n})"}}}]}},"isCollapsed":true,"children":[]}]},{"id":5,"name":"Curriculum Vitae","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Curriculum Vitae","note":{"type":"text","tag":"h1","text":"Curriculum Vitae"}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"CV Components from the \"Components\" subpage:","note":{"type":"text","tag":"p","text":"CV Components from the \"Components\" subpage:"}}},{"id":29,"name":"CV","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= Components","note":{"type":"expr","code":" Components"}}},{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":53,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Most parts here have their code hidden (indicated by a yellow line when hovered/selected). To show the code either **double-click** on a line or select it and press **⌘`M`**","note":{"type":"text","tag":"p","text":"Most parts here have their code hidden (indicated by a yellow line when hovered/selected). To show the code either **double-click** on a line or select it and press **⌘`M`**"}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":57,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Contact data:","note":{"type":"text","tag":"p","text":"Contact data:"}}},{"id":44,"name":"addressShort","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"WorksTown, HustleNation\"","note":{"type":"expr","code":" \"WorksTown, HustleNation\""}}},{"id":49,"name":"addressLong","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"Doesit Street 13, 12345 WorksTown, HustleNation\"","note":{"type":"expr","code":" \"Doesit Street 13, 12345 WorksTown, HustleNation\""}}},{"id":50,"name":"phone","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"+00 123 456789\"","note":{"type":"expr","code":" \"+00 123 456789\""}}},{"id":51,"name":"email","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"jane.doe@prettygood.solutions\"","note":{"type":"expr","code":" \"jane.doe@prettygood.solutions\""}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":47,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":48,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":37,"name":"header","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<CV.Header\n  name=\"Jane Doe\"\n  description={<>\n    A highly specialised solutions developer, evaluating your requirements {}\n    with high fidelity, with 15+ years experience in customer satisfaction.\n  </>}\n  contact={<>\n    {addressShort}<br/>\n    {phone}<br/>\n    {email}<br/>\n  </>}\n  />"}}},{"id":20,"name":"experience","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<>\n  <CV.SectionHeader>Professional Experience</CV.SectionHeader>\n\n  <CV.Experience\n    period={<CV.OpenPeriod start=\"2023/04\" />}\n    title=\"Satisfaction Tracker\"\n    role=\"Founder\"\n    description={\n      <ul className=\"list-disc ml-5 space-y-1\">\n        <li>\n          Oversaw development of the Satisfaction Tracker \n        </li>\n        <li>\n          Grew satisfaction 200% in 12 months\n        </li>\n        <li>\n          Cut costs by 75%\n        </li>\n      </ul>\n    }\n    tech=\"HustleScript, Reenact, Quibble\"\n    />\n\n  <CV.Experience\n    period={<CV.ClosedPeriod start=\"2017/03\" end=\"2023/02\" />}\n    title=\"Solution Refiner\"\n    company=\"Solutions Inc.\"\n    role=\"Staff Solver\"\n    description={<>\n      Implemented solutions which improved ratings by 99.9%.\n    </>}\n    tech=\"HustleScript, SolutionSQL, TalkingMQ\"\n    />\n    \n  <CV.Experience\n    hide\n    period={<CV.ClosedPeriod start=\"2016/01\" end=\"2017/01\" />}\n    title=\"HyperProduct\"\n    company=\"StartUp Fast\"\n    role=\"Solution Intern\"\n    description={<>\n      Implemented multiple frontend components.\n    </>}\n    tech=\"HustleScript, Reenact\"\n    />\n    \n</>"}}},{"id":22,"name":"skills","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function SkillsSectionName({ children }) {\n  return <span className={`text-${Style.colors.gray}`}>{children}</span>\n}\n\n<>\n  <CV.SectionHeader breakPage>Skills</CV.SectionHeader>\n  \n  <CV.Section\n    left={<SkillsSectionName>Programming Languages</SkillsSectionName>}\n  >\n    <CV.Skills>\n      {{\n        \"HustleScript\": \"very good\",\n        \"NoScript\":     \"good\",\n        \"Fortran\":      \"basic\",\n      }}\n    </CV.Skills>\n  </CV.Section>\n\n  <CV.Section\n    left={<SkillsSectionName>Frameworks</SkillsSectionName>}\n  >\n    <CV.Skills>\n      {{\n        \"Reenact\": \"very good\",\n      }}\n    </CV.Skills>\n  </CV.Section>\n\n  <CV.Section\n    left={<SkillsSectionName>Tools</SkillsSectionName>}\n  >\n    <CV.Skills>\n      {{\n        \"Computers\":   \"very good\",\n        \"SolutionSQL\": \"good\",\n        \"Scissors\":    \"basic\",\n      }}\n    </CV.Skills>\n  </CV.Section>\n</>"}}},{"id":55,"name":"links","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Link({ name, link, description }) {\n  return (\n    <CV.Section>\n      <h3 className=\"text-lg leading-tight\">\n        <a href={link}>{name}</a>\n      </h3>\n      \n      <a className={`leading-tight text-${Style.colors.gray}`} href={link}>\n        {link}\n      </a>\n      \n      {description &&\n        <p className=\"mt-2\">\n          {description}\n        </p>\n      }\n    </CV.Section>\n  )\n}\n\n<>\n  <CV.SectionHeader>Links</CV.SectionHeader>\n  \n  <Link\n    name=\"Satisfaction Tracker\"\n    link=\"https://satisfaction.tracker/\"\n    description={<>\n      Tracks customers' satisfaction\n    </>}\n    />\n\n  <Link\n    name=\"HubofGit Profile\"\n    link=\"https://hubof.git/janedoe/\"\n    />\n</>"}}},{"id":24,"name":"education","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<>\n  <CV.SectionHeader breakPage>Education</CV.SectionHeader>\n  \n  <CV.Section\n    left={<CV.ClosedPeriod start=\"2000\" end=\"2010\" />}\n  >\n    <h3 className=\"text-lg leading-7\">\n      Master of Solutions in Complicated Problems\n    </h3>\n    \n    <p className={`leading-7 text-${Style.colors.gray}`}>\n      Research Institute of Technology\n    </p>\n    \n    <p className=\"mt-2\">\n      Thesis: Optimizating Solutions with tight time constraints\n    </p>\n  </CV.Section>\n  \n  <CV.Section\n    left={<CV.PeriodYear year=\"1999\" />}\n  >\n    <h3 className=\"text-lg leading-7\">\n      High School\n    </h3>\n    \n    <p className={`leading-7 text-${Style.colors.gray}`}>\n      WorksTown High School\n    </p>\n  </CV.Section>\n</>"}}},{"id":26,"name":"engagement","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<>\n  <CV.SectionHeader>Engagement</CV.SectionHeader>\n  \n  <CV.Section\n    left={<CV.ClosedPeriod start=\"2000\" end=\"2010\" />}\n  >\n    <h3 className=\"text-lg leading-7\">\n      Volunteering at DoGood\n    </h3>\n    \n    <p className={`leading-7 text-${Style.colors.gray}`}>\n      Helped people\n    </p>\n  </CV.Section>\n\n  <CV.Section\n    left={<CV.ClosedPeriod start=\"2012\" end=\"2014\" />}\n  >\n    <h3 className=\"text-lg leading-7\">\n      Volunteering at AwesomeHelp\n    </h3>\n    \n    <p className={`leading-7 text-${Style.colors.gray}`}>\n      Organized support groups\n    </p>\n  </CV.Section>\n</>"}}},{"id":30,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":32,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# CV Short","note":{"type":"text","tag":"h1","text":"CV Short"}}},{"id":39,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<CV.Document>\n  <main className={`font-['Arial'] mx-20 mb-28 text-${Style.colors.black}`}>  \n    <CV.PageMargin bottom=\"2cm\">\n      {header}\n      \n      {experience}\n      \n      {skills}\n      \n      {links}\n            \n    </CV.PageMargin>\n  </main>\n\n  <CV.Footer address={addressLong} phone={phone} email={email} />\n</CV.Document>"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# CV Long","note":{"type":"text","tag":"h1","text":"CV Long"}}},{"id":28,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<CV.Document>\n  <main className={`font-['Arial'] mx-20 mb-28 text-${Style.colors.black}`}>  \n    <CV.PageMargin bottom=\"2cm\">\n      {header}\n      \n      {experience}\n      \n      {skills}\n      \n      {links}\n      \n      {education}\n      \n      {engagement}\n      \n    </CV.PageMargin>\n  </main>\n\n  <CV.Footer address={addressLong} phone={phone} email={email} />\n</CV.Document>"}}}]}},"isCollapsed":true,"children":[{"id":2,"name":"Style","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Style","note":{"type":"text","tag":"h1","text":"Style"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Colors","note":{"type":"text","tag":"h4","text":"Colors"}}},{"id":1,"name":"colors","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// Colors are tailwind.css colors\n//  declare custom colors as '[<css-color>]', eg. '[#636062]'\n({\n  primary: 'sky-700',\n  primaryLight: 'sky-500',\n  gray: 'slate-500',\n  grayDark: 'slate-700',\n  grayLight: 'slate-400',\n  black: 'slate-900',\n})"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Sizes","note":{"type":"text","tag":"h4","text":"Sizes"}}},{"id":2,"name":"sizes","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"({\n  leftCol: \"[125px]\",\n})"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"export","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { colors, sizes }","note":{"type":"expr","code":" { colors, sizes }"}}}]}},"isCollapsed":false,"children":[]},{"id":1,"name":"Components","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#Components","note":{"type":"text","tag":"h1","text":"Components"}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### General Components to create Documents","note":{"type":"text","tag":"h4","text":"General Components to create Documents"}}},{"id":1,"name":"Document","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function renderDocument(content) {\n  return ReactDomServer.renderToString(\n      <html>\n        <head>\n          <style>{`\n            @page {\n              margin: 2cm 0 0 0;\n            }\n          `}</style>\n          <script src=\"https://cdn.tailwindcss.com\" />\n        </head>\n        <body className=\"bg-white mt-14 print:mt-0\">\n          {content}\n        </body>\n      </html>\n    )\n}\n  \nfunction Document({children}) {\n  const iframeRef = React.useRef()\n  \n  function print() {\n    iframeRef.current?.contentWindow?.print()\n  }\n  \n  return (\n    <div className=\"space-y-2\">\n      <div className=\"w-full overflow-x-auto\">\n        <iframe\n          ref={iframeRef}\n          className=\"border h-screen w-full min-w-[768px]\"\n          srcDoc={renderDocument(children)}\n          />\n      </div>\n      <button\n        className=\"w-full px-3 py-1 rounded bg-blue-100 hover:bg-blue-200\"\n        onClick={print}\n      >\n        Print\n      </button>\n    </div>\n  )\n}"}}},{"id":2,"name":"PageMargin","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function PageMargin({ top = 0, bottom = 0, children }) {\n  // Workaround to get margins on every page while still being able\n  // to create fixed content inside the margins (footers/headers)\n  return (\n    <table>\n      <thead className={`h-[${top}]`} />\n      <tbody>\n        <tr>\n          <td>{children}</td>\n        </tr>\n      </tbody>\n      <tfoot className={`h-[${bottom}]`} />\n    </table>\n  )\n}"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Header / Footer","note":{"type":"text","tag":"h4","text":"Header / Footer"}}},{"id":7,"name":"Header","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Header({ name, description, contact }) {\n  return (\n    <>\n      <div className=\"flex mb-8 justify-between items-start\">\n        <div>\n          <h1 className={`font-bold text-4xl text-${Style.colors.primary} leading-normal`}>\n            {name}\n          </h1>\n          <span className={`text-xl italic text-${Style.colors.gray}`}>\n            Curriculum Vitae\n          </span>\n        </div>\n  \n        {/* Contact info right */}\n        <address className={`leading-relaxed not-italic flex-end text-right text-${Style.colors.gray}`}>\n          {contact}\n        </address>\n      </div>\n      \n      <div className=\"my-8 px-6 italic font-light leading-tight\">\n        {description}\n      </div>\n\n    </>\n  )\n}"}}},{"id":8,"name":"Footer","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Footer({ address, phone, email }) {\n  return (\n    <footer\n      className={`\n        fixed bottom-0 inset-x-0 px-10 py-4\n        bg-${Style.colors.grayDark}\n        font-['Arial'] text-white\n        flex flex-row justify-between items-baseline space-x-6\n      `}\n    >\n      <address className=\"not-italic\">\n        {address}\n      </address>\n      <address className=\"not-italic text-nowrap\">\n        {phone}\n      </address>\n      <address className=\"not-italic\">\n        {email}\n      </address>\n    </footer>\n  )\n}"}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":28,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Section Layout","note":{"type":"text","tag":"h4","text":"Section Layout"}}},{"id":26,"name":"SectionHeader","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function SectionHeader({ breakPage = false, children }) {\n  const line = (\n    <div className={`\n      inline-block mr-4 my-1 h-1.5 w-${Style.sizes.leftCol}\n      bg-${Style.colors.primaryLight}\n    `} />\n  )\n\n  return (\n    <h2 className={`\n      text-xl text-${Style.colors.primary} leading-normal\n      mt-16 mb-4 break-after-avoid-page\n      ${breakPage && 'break-before-page print:mt-4'}\n    `}>\n      {line}\n      {children}\n    </h2>\n  )\n}"}}},{"id":27,"name":"Section","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Section({ left, children }) {\n  return (\n    <section className=\"flex flex-row my-8 space-x-4 items-baseline break-inside-avoid-page\">\n      <div className={`shrink-0 w-${Style.sizes.leftCol} text-right`}>\n        {left}\n      </div>\n      \n      <div>\n        {children}\n      </div>\n    </section>\n  )\n}"}}},{"id":30,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Skills","note":{"type":"text","tag":"h4","text":"Skills"}}},{"id":33,"name":"TBody","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function TBody({ children, className, trClass, tdClass }) {\n  return (\n    <tbody className={className}>\n      {children.map((row, y) => (\n        <tr key={y} className={trClass}>\n          {row.map((cell, x) => (\n            <td key={x} className={tdClass}>\n              {cell}\n            </td>\n          ))}\n        </tr>\n      ))}\n    </tbody>\n  )\n}"}}},{"id":36,"name":"Skills","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Skills({ children }) {\n  return (\n    <table className=\"break-inside-avoid-page\">\n      <TBody trClass=\"align-baseline\" tdClass=\"min-w-24\">\n        {Object.entries(children)\n          .map(([topic, desc]) => [\n            topic,\n            <span className={`ml-6 text-${Style.colors.gray}`}>\n              {desc}\n            </span>,\n          ])\n        }\n      </TBody>\n    </table>\n  )\n}"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Experience","note":{"type":"text","tag":"h4","text":"Experience"}}},{"id":32,"name":"Experience","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Experience({ period, title, company, role, description, tech, hide = false }) {\n  if (hide) { return null }\n  return (\n    <Section left={period}>\n      <h3 className=\"text-lg leading-7\">\n        {title} {}\n        {company &&\n          <span className={`text-base ml-4 text-${Style.colors.gray}`}>\n            <span className={`text-sm mr-0.5 text-${Style.colors.grayLight}`}>at</span> {}\n            {company}\n          </span>\n        }\n      </h3>\n      \n      <p className=\"leading-7\">\n        <span className={`text-${Style.colors.gray}`}>Role:</span> {role}\n      </p>\n      \n      <div className=\"my-3\">\n        {description}\n      </div>\n      \n      <p className={`text-${Style.colors.gray}`}>\n        Technologies: {tech}\n      </p>\n    </Section>\n  )\n}"}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Periods","note":{"type":"text","tag":"h4","text":"Periods"}}},{"id":9,"name":"ClosedPeriod","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function ClosedPeriod({ start, end }) {\n  return (\n    <p className=\"text-lg leading-7\">\n      <span className={`text-${Style.colors.gray} mr-1`}>from</span> {start}\n      <br/>\n      <span className={`text-${Style.colors.gray} mr-1`}>until</span> {end}\n    </p>\n  )\n}"}}},{"id":10,"name":"OpenPeriod","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function OpenPeriod({ start }) {\n  return (\n    <p className=\"text-lg leading-7\">\n      <span className={`text-${Style.colors.gray} mr-1`}>since</span> {start}\n    </p>\n  )\n}"}}},{"id":11,"name":"PeriodYear","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function PeriodYear({ year }) {\n  return (\n    <p className=\"text-lg leading-7\">\n      <span className={`text-${Style.colors.gray} mr-1`}>in</span> {year}\n    </p>\n  )\n}"}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { Document, PageMargin, Header, Footer, ClosedPeriod, OpenPeriod, PeriodYear, SectionHeader, Section, Experience, TBody, Skills }","note":{"type":"expr","code":" { Document, PageMargin, Header, Footer, ClosedPeriod, OpenPeriod, PeriodYear, SectionHeader, Section, Experience, TBody, Skills }"}}}]}},"isCollapsed":false,"children":[]}]},{"id":3,"name":"Invoice","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Invoice","note":{"type":"text","tag":"h1","text":"Invoice"}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Load a working hours export (from atWork) and generate an invoice.","note":{"type":"text","tag":"p","text":"Load a working hours export (from atWork) and generate an invoice."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Load and Parse CSV","note":{"type":"text","tag":"h2","text":"Load and Parse CSV"}}},{"id":4,"name":"atWorkExportFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"RWludHLDpGdlOzs7CkJlZ2lubjtFbmRlO1BhdXNlO0RhdWVyCjA0LjEyLjIwMjMgMDk6MjY7MDQuMTIuMjAyMyAxNTowOTsiMSwxODMiOyI0LDUzMyIKMDUuMTIuMjAyMyAwOTo1MzswNS4xMi4yMDIzIDIwOjE2OyIzLDAzMyI7IjcsMzUiCjA2LjEyLjIwMjMgMTQ6NTY7MDYuMTIuMjAyMyAyMjozMzsiMCw5NjciOyI2LDY1IgowOC4xMi4yMDIzIDEyOjA2OzA4LjEyLjIwMjMgMjE6MDA7IjEsNzUiOyI3LDE1IgoxMi4xMi4yMDIzIDEwOjI2OzEyLjEyLjIwMjMgMTE6MzE7OyIxLDA4MyIKMTMuMTIuMjAyMyAwOTo0NDsxMy4xMi4yMDIzIDEyOjU0OyIwLDUiOyIyLDY2NyIKMTMuMTIuMjAyMyAyMDo0NTsxMy4xMi4yMDIzIDIyOjE1OzsiMSw1IgoxNC4xMi4yMDIzIDE2OjM4OzE0LjEyLjIwMjMgMTc6MDU7OyIwLDQ1IgoxNS4xMi4yMDIzIDEyOjMwOzE1LjEyLjIwMjMgMTg6NDU7IjAsNzY3IjsiNSw0ODMiCjE4LjEyLjIwMjMgMDg6Mjc7MTguMTIuMjAyMyAxMjoyNjs7IjMsOTgzIgoxOS4xMi4yMDIzIDE0OjQwOzE5LjEyLjIwMjMgMTg6MTg7OyIzLDYzMyIKMjAuMTIuMjAyMyAwODozNDsyMC4xMi4yMDIzIDE0OjM0OyIwLDQ4MyI7IjUsNTE3IgoyMS4xMi4yMDIzIDE1OjMwOzIxLjEyLjIwMjMgMjM6MDY7MjsiNSw2Igo7OzsK","name":"numbers-export-atwork-2024-04-03-12_21_50.csv","options":{"type":"text/csv","lastModified":1712139710000}}}}}},{"id":7,"name":"atWorkExportParsed","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= libs.papaparse.parse(await atWorkExportFile.text())","note":{"type":"expr","code":" libs.papaparse.parse(await atWorkExportFile.text())"}}},{"id":8,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <reactInspector.TableInspector data={atWorkExportParsed.data} />","note":{"type":"expr","code":" <reactInspector.TableInspector data={atWorkExportParsed.data} />"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Convert and Process Data","note":{"type":"text","tag":"h2","text":"Convert and Process Data"}}},{"id":10,"name":"entriesRaw","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= atWorkExportParsed.data.slice(2, -2)","note":{"type":"expr","code":" atWorkExportParsed.data.slice(2, -2)"}}},{"id":45,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <reactInspector.TableInspector data={entriesRaw} />","note":{"type":"expr","code":" <reactInspector.TableInspector data={entriesRaw} />"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"workingIntervals","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const parseDate = utils.localized.de.dateParser({ date: 'medium' })\nconst parseTime = utils.localized.de.dateParser({ time: 'short' })\n\nfunction parseDatetime(str) {\n  const [dateStr, timeStr] = str.split(' ')\n  const date = parseDate(dateStr)\n  const time = parseTime(timeStr)\n  return utils.combineDateTime(date, time)\n}\n\nconst parseNumber = utils.localized.de.numberParser()\n\nentriesRaw\n  .map(\n    ([start, end, pause, duration]) => {\n      const turnoverNum = utils.cldr\n      return {\n        start: parseDatetime(start),\n        end: parseDatetime(end),\n        pauseHours: pause ? parseNumber(pause) : 0,\n        workingHours: parseNumber(duration),\n      }\n    }\n  )"}}},{"id":11,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <reactInspector.TableInspector data={workingIntervals} />","note":{"type":"expr","code":" <reactInspector.TableInspector data={workingIntervals} />"}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":30,"name":"workingHoursBy","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function workingHoursBy(dateGroup) {\n  return lodash.chain(workingIntervals)\n    .map(workingInterval => ({\n      ...workingInterval,\n      timestamp: dateGroup(workingInterval).getTime(),\n    }))\n    .groupBy('timestamp')\n    .mapValues(group => ({\n      workingHours: lodash.sumBy(group, 'workingHours'),\n      pauseHours: lodash.sumBy(group, 'pauseHours'),\n    }))\n    .map((workingInterval, timestamp) => ({\n      date: new Date(Number(timestamp)),\n      ...workingInterval,\n    }))\n    .value()\n}"}}},{"id":48,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Graphs","note":{"type":"text","tag":"h2","text":"Graphs"}}},{"id":23,"name":"formatDuration","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= duration => `${Math.trunc(duration)}:${String(Math.round(duration * 60 % 60)).padStart(2, '0')}`","note":{"type":"expr","code":" duration => `${Math.trunc(duration)}:${String(Math.round(duration * 60 % 60)).padStart(2, '0')}`"}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Working Hours by Day","note":{"type":"text","tag":"h3","text":"Working Hours by Day"}}},{"id":49,"name":"formatDateDay","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= date => libs.datefns.format(date, \"dd.LL.uu\")","note":{"type":"expr","code":" date => libs.datefns.format(date, \"dd.LL.uu\")"}}},{"id":50,"name":"workingHoursByDay","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= workingHoursBy(({ start }) => libs.datefns.startOfDay(start))","note":{"type":"expr","code":" workingHoursBy(({ start }) => libs.datefns.startOfDay(start))"}}},{"id":32,"name":"workingHoursByDayChart","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip } = libs.recharts;\n\n<ResponsiveContainer height={300}>\n  <BarChart data={workingHoursByDay}>\n    <Tooltip formatter={formatDuration} labelFormatter={formatDateDay} />\n    <Bar type=\"monotone\" dataKey=\"workingHours\" stackId=\"\" fill=\"#93bc60\" />\n    <Bar type=\"monotone\" dataKey=\"pauseHours\" stackId=\"\" fill=\"orange\" />\n    <XAxis dataKey=\"date\" tickFormatter={formatDateDay} />\n    <YAxis tickFormatter={formatDuration} width={80} />\n  </BarChart>\n</ResponsiveContainer>"}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Working Hours by Month","note":{"type":"text","tag":"h3","text":"Working Hours by Month"}}},{"id":52,"name":"formatDateMonth","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= date => libs.datefns.format(date, \"LLL uu\")","note":{"type":"expr","code":" date => libs.datefns.format(date, \"LLL uu\")"}}},{"id":53,"name":"workingHoursByMonth","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= workingHoursBy(({ start }) => libs.datefns.startOfMonth(start))","note":{"type":"expr","code":" workingHoursBy(({ start }) => libs.datefns.startOfMonth(start))"}}},{"id":54,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip } = libs.recharts;\n\n<ResponsiveContainer height={300}>\n  <BarChart data={workingHoursByMonth}>\n    <Tooltip formatter={formatDuration} labelFormatter={formatDateMonth} />\n    <Bar type=\"monotone\" dataKey=\"workingHours\" stackId=\"\" fill=\"#93bc60\" />\n    <XAxis dataKey=\"date\" tickFormatter={formatDateMonth} />\n    <YAxis tickFormatter={formatDuration} width={80} />\n  </BarChart>\n</ResponsiveContainer>"}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Invoice","note":{"type":"text","tag":"h2","text":"Invoice"}}},{"id":58,"name":"hourlyWage","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 75","note":{"type":"expr","code":" 75"}}},{"id":73,"name":"taxRate","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 0.19","note":{"type":"expr","code":" 0.19"}}},{"id":74,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":59,"name":"invoiceData","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/blocks.JSExpr","note":{"type":"block","isInstantiated":true,"code":"blocks.JSExpr","state":"workingHoursByDay\n  .map(entry => ({\n    ...entry,\n    workingHoursRound: utils.roundOn(entry.workingHours, 0.25),\n  }))\n  .map(entry => ({\n    ...entry,\n    price: utils.roundOn(entry.workingHoursRound * hourlyWage, 0.01),\n  }))"}}},{"id":75,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":62,"name":"invoiceSum","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.sumBy(invoiceData, 'price')","note":{"type":"expr","code":" lodash.sumBy(invoiceData, 'price')"}}},{"id":63,"name":"invoiceTaxes","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= utils.roundOn(invoiceSum * taxRate, 0.01)","note":{"type":"expr","code":" utils.roundOn(invoiceSum * taxRate, 0.01)"}}},{"id":64,"name":"invoiceTotal","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= utils.roundOn(invoiceSum + invoiceTaxes, 0.01)","note":{"type":"expr","code":" utils.roundOn(invoiceSum + invoiceTaxes, 0.01)"}}},{"id":70,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":71,"name":"locale","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"en\"","note":{"type":"expr","code":" \"en\""}}},{"id":72,"name":"currency","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= \"USD\"","note":{"type":"expr","code":" \"USD\""}}},{"id":76,"name":"fmt","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/blocks.JSExpr","note":{"type":"block","isInstantiated":true,"code":"blocks.JSExpr","state":"({\n  currency: Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency,\n  }),\n  date: Intl.DateTimeFormat(locale, {\n    dateStyle: 'short',\n  }), \n  percent: Intl.NumberFormat(locale, {\n    style: 'percent',\n  }),\n})"}}},{"id":77,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":57,"name":"invoiceTable","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<table className=\"w-full\">\n  <thead className=\"font-bold bg-sky-100\">\n    <tr>\n      <th className=\"p-2 text-left\">Project</th>\n      <th className=\"p-2 text-center w-28\">Date</th>\n      <th className=\"p-2 text-right w-40\">Working Hours</th>\n      <th className=\"p-2 text-right w-28\">Price</th>\n    </tr>\n  </thead>\n  \n  {/*\n    \"Padding\" at the table bottom, so the content doesn't hide\n    below the footer when printing.\n  */}\n  <tfoot className=\"hidden print:table-footer-group\">\n    <tr className=\"h-28\"><td/></tr>\n  </tfoot>\n\n  <tbody>\n    {invoiceData.map(({ date, workingHoursRound, price }) => (\n      <tr className=\"even:bg-slate-100\">\n        <td className=\"px-2 py-1.5\">\n          BuildTheFuture\n        </td>\n        <td className=\"px-2 py-1.5 text-center\">\n          {fmt.date.format(date)}\n        </td>\n        <td className=\"px-2 py-1.5 text-right\">\n          {formatDuration(workingHoursRound)} h\n        </td>\n        <td className=\"px-2 py-1.5 text-right\">\n          {fmt.currency.format(price)}\n        </td>\n      </tr>\n    ))}\n    \n    {/*\n      Footer not in <tfoot> because otherwise\n      it get's repeated on every printed page\n    */}\n    <tr className=\"font-medium bg-sky-100 border-t-2 border-white break-before-avoid-page\">\n      <td colspan={3} className=\"p-2 text-right\">\n        Sum\n      </td>\n      <td className=\"p-2 text-right\">\n        {fmt.currency.format(invoiceSum)}\n      </td>\n    </tr>\n    <tr className=\"font-medium bg-sky-100 border-t-2 border-white break-before-avoid-page\">\n      <td colSpan={3} className=\"p-2 text-right\">\n        {fmt.percent.format(taxRate)} Taxes\n      </td>\n      <td className=\"p-2 text-right\">\n        {fmt.currency.format(invoiceTaxes)}\n      </td>\n    </tr>\n    <tr className=\"font-bold bg-sky-100 border-t-2 border-white break-before-avoid-page\">\n      <td colSpan={3} className=\"p-2 text-right\">\n        Total\n      </td>\n      <td className=\"p-2 text-right\">\n        {fmt.currency.format(invoiceTotal)}\n      </td>\n    </tr>\n  </tbody>\n</table>"}}},{"id":65,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":66,"name":"Document","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function renderDocument(content) {\n  return ReactDomServer.renderToString(\n      <html>\n        <head>\n          <style>{`\n            @page {\n              margin: 2cm 0 0 0;\n            }\n          `}</style>\n          <script src=\"https://cdn.tailwindcss.com\" />\n        </head>\n        <body className=\"bg-white\">\n          {content}\n        </body>\n      </html>\n    )\n}\n  \nfunction Document({children}) {\n  const iframeRef = React.useRef()\n  \n  function onPrintIframe() {\n    iframeRef.current?.contentWindow?.print()\n  }\n  \n  return (\n    <div className=\"flex flex-col items-stretch space-y-2\">\n      <div className=\"overflow-x-auto\">\n        <iframe\n          ref={iframeRef}\n          className=\"border min-w-[768px]\"\n          height=\"1200\"\n          srcDoc={renderDocument(children)}\n          />\n      </div>\n      <button\n        className=\"px-3 py-1 rounded bg-blue-100 hover:bg-blue-200\"\n        onClick={() => onPrintIframe()}\n      >\n        Print\n      </button>\n    </div>\n  )\n}"}}},{"id":68,"name":"invoiceDocument","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const invoiceDate = new Date();\nconst invoiceMonth = libs.datefns.formatDate(invoiceDate, \"yyyy-MM\");\nconst invoiceNo = `${invoiceMonth}-01`;\n\nconst senderName = \"Jane Doe\";\nconst senderDescription = \"PrettyGoodSolutions Consultant\";\nconst senderAddress = [\n  senderName,\n  \"Doesit Street 13\",\n  \"12345 WorksTown\",\n];\nconst senderContact = [\n  \"+00 123 456789\",\n  \"jane.doe@prettygood.solutions\",\n];\nconst senderBank = <>\n  BestBank Inc.<br/>\n  IBAN: DE42 1337 1234 7654 8989 00\n</>;\n\nconst receiverAddress = <>\n  BigCorp Inc.<br/>\n  Large Street 123<br/>\n  99999 MegaCity\n</>;\n\n\n<Document>\n  <main className=\"font-['Arial'] mx-20 mb-28\">\n  \n    {/* Header top right with name and description */}\n    <h1\n      className=\"font-bold text-4xl text-right text-sky-700 leading-normal\"\n    >\n      {senderName}\n    </h1>\n    <div className=\"text-right text-slate-800\">\n      {senderDescription}\n    </div>\n    \n    \n    <div className=\"flex my-12\">\n      {/* Adress sender and receiver left */}\n      <div className=\"flex-1 space-y-2\">\n        <address className=\"text-xs not-italic text-sky-700\">\n          {senderAddress.flatMap(field => [\"•\", field]).slice(1).join(\" \")}\n        </address>\n        <address className=\"leading-tight not-italic\">\n          {receiverAddress}\n        </address>\n      </div>\n      \n      {/* Contact details right */}\n      <address\n        className=\"leading-tight not-italic flex-end text-right text-sm\"\n      >\n        {senderAddress.flatMap(field => [field, <br/>])}\n        <br/>\n        {senderContact.flatMap(field => [field, <br/>])}\n      </address>\n    </div>\n    \n    \n    {/* Message Header */}\n    <h2 className=\"font-bold text-xl text-sky-700 leading-normal\">\n      Invoice\n    </h2>\n    <h3 className=\"flex justify-between leading-normal mt-1 mb-5\">\n      <span>InvoiceNo: {invoiceNo}</span>\n      <span>{fmt.date.format(invoiceDate)}</span>\n    </h3>\n    \n    \n    {/* Message Content */}\n    <article>\n      {invoiceTable}\n    </article>\n    \n  </main>\n  \n  {/* Footer */}\n  <footer\n    className={`\n      fixed bottom-0 h-24 w-screen px-20 py-2\n      bg-slate-600\n      font-['Arial'] text-sm text-white\n      flex flex-row justify-between items-start\n    `}\n  >\n    <div>\n      {senderDescription}<br/>\n      {senderName}\n    </div>\n    <address className=\"not-italic\">\n      {senderBank}\n    </address>\n  </footer>\n</Document>"}}},{"id":78,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":69,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"**Note**: When printing make sure to fiddle with the printing settings: Enable backgrounds and disable the header and footer added by the browser. Printing in Chromium-based browsers works best.","note":{"type":"text","tag":"p","text":"**Note**: When printing make sure to fiddle with the printing settings: Enable backgrounds and disable the header and footer added by the browser. Printing in Chromium-based browsers works best."}}},{"id":79,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":81,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":84,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":85,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":86,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":87,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":82,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":83,"name":"preview","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"<div>\n<h3 className=\"text-xl mt-4 mb-2\">atWork CSV Export</h3>\n<reactInspector.TableInspector data={entriesRaw} />\n\n<h3 className=\"text-xl mt-4 mb-2\">Working Hours</h3>\n{workingHoursByDayChart}\n\n<h3 className=\"text-xl mt-4 mb-2\">Invoice</h3>\n{invoiceDocument}\n</div>"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"libs","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function esmsh(lib) {\n  return import(`https://esm.sh/${lib}?external=react`)\n}\n\nasync function esmshDefault(lib) {\n  return (await esmsh(lib)).default\n}\n\nasync function esmshJson(file) {\n  return (await fetch(`https://esm.sh/${file}`)).json()\n}\n\nasync function awaitValues(obj) {\n  return (\n    lodash.zipObject(\n      Object.keys(obj),\n      await Promise.all(Object.values(obj)),\n    )\n  )\n}\n\nawaitValues({\n  papaparse: esmshDefault('papaparse'),\n  datefns: esmsh('date-fns'),\n  numeral: esmshDefault('numeral'),\n  globalize: esmshDefault('globalize'),\n  \n  // see what's available at: https://github.com/unicode-org/cldr-json/tree/main/cldr-json\n  // see what you need at: http://johnnyreilly.github.io/globalize-so-what-cha-want/\n  cldr: Promise.all([\n    esmshJson('cldr-core/supplemental/likelySubtags.json'),\n    esmshJson('cldr-numbers-modern/main/de/numbers.json'),\n    esmshJson('cldr-core/supplemental/numberingSystems.json'),\n    esmshJson('cldr-dates-modern/main/de/ca-gregorian.json'),\n    esmshJson('cldr-dates-modern/main/de/timeZoneNames.json'),\n    esmshJson('cldr-core/supplemental/timeData.json'),\n    esmshJson('cldr-core/supplemental/weekData.json'),\n  ]),\n  \n  recharts: esmsh('recharts'),\n  d3Scale: esmsh('d3-scale'),\n})"}}}]}},"isCollapsed":true,"children":[]},{"id":2,"name":"utils","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function scan(array, init, fn) {\n  const steps = []\n  array.reduce(\n    (acc, item) => {\n      const newAcc = fn(acc, item)\n      steps.push(newAcc)\n      return newAcc\n    },\n    init,\n  )\n  return steps\n}\n\nfunction addColumn(table, colName, colValues) {\n  return lodash.zipWith(\n    table,\n    colValues,\n    (row, col) => ({ ...row, [colName]: col }),\n  )\n}\n\nfunction timeScaleArgs(data, dataKey) {\n  const timeValues = data.map(row => row[dataKey].valueOf());\n  const scale = (\n    libs.d3Scale.scaleTime()\n      .domain([\n        Math.min(...timeValues),\n        Math.max(...timeValues),\n      ])\n  )\n  \n  return {\n    domain: scale.domain().map(date => date.valueOf()),\n    scale,\n    type: 'number',\n    ticks: scale.ticks(5).map(date => date.valueOf()),\n    data,\n    dataKey,\n  }\n}\n\nfunction combineDateTime(dateRef, timeRef) {\n  const date = libs.datefns.startOfDay(dateRef)\n  const timeInterval = libs.datefns.interval(\n    libs.datefns.startOfDay(timeRef),\n    timeRef,\n  )\n  return libs.datefns.add(date, libs.datefns.intervalToDuration(timeInterval))\n}\n\nfunction roundOn(num, step) {\n  if (step < 0) {\n    return Math.round(num * step) / step\n  }\n  else if (step < 1) {\n    const stepInv = 1 / step\n    const stepRound = Math.round(stepInv)\n    const stepClean = Math.abs(stepRound - stepInv) < 1e-10 ? stepRound : stepInv\n    return Math.round(num * stepClean) / stepClean\n  }\n  else {\n    return step * Math.round(num / step)\n  }\n}\n\nlibs.cldr.forEach(cldr => libs.globalize.load(cldr));\n\nreturn {\n  scan,\n  addColumn,\n  timeScaleArgs,\n  combineDateTime,\n  roundOn,\n  localized: {\n    de: libs.globalize('de'),\n  },\n}"}}}]}},"isCollapsed":true,"children":[]}]},{"id":6,"name":"Analyse JSON Size","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Analyse JSON Size","note":{"type":"text","tag":"h1","text":"Analyse JSON Size"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Analyse which part of a JSON file is huge.","note":{"type":"text","tag":"p","text":"Analyse which part of a JSON file is huge."}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Why not use https://www.debugbear.com/json-size-analyzer?","note":{"type":"text","tag":"p","text":"Why not use https://www.debugbear.com/json-size-analyzer?"}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"It doesn't seem fit to analyse large JSON structures with of tens of megabytes of data.","note":{"type":"text","tag":"p","text":"It doesn't seem fit to analyse large JSON structures with of tens of megabytes of data."}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Input","note":{"type":"text","tag":"h2","text":"Input"}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Either use the supplied example:","note":{"type":"text","tag":"p","text":"Either use the supplied example:"}}},{"id":45,"name":"response","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Deferred(() => fetch('https://raw.githubusercontent.com/keenbug/ReSheet/main/examples/huge.json'))","note":{"type":"block","isInstantiated":true,"code":"Deferred(() => fetch('https://raw.githubusercontent.com/keenbug/ReSheet/main/examples/huge.json'))","state":null}}},{"id":57,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"(You have to manually load the data first by clicking the button above. The file is ~25 MiB.)","note":{"type":"text","tag":"p","text":"(You have to manually load the data first by clicking the button above. The file is ~25 MiB.)"}}},{"id":46,"name":"jsonWeb","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= (await response).json()","note":{"type":"expr","code":" (await response).json()"}}},{"id":47,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":61,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Or load your own local file:","note":{"type":"text","tag":"p","text":"Or load your own local file:"}}},{"id":53,"name":"file","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"init"}}}},{"id":54,"name":"jsonLocal","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= JSON.parse(await file.text())","note":{"type":"expr","code":" JSON.parse(await file.text())"}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":62,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Change this if you want to use your local file instead:","note":{"type":"text","tag":"p","text":"Change this if you want to use your local file instead:"}}},{"id":48,"name":"json","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= jsonWeb // or jsonLocal","note":{"type":"expr","code":" jsonWeb // or jsonLocal"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"(Don't worry about the TypeErrors. When you load a file the corresponding errors go away.)","note":{"type":"text","tag":"p","text":"(Don't worry about the TypeErrors. When you load a file the corresponding errors go away.)"}}},{"id":60,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Analysis","note":{"type":"text","tag":"h2","text":"Analysis"}}},{"id":2,"name":"analyse","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function analyse(obj) {\n  return lodash.mapValues(obj, value => JSON.stringify(value).length)\n}"}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Edit this to drill down on the cause:","note":{"type":"text","tag":"p","text":"Edit this to drill down on the cause:"}}},{"id":4,"name":"part","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= json","note":{"type":"expr","code":" json"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"analysis","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= analyse(part)","note":{"type":"expr","code":" analyse(part)"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip } =\n  libs.recharts;\n  \nconst data = Object.entries(analysis)\n  .map(([key, size]) => ({ key, size }));\n\n<ResponsiveContainer height={400}>\n  <BarChart data={data}>\n    <Tooltip formatter={libs.humanFormat.bytes} />\n    <Bar type=\"monotone\" dataKey=\"size\" fill=\"#8884d8\" />\n    <XAxis dataKey=\"key\"/>\n    <YAxis width={100} tickFormatter={libs.humanFormat.bytes} />\n  </BarChart>\n</ResponsiveContainer>"}}},{"id":63,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Side note: These numbers are not exactly bytes, but rather characters (which can be larger than one byte). But most of the time bytes and characters are close enough, if not identical.","note":{"type":"text","tag":"p","text":"Side note: These numbers are not exactly bytes, but rather characters (which can be larger than one byte). But most of the time bytes and characters are close enough, if not identical."}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":64,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":65,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Result","note":{"type":"text","tag":"h2","text":"Result"}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The problem is `json.inner.pages[0].children[2].state.inner.lines[5].state.note.state.actions`.","note":{"type":"text","tag":"p","text":"The problem is `json.inner.pages[0].children[2].state.inner.lines[5].state.note.state.actions`."}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is part of the DemoRecorder. The DemoRecorder allows one to record a series of actions in a Block, which can then be replayed.","note":{"type":"text","tag":"p","text":"This is part of the DemoRecorder. The DemoRecorder allows one to record a series of actions in a Block, which can then be replayed."}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"For every action the resulting state is saved for two reasons:","note":{"type":"text","tag":"p","text":"For every action the resulting state is saved for two reasons:"}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"1) The saved state is used to verify nothing went wrong during playback.","note":{"type":"text","tag":"p","text":"1) The saved state is used to verify nothing went wrong during playback."}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"2) The saved state is used to quickly jump to a position in the recording during editing.","note":{"type":"text","tag":"p","text":"2) The saved state is used to quickly jump to a position in the recording during editing."}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Solution 1","note":{"type":"text","tag":"h3","text":"Solution 1"}}},{"id":28,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Can we omit the resulting state when saving the actions?","note":{"type":"text","tag":"p","text":"Can we omit the resulting state when saving the actions?"}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Regarding 2), yes we can. We are able to recreate the states when we start editing the recording.","note":{"type":"text","tag":"p","text":"Regarding 2), yes we can. We are able to recreate the states when we start editing the recording."}}},{"id":30,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Regarding 1), not without compromising functionality.","note":{"type":"text","tag":"p","text":"Regarding 1), not without compromising functionality."}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### What is the problem in case 1)?","note":{"type":"text","tag":"h4","text":"What is the problem in case 1)?"}}},{"id":32,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"To recreate the states we need to replay the recording. In case 2) the (human) editor should be able to spot problems during replay and is able to intervene. In case 1) recreating the states by replaying the recording counters its intention: The intention is to spot errors during replay by comparing the resulting state with the saved state.","note":{"type":"text","tag":"p","text":"To recreate the states we need to replay the recording. In case 2) the (human) editor should be able to spot problems during replay and is able to intervene. In case 1) recreating the states by replaying the recording counters its intention: The intention is to spot errors during replay by comparing the resulting state with the saved state."}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Solution 2","note":{"type":"text","tag":"h3","text":"Solution 2"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Can we otherwise reduce the size of the saved states?","note":{"type":"text","tag":"p","text":"Can we otherwise reduce the size of the saved states?"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"There are two other possible approaches:","note":{"type":"text","tag":"p","text":"There are two other possible approaches:"}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"1) Reduce the number of saved states.","note":{"type":"text","tag":"p","text":"1) Reduce the number of saved states."}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"2) Take advantage of shared common/identical parts between saved states.","note":{"type":"text","tag":"p","text":"2) Take advantage of shared common/identical parts between saved states."}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Regarding 1) We don't check every state during replay anyways. So this can be implemented safely.","note":{"type":"text","tag":"p","text":"Regarding 1) We don't check every state during replay anyways. So this can be implemented safely."}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Regarding 2) The question is, how do we want to implement that? Just `JSON.stringify` and compress (gzip/...) all actions? Or write a custom deduplicator?","note":{"type":"text","tag":"p","text":"Regarding 2) The question is, how do we want to implement that? Just `JSON.stringify` and compress (gzip/...) all actions? Or write a custom deduplicator?"}}},{"id":66,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":67,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":70,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":71,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":73,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":69,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":74,"name":"previewBlockTemplate","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(SheetOf(Note))","state":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Analyse JSON Size Preview","note":{"type":"text","tag":"h3","text":"Analyse JSON Size Preview"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We analyse some JSON data for its size.","note":{"type":"text","tag":"p","text":"We analyse some JSON data for its size."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":4,"name":"jsonFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"eyJoaXN0b3J5IjpbXSwiaW5uZXIiOnsidCI6InJlc2hlZXQuZG9jdW1lbnQiLCJ2IjoxLCJwYWdlcyI6W3siaWQiOjMsIm5hbWUiOiJHbG9iYWwiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBHbG9iYWwgVXRpbHMgYW5kIExpYnMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiR2xvYmFsIFV0aWxzIGFuZCBMaWJzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiVGhlc2UgYXJlIGxpYnMgYW5kIGhlbHBlcnMgdGhhdCB3aWxsIGJlIGF2YWlsYWJsZSBpbiBldmVyeSBwYWdlLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlRoZXNlIGFyZSBsaWJzIGFuZCBoZWxwZXJzIHRoYXQgd2lsbCBiZSBhdmFpbGFibGUgaW4gZXZlcnkgcGFnZS4ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjQsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAoeyBsaWJzLCB1dGlscywgYmxvY2tzIH0pIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgKHsgbGlicywgdXRpbHMsIGJsb2NrcyB9KSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W3siaWQiOjMsIm5hbWUiOiJsaWJzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIFBhcGEgUGFyc2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiUGFwYSBQYXJzZSJ9fX0seyJpZCI6MzksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL3d3dy5wYXBhcGFyc2UuY29tL2RvY3MiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJodHRwczovL3d3dy5wYXBhcGFyc2UuY29tL2RvY3MifX19LHsiaWQiOjYsIm5hbWUiOiJwYXBhcGFyc2UiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGVzbXNoRGVmYXVsdCgncGFwYXBhcnNlJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaERlZmF1bHQoJ3BhcGFwYXJzZScpIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBkYXRlLWZucyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJkYXRlLWZucyJ9fX0seyJpZCI6NDAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzLyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Imh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvIn19fSx7ImlkIjoxMywibmFtZSI6ImRhdGVmbnMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGVzbXNoKCdkYXRlLWZucycpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgZXNtc2goJ2RhdGUtZm5zJykifX19LHsiaWQiOjE4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxOSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIFJlY2hhcnRzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IlJlY2hhcnRzIn19fSx7ImlkIjo0MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Imh0dHBzOi8vcmVjaGFydHMub3JnL2VuLVVTL2FwaSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Imh0dHBzOi8vcmVjaGFydHMub3JnL2VuLVVTL2FwaSJ9fX0seyJpZCI6MjAsIm5hbWUiOiJyZWNoYXJ0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2goJ3JlY2hhcnRzJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaCgncmVjaGFydHMnKSJ9fX0seyJpZCI6MzAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjI4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRGlzdGluY3QgQ29sb3JzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkRpc3RpbmN0IENvbG9ycyJ9fX0seyJpZCI6NDIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJodHRwczovL2dpdGh1Yi5jb20vaW50ZXJuYWxmeC9kaXN0aW5jdC1jb2xvcnMjcmVhZG1lIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiaHR0cHM6Ly9naXRodWIuY29tL2ludGVybmFsZngvZGlzdGluY3QtY29sb3JzI3JlYWRtZSJ9fX0seyJpZCI6MjcsIm5hbWUiOiJkaXN0aW5jdENvbG9ycyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2hEZWZhdWx0KFwiZGlzdGluY3QtY29sb3JzXCIpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgZXNtc2hEZWZhdWx0KFwiZGlzdGluY3QtY29sb3JzXCIpIn19fSx7ImlkIjoyNSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MzUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBEYXRlcGlja2VyIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkRhdGVwaWNrZXIifX19LHsiaWQiOjM2LCJuYW1lIjoiRGF0ZXBpY2tlciIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZXNtc2hEZWZhdWx0KCdyZWFjdC1kYXRlcGlja2VyJykiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBlc21zaERlZmF1bHQoJ3JlYWN0LWRhdGVwaWNrZXInKSJ9fX0seyJpZCI6MzgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJlc21zaENzcygncmVhY3QtZGF0ZXBpY2tlci9kaXN0L3JlYWN0LWRhdGVwaWNrZXIuY3NzJykifX19LHsiaWQiOjM3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii0tLSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6Ii0tLSJ9fX0seyJpZCI6MjYsIm5hbWUiOiJleHBvcnRzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiKHtcbiAgcGFwYXBhcnNlLFxuICBkYXRlZm5zLFxuICByZWNoYXJ0cyxcbiAgZGlzdGluY3RDb2xvcnMsXG4gIERhdGVwaWNrZXIsXG4gIGxvYWQ6IHsgZXNtc2gsIGVzbXNoRGVmYXVsdCB9LFxufSkifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiZXNtc2giLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxLCJuYW1lIjoiZXNtc2giLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBlc21zaChsaWIpIHtcbiAgcmV0dXJuIGltcG9ydChgaHR0cHM6Ly9lc20uc2gvJHtsaWJ9P2V4dGVybmFsPXJlYWN0YClcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjoxLCJuYW1lIjoiZXNtc2hEZWZhdWx0Iiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MSwibmFtZSI6ImVzbXNoRGVmYXVsdCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImFzeW5jIGZ1bmN0aW9uIGVzbXNoRGVmYXVsdChsaWIpIHtcbiAgcmV0dXJuIChhd2FpdCBlc21zaChsaWIpKS5kZWZhdWx0XG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MywibmFtZSI6ImVzbXNoQ3NzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MSwibmFtZSI6ImNsZWFuSWQiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBjbGVhbklkKGlkKSB7XG4gIGlkID0gaWQucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xuICBpZCA9IGlkLnJlcGxhY2UoL1teXFx3XFxzLV0vZ2ksICcnKTtcbiAgXG4gIGlmICghL15bYS16QS1aX10vLnRlc3QoaWQpKSB7XG4gICAgaWQgPSAnXycgKyBpZDtcbiAgfVxuICBcbiAgcmV0dXJuIGlkLnRvTG93ZXJDYXNlKCk7XG59In19fSx7ImlkIjowLCJuYW1lIjoiZXNtc2hDc3MiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBlc21zaENzcyhmaWxlKSB7XG4gIGNvbnN0IGlkID0gY2xlYW5JZChmaWxlKVxuICBcbiAgY29uc3QgZm91bmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcbiAgaWYgKGZvdW5kKSB7IHJldHVybiBmb3VuZCB9XG5cbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKVxuICBsaW5rLmlkID0gaWRcbiAgbGluay5ocmVmID0gJ2h0dHBzOi8vZXNtLnNoLycgKyBmaWxlXG4gIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnXG4gIFxuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspXG4gIFxuICByZXR1cm4gbGlua1xufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119XX0seyJpZCI6MSwibmFtZSI6InV0aWxzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uKSB7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhkdXJhdGlvbilcbiAgY29uc3QgbWludXRlcyA9IE1hdGgucm91bmQoZHVyYXRpb24gKiA2MCAlIDYwKVxuICByZXR1cm4gYCR7aG91cnN9OiR7U3RyaW5nKG1pbnV0ZXMpLnBhZFN0YXJ0KDIsICcwJyl9YFxufVxuXG5mdW5jdGlvbiBsYWJlbGVyKC4uLmxhYmVscykge1xuICByZXR1cm4gdmFsdWVzID0+IE9iamVjdC5mcm9tRW50cmllcyhsb2Rhc2guemlwKGxhYmVscywgdmFsdWVzKSlcbn1cblxuZnVuY3Rpb24gcm91bmRPbihudW0sIHN0ZXApIHtcbiAgaWYgKHN0ZXAgPCAwKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogc3RlcCkgLyBzdGVwXG4gIH1cbiAgZWxzZSBpZiAoc3RlcCA8IDEpIHtcbiAgICBjb25zdCBzdGVwSW52ID0gMSAvIHN0ZXBcbiAgICBjb25zdCBzdGVwUm91bmQgPSBNYXRoLnJvdW5kKHN0ZXBJbnYpXG4gICAgY29uc3Qgc3RlcENsZWFuID0gTWF0aC5hYnMoc3RlcFJvdW5kIC0gc3RlcEludikgPCAxZS0xMCA/IHN0ZXBSb3VuZCA6IHN0ZXBJbnZcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBzdGVwQ2xlYW4pIC8gc3RlcENsZWFuXG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHN0ZXAgKiBNYXRoLnJvdW5kKG51bSAvIHN0ZXApXG4gIH1cbn1cblxucmV0dXJuIHtcbiAgZm9ybWF0RHVyYXRpb24sXG4gIGxhYmVsZXIsXG4gIHJvdW5kT24sXG4gIFxuICAuLi5jaGFydHMsXG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MCwibmFtZSI6ImNoYXJ0cyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIENoYXJ0IFV0aWxzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkNoYXJ0IFV0aWxzIn19fSx7ImlkIjoxLCJuYW1lIjoiUGllRExDIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgeyBQaWUsIENlbGwsIExhYmVsTGlzdCB9ID0gbGlicy5yZWNoYXJ0c1xuXG5mdW5jdGlvbiBQaWVETEMoeyBkYXRhLCBkYXRhS2V5LCBsYWJlbEtleSwgZm9ybWF0dGVyLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkge1xuICBjb25zdCBjb3VudCA9IGRhdGEubGVuZ3RoXG4gIGNvbnN0IGNvbG9ycyA9IGxpYnMuZGlzdGluY3RDb2xvcnMoeyBjb3VudCwgbGlnaHRNaW46IDM4LCBsaWdodE1heDogOTUgfSlcbiAgXG4gIHJldHVybiAoXG4gICAgPFBpZVxuICAgICAgZGF0YT17ZGF0YX1cbiAgICAgIGRhdGFLZXk9e2RhdGFLZXl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAge2RhdGEubWFwKChfLCBpbmRleCkgPT4gKFxuICAgICAgICA8Q2VsbCBrZXk9e2BjZWxsLSR7aW5kZXh9YH0gZmlsbD17Y29sb3JzW2luZGV4XS5oZXgoKX0gLz5cbiAgICAgICkpfVxuICAgICAgPExhYmVsTGlzdCBkYXRhS2V5PXtkYXRhS2V5fSBmb3JtYXR0ZXI9e2Zvcm1hdHRlcn0gcG9zaXRpb249XCJpbnNpZGVcIiBzdHJva2U9XCJub25lXCIgZmlsbD1cIndoaXRlXCIgLz5cbiAgICAgIDxMYWJlbExpc3QgZGF0YUtleT17bGFiZWxLZXl9IG9mZnNldD17MTB9IHBvc2l0aW9uPVwib3V0c2lkZVwiIHN0cm9rZT1cIm5vbmVcIiAvPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvUGllPlxuICApXG59In19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo0LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0geyBQaWVETEMgfSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIHsgUGllRExDIH0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19LHsiaWQiOjIsIm5hbWUiOiJibG9ja3MiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAoeyBTaW1wbGVCbG9jaywgU2VsZWN0LCBEYXRlIH0pIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgKHsgU2ltcGxlQmxvY2ssIFNlbGVjdCwgRGF0ZSB9KSJ9fX1dfX0sImlzQ29sbGFwc2VkIjpmYWxzZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiU2ltcGxlQmxvY2siLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiQ29kZSIsImlubmVyIjoiZnVuY3Rpb24gdXBkYXRlKHZhbHVlLCBwYXRoLCBmbikge1xuICBpZiAoIXBhdGggfHwgQXJyYXkuaXNBcnJheShwYXRoKSAmJiBwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmbih2YWx1ZSlcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gaW1tdXRhYmxlLnVwZGF0ZSh2YWx1ZSwgcGF0aCwgZm4pXG4gIH1cbn1cblxuZnVuY3Rpb24gU2ltcGxlQmxvY2soaW5pdCwgdmlldywgZGVzYz17fSkge1xuICByZXR1cm4gcmVzaGVldC5jb3JlLmJsb2NrLmNyZWF0ZSh7XG4gICAgaW5pdCxcbiAgICB2aWV3KHsgc3RhdGUsIGRpc3BhdGNoLCBlbnYgfSwgcmVmKSB7XG4gICAgICBmdW5jdGlvbiBzZXRTdGF0ZShuZXdTdGF0ZSwgcGF0aD1bXSkge1xuICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZSA9IChcbiAgICAgICAgICB0eXBlb2YgbmV3U3RhdGUgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgbmV3U3RhdGVcbiAgICAgICAgICA6XG4gICAgICAgICAgICAoKSA9PiBuZXdTdGF0ZVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBkaXNwYXRjaChzdGF0ZSA9PiAoe1xuICAgICAgICAgIHN0YXRlOiB1cGRhdGUoc3RhdGUsIHBhdGgsIHVwZGF0ZVN0YXRlKSxcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGZ1bmN0aW9uIG9uVXBkYXRlKGV2UGF0aCwgc3RhdGVQYXRoPVtdLCBwcm9jZXNzVmFsdWU9bG9kYXNoLmlkZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBldiA9PiB7XG4gICAgICAgICAgc2V0U3RhdGUocHJvY2Vzc1ZhbHVlKGxvZGFzaC5nZXQoZXYsIGV2UGF0aCkpLCBzdGF0ZVBhdGgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZnVuY3Rpb24gZmllbGREaXNwYXRjaGVyKGZpZWxkKSB7XG4gICAgICAgIHJldHVybiByZXNoZWV0LnV0aWwuZGlzcGF0Y2guZmllbGREaXNwYXRjaGVyKGZpZWxkLCBkaXNwYXRjaClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHZpZXcoe1xuICAgICAgICBzdGF0ZSwgZGlzcGF0Y2gsIGVudiwgcmVmLFxuICAgICAgICBzZXRTdGF0ZSwgb25VcGRhdGUsIGZpZWxkRGlzcGF0Y2hlcixcbiAgICAgIH0pXG4gICAgfSxcbiAgICBnZXRSZXN1bHQoc3RhdGUpIHsgcmV0dXJuIHN0YXRlIH0sXG4gICAgcmVjb21wdXRlKHN0YXRlKSB7IHJldHVybiB7IHN0YXRlLCBpbnZhbGlkYXRlZDogZmFsc2UgfSB9LFxuICAgIGZyb21KU09OKGpzb24pIHsgcmV0dXJuIGpzb24gPz8gaW5pdCB9LFxuICAgIHRvSlNPTihzdGF0ZSkgeyByZXR1cm4gc3RhdGUgfSxcbiAgICAuLi5kZXNjLFxuICB9KVxufSJ9LCJpc0NvbGxhcHNlZCI6ZmFsc2UsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IlNlbGVjdCIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiJTZWxlY3QiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJmdW5jdGlvbiBTZWxlY3QodmFsdWVzKSB7XG4gIHJldHVybiBTaW1wbGVCbG9jayh2YWx1ZXNbMF0sXG4gICAgKHsgcmVmLCBzdGF0ZSwgb25VcGRhdGUgfSkgPT4gKFxuICAgICAgPHNlbGVjdFxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgdmFsdWU9e3N0YXRlfVxuICAgICAgICBvbkNoYW5nZT17b25VcGRhdGUoJ3RhcmdldC52YWx1ZScpfVxuICAgICAgPlxuICAgICAgICB7dmFsdWVzLm1hcCh2YWx1ZSA9PiAoXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3ZhbHVlfSB2YWx1ZT17dmFsdWV9PlxuICAgICAgICAgICAge3ZhbHVlfVxuICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICApKX1cbiAgICAgIDwvc2VsZWN0PlxuICAgIClcbiAgKVxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjIsIm5hbWUiOiJEYXRlIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRGF0ZSBCbG9jayIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJEYXRlIEJsb2NrIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8bGlicy5EYXRlcGlja2VyIGlubGluZSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxsaWJzLkRhdGVwaWNrZXIgaW5saW5lIC8+In19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1LCJuYW1lIjoiRGF0ZUJsb2NrIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gRGF0ZUJsb2NrKGluaXQpIHtcbiAgcmV0dXJuIFNpbXBsZUJsb2NrKGluaXQgPz8gbmV3IERhdGUoKSxcbiAgICAoeyByZWYsIHN0YXRlLCBzZXRTdGF0ZSB9KSA9PiB7XG4gICAgICBjb25zdCBkaXZSZWYgPSBSZWFjdC51c2VSZWYoKVxuICAgICAgXG4gICAgICBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICAgICAgZGl2UmVmLmN1cnJlbnRcbiAgICAgICAgICA/LnF1ZXJ5U2VsZWN0b3IoJy5yZWFjdC1kYXRlcGlja2VyIFt0YWJpbmRleD1cIjBcIl0nKVxuICAgICAgICAgID8uZm9jdXMoKVxuICAgICAgfVxuXG4gICAgICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHsgZm9jdXMgfSksIFtdKVxuICAgICAgXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgcmVmPXtkaXZSZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgIG9uS2V5RG93bj17ZXYgPT4ge1xuICAgICAgICAgICAgaWYgKGV2LmtleSAhPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmb2N1cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGxpYnMuRGF0ZXBpY2tlclxuICAgICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICAgIHNlbGVjdGVkPXtzdGF0ZX1cbiAgICAgICAgICAgIG9uU2VsZWN0PXtkYXRlID0+IHNldFN0YXRlKGRhdGUpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB5LTEgaG92ZXI6YmctYmx1ZS01MFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFN0YXRlKG5ldyBEYXRlKCkpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBUb2RheVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9saWJzLkRhdGVwaWNrZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0sXG4gICAge1xuICAgICAgdG9KU09OKGRhdGUpIHsgcmV0dXJuIGxpYnMuZGF0ZWZucy5mb3JtYXRJU08oZGF0ZSkgfSxcbiAgICAgIGZyb21KU09OKGpzb24pIHsgcmV0dXJuIGxpYnMuZGF0ZWZucy5wYXJzZUlTTyhqc29uKSB9LFxuICAgIH0sXG4gIClcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6ZmFsc2UsImNoaWxkcmVuIjpbXX1dfV19LHsiaWQiOjUsIm5hbWUiOiJXb3JrIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgV29yayIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJXb3JrIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bFwiPkluY29tZSBhZnRlciBFeHBlbnNlczoge0ZpbmFuY2VzLnV0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhGaW5hbmNlcy5JbmNvbWUuYmFsYW5jZSkpKX08L3NwYW4+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bFwiPkluY29tZSBhZnRlciBFeHBlbnNlczoge0ZpbmFuY2VzLnV0aWxzLmZvcm1hdEN1cnJlbmN5KGxvZGFzaC5zdW0oT2JqZWN0LnZhbHVlcyhGaW5hbmNlcy5JbmNvbWUuYmFsYW5jZSkpKX08L3NwYW4+In19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgV29ya2luZyBIb3VycyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJXb3JraW5nIEhvdXJzIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gJGBXb3JraW5nIEhvdXJzYC5jaGFydHMubW9udGhzIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgJGBXb3JraW5nIEhvdXJzYC5jaGFydHMubW9udGhzIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgSW5jb21lIGFmdGVyIEV4cGVuc2VzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkluY29tZSBhZnRlciBFeHBlbnNlcyJ9fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IEZpbmFuY2VzLkluY29tZS5jaGFydCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIEZpbmFuY2VzLkluY29tZS5jaGFydCJ9fX1dfX0sImlzQ29sbGFwc2VkIjpmYWxzZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiQ29uZmlnIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgQ29uZmlnIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkNvbmZpZyJ9fX0seyJpZCI6MSwibmFtZSI6Im93bmVyIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgbmFtZSA9IFwiSmFuZSBEb2VcIjtcbmNvbnN0IGRlc2NyaXB0aW9uID0gXCJQcmV0dHlHb29kU29sdXRpb25zIENvbnN1bHRhbnRcIjtcbmNvbnN0IGFkZHJlc3MgPSBbXG4gIG5hbWUsXG4gIFwiRG9lc2l0IFN0cmVldCAxM1wiLFxuICBcIjEyMzQ1IFdvcmtzVG93blwiLFxuXTtcbmNvbnN0IGNvbnRhY3QgPSBbXG4gIFwiKzAwIDEyMyA0NTY3ODlcIixcbiAgXCJqYW5lLmRvZUBwcmV0dHlnb29kLnNvbHV0aW9uc1wiLFxuXTtcbmNvbnN0IGJhbmsgPSA8PlxuICBCZXN0QmFuayBJbmMuPGJyLz5cbiAgSUJBTjogREU0MiAxMzM3IDEyMzQgNzY1NCA4OTg5IDAwXG48Lz47XG5cbnJldHVybiB7IG5hbWUsIGRlc2NyaXB0aW9uLCBhZGRyZXNzLCBjb250YWN0LCBiYW5rIH0ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoe1xuICBvd25lcixcbn0pIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IldvcmtpbmcgSG91cnMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBXb3JraW5nIEhvdXJzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IldvcmtpbmcgSG91cnMifX19LHsiaWQiOjExLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiSG93IHRvIGFkZCBuZXcgZGF0YTogQWRkIHRoZSBtb250aGx5IGV4cG9ydCBmaWxlcyBmcm9tIEF0V29yayBpbiBcIkF0V29yayBJbXBvcnRzXCIgYW5kIGFsbCBjaGFydHMgaGVyZSBhdXRvbWF0aWNhbGx5IGdldCB1cGRhdGVkLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkhvdyB0byBhZGQgbmV3IGRhdGE6IEFkZCB0aGUgbW9udGhseSBleHBvcnQgZmlsZXMgZnJvbSBBdFdvcmsgaW4gXCJBdFdvcmsgSW1wb3J0c1wiIGFuZCBhbGwgY2hhcnRzIGhlcmUgYXV0b21hdGljYWxseSBnZXQgdXBkYXRlZC4ifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBCeSBXZWVrIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkJ5IFdlZWsifX19LHsiaWQiOjksIm5hbWUiOiJ3ZWVrcyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2goRGF0YSlcbiAgLm1hcChlbnRyeSA9PiAoe1xuICAgIHdlZWs6IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGVudHJ5LnN0YXJ0LCBcIidXJ0kgeXl5eVwiKSxcbiAgICAuLi5lbnRyeSxcbiAgfSkpXG4gIC5ncm91cEJ5KCd3ZWVrJylcbiAgLm1hcFZhbHVlcyhlbnRyaWVzID0+IGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykpXG4gIC52YWx1ZSgpIn19fSx7ImlkIjoxMCwibmFtZSI6IndlZWtzQ2hhcnQiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3Qge1xuICBSZXNwb25zaXZlQ29udGFpbmVyLFxuICBCYXJDaGFydCxcbiAgQmFyLFxuICBYQXhpcyxcbiAgWUF4aXMsXG4gIFRvb2x0aXAsXG59ID0gR2xvYmFsLmxpYnMucmVjaGFydHM7XG5cbmNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyh3ZWVrcykubWFwKEdsb2JhbC51dGlscy5sYWJlbGVyKCd3ZWVrJywgJ2hvdXJzJykpO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezMwMH0+XG4gIDxCYXJDaGFydCBkYXRhPXtkYXRhfT5cbiAgICA8VG9vbHRpcCBmb3JtYXR0ZXI9e0dsb2JhbC51dGlscy5mb3JtYXREdXJhdGlvbn0gLz5cbiAgICA8QmFyIHR5cGU9XCJtb25vdG9uZVwiIGRhdGFLZXk9XCJob3Vyc1wiIGZpbGw9XCIjOUREOUQyXCIgLz5cbiAgICA8WEF4aXMgZGF0YUtleT1cIndlZWtcIiAvPlxuICAgIDxZQXhpcyB0aWNrRm9ybWF0dGVyPXtHbG9iYWwudXRpbHMuZm9ybWF0RHVyYXRpb259IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgQnkgTW9udGgiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiQnkgTW9udGgifX19LHsiaWQiOjUsIm5hbWUiOiJtb250aHMiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoibG9kYXNoKCRgRGF0YWApXG4gIC5tYXAoZW50cnkgPT4gKHtcbiAgICBtb250aDogR2xvYmFsLmxpYnMuZGF0ZWZucy5mb3JtYXQoZW50cnkuc3RhcnQsICdMTEwgeXl5eScpLFxuICAgIC4uLmVudHJ5LFxuICB9KSlcbiAgLmdyb3VwQnkoJ21vbnRoJylcbiAgLm1hcFZhbHVlcyhlbnRyaWVzID0+IGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykpXG4gIC52YWx1ZSgpIn19fSx7ImlkIjo2LCJuYW1lIjoibW9udGhzQ2hhcnQiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3Qge1xuICBSZXNwb25zaXZlQ29udGFpbmVyLFxuICBCYXJDaGFydCxcbiAgQmFyLFxuICBYQXhpcyxcbiAgWUF4aXMsXG4gIFRvb2x0aXAsXG59ID0gR2xvYmFsLmxpYnMucmVjaGFydHM7XG5cbmNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyhtb250aHMpLm1hcChHbG9iYWwudXRpbHMubGFiZWxlcignbW9udGgnLCAnaG91cnMnKSk7XG5cbjxSZXNwb25zaXZlQ29udGFpbmVyIGhlaWdodD17MzAwfT5cbiAgPEJhckNoYXJ0IGRhdGE9e2RhdGF9PlxuICAgIDxUb29sdGlwIGZvcm1hdHRlcj17R2xvYmFsLnV0aWxzLmZvcm1hdER1cmF0aW9ufSAvPlxuICAgIDxCYXIgdHlwZT1cIm1vbm90b25lXCIgZGF0YUtleT1cImhvdXJzXCIgZmlsbD1cIiM5REQ5RDJcIiAvPlxuICAgIDxYQXhpcyBkYXRhS2V5PVwibW9udGhcIiAvPlxuICAgIDxZQXhpcyB0aWNrRm9ybWF0dGVyPXtHbG9iYWwudXRpbHMuZm9ybWF0RHVyYXRpb259IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjozLCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoe1xuICBEYXRhLFxuICB3ZWVrcyxcbiAgbW9udGhzLFxuICBjaGFydHM6IHtcbiAgICB3ZWVrczogd2Vla3NDaGFydCxcbiAgICBtb250aHM6IG1vbnRoc0NoYXJ0LFxuICB9LFxufSkifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoiQXRXb3JrIEltcG9ydHMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgQXRXb3JrIEltcG9ydHMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiQXRXb3JrIEltcG9ydHMifX19LHsiaWQiOjEyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiQWRkIGEgbmV3IGAvTG9hZEZpbGVgIEJsb2NrIHdpdGggYSBjb3JyZXNwb25kaW5nIG1vbnRoIChhbmQgeWVhcikgbGFiZWwuIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiQWRkIGEgbmV3IGAvTG9hZEZpbGVgIEJsb2NrIHdpdGggYSBjb3JyZXNwb25kaW5nIG1vbnRoIChhbmQgeWVhcikgbGFiZWwuIn19fSx7ImlkIjoxMywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlRoZW4gYWRkIHRoZSBmaWxlIHRvIHRoZSBgZXhwb3J0c2AgbGlzdCBhdCB0aGUgZW5kLiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlRoZW4gYWRkIHRoZSBmaWxlIHRvIHRoZSBgZXhwb3J0c2AgbGlzdCBhdCB0aGUgZW5kLiJ9fX0seyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIDIwMjQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiMjAyNCJ9fX0seyJpZCI6MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IkphbnVhcnkiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJKYW51YXJ5In19fSx7ImlkIjoyLCJuYW1lIjoiMjAyNC8wMSIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Mb2FkRmlsZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJMb2FkRmlsZSIsInN0YXRlIjp7InN0YXRlIjoibG9hZGVkIiwiZmlsZSI6eyJjb250ZW50IjoiUldsdWRITERwR2RsT3pzN0NrSmxaMmx1Ymp0RmJtUmxPMUJoZFhObE8wUmhkV1Z5Q2pFd0xqQXhMakl3TWpRZ01EazZNemM3TVRBdU1ERXVNakF5TkNBeE5qbzBOVHNpTWl3MUlqc2lOQ3cyTXpNaUNqRXhMakF4TGpJd01qUWdNRGc2TURBN01URXVNREV1TWpBeU5DQXhNem8xT1RzaU1TdzNOU0k3SWpRc01qTXpJZ294TWk0d01TNHlNREkwSURBM09qSXlPekV5TGpBeExqSXdNalFnTVRRNk1EQTdJakVzTlRNeklqc2lOU3d4SWdveE15NHdNUzR5TURJMElEQTNPakF3T3pFekxqQXhMakl3TWpRZ01EYzZORFU3T3lJd0xEYzFJZ294TlM0d01TNHlNREkwSURBMk9qVTRPekUxTGpBeExqSXdNalFnTVRNNk5EVTdJak1zTURNeklqc2lNeXczTlNJS01UWXVNREV1TWpBeU5DQXhNem95TVRzeE5pNHdNUzR5TURJMElERTNPak00T3pzaU5Dd3lPRE1pQ2pFM0xqQXhMakl3TWpRZ01EWTZNRFk3TVRjdU1ERXVNakF5TkNBeE5Eb3lNVHNpTWl3MU5TSTdJalVzTnlJS01UZ3VNREV1TWpBeU5DQXdOam94T0RzeE9DNHdNUzR5TURJMElERTBPalExT3lJeExEZ2lPeUkyTERZMUlnb3hPUzR3TVM0eU1ESTBJREEyT2pJME96RTVMakF4TGpJd01qUWdNVEk2TXpBN0lqRXNOalkzSWpzaU5DdzBNek1pQ2pJeUxqQXhMakl3TWpRZ01EazZNREU3TWpJdU1ERXVNakF5TkNBeE1qb3hNRHM3SWpNc01UVWlDakl6TGpBeExqSXdNalFnTVRJNk16STdNak11TURFdU1qQXlOQ0F4Tmpvek9EczdJalFzTVNJS01qUXVNREV1TWpBeU5DQXdOam96TXpzeU5DNHdNUzR5TURJMElERTFPakE1T3lJeUxEazRNeUk3SWpVc05qRTNJZ295TlM0d01TNHlNREkwSURBNE9qUXhPekkxTGpBeExqSXdNalFnTVRRNk16QTdJakVzTVRZM0lqc2lOQ3cyTlNJS01qa3VNREV1TWpBeU5DQXhNem96T1RzeU9TNHdNUzR5TURJMElERTNPakUwT3lJd0xEVWlPeUl6TERBNE15SUtNekF1TURFdU1qQXlOQ0F4TXpvek1Ec3pNQzR3TVM0eU1ESTBJREUzT2pNd096czBDak14TGpBeExqSXdNalFnTVRNNk1qUTdNekV1TURFdU1qQXlOQ0F4Tnpvek16czdJalFzTVRVaUNqczdPd289IiwibmFtZSI6Im51bWJlcnMtZXhwb3J0LWF0d29yay0yMDI0LTA1LTE1LTE2XzM0XzAzLmNzdiIsIm9wdGlvbnMiOnsidHlwZSI6InRleHQvY3N2IiwibGFzdE1vZGlmaWVkIjoxNzE1NzgzNjQzMDAwfX19fX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJGZWJydWFyeSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkZlYnJ1YXJ5In19fSx7ImlkIjo0LCJuYW1lIjoiMjAyNC8wMiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Mb2FkRmlsZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJMb2FkRmlsZSIsInN0YXRlIjp7InN0YXRlIjoibG9hZGVkIiwiZmlsZSI6eyJjb250ZW50IjoiUldsdWRITERwR2RsT3pzN0NrSmxaMmx1Ymp0RmJtUmxPMUJoZFhObE8wUmhkV1Z5Q2pBeUxqQXlMakl3TWpRZ01EWTZNVFk3TURJdU1ESXVNakF5TkNBd056b3hOenM3SWpFc01ERTNJZ293TWk0d01pNHlNREkwSURFMU9qQXdPekF5TGpBeUxqSXdNalFnTVRjNk5EazdPeUl5TERneE55SUtNRFV1TURJdU1qQXlOQ0F3TmpvME5Uc3dOUzR3TWk0eU1ESTBJREUxT2pVNE95SXlMREF6TXlJN0lqY3NNVGd6SWdvd05pNHdNaTR5TURJMElEQTJPak00T3pBMkxqQXlMakl3TWpRZ01qRTZNRFE3SWpjc01UTXpJanNpTnl3eklnb3dOeTR3TWk0eU1ESTBJREEyT2pNd096QTNMakF5TGpJd01qUWdNVFE2TkRRN0lqRXNORFVpT3lJMkxEYzRNeUlLTURndU1ESXVNakF5TkNBd05qb3hPRHN3T0M0d01pNHlNREkwSURFME9qQTBPeUl5TERNMUlqc2lOU3cwTVRjaUNqQTVMakF5TGpJd01qUWdNRFk2TXpJN01Ea3VNREl1TWpBeU5DQXdOem8wT1RzN0lqRXNNamd6SWdvd09TNHdNaTR5TURJMElEQTVPak13T3pBNUxqQXlMakl3TWpRZ01UUTZNekE3T3pVS01USXVNREl1TWpBeU5DQXdOam95T1RzeE1pNHdNaTR5TURJMElEQTNPakUxT3pzaU1DdzNOamNpQ2pFeUxqQXlMakl3TWpRZ01EazZNekE3TVRJdU1ESXVNakF5TkNBeE1EbzFOVHM3SWpFc05ERTNJZ294TWk0d01pNHlNREkwSURFeE9qTXpPekV5TGpBeUxqSXdNalFnTVRNNk5ETTdJakFzTWpNeklqc2lNU3c1TXpNaUNqRXlMakF5TGpJd01qUWdNVFE2TlRFN01USXVNREl1TWpBeU5DQXhPRG93T0RzaU1DdzFJanNpTWl3M09ETWlDakV6TGpBeUxqSXdNalFnTVRNNk16WTdNVE11TURJdU1qQXlOQ0F4T0Rvek16czdJalFzT1RVaUNqRTBMakF5TGpJd01qUWdNRGs2TWpFN01UUXVNREl1TWpBeU5DQXhNVG96TURzN0lqSXNNVFVpQ2pFMExqQXlMakl3TWpRZ01USTZOVGM3TVRRdU1ESXVNakF5TkNBeE5Ub3dOanM3SWpJc01UVWlDakUxTGpBeUxqSXdNalFnTURnNk1UTTdNVFV1TURJdU1qQXlOQ0F4TVRvd09Uc2lNQ3cxSWpzaU1pdzBNek1pQ2pFMUxqQXlMakl3TWpRZ01URTZORGM3TVRVdU1ESXVNakF5TkNBeE5Eb3dORHM3SWpJc01qZ3pJZ294Tmk0d01pNHlNREkwSURBNE9qSTNPekUyTGpBeUxqSXdNalFnTURrNk16VTdPeUl4TERFek15SUtNVFl1TURJdU1qQXlOQ0F4TURvek16c3hOaTR3TWk0eU1ESTBJREUzT2pFMU95SXdMREUxSWpzaU5pdzFOU0lLTVRZdU1ESXVNakF5TkNBeE9Ub3lNanN4Tmk0d01pNHlNREkwSURJeE9qQXhPenNpTVN3Mk5TSUtNakF1TURJdU1qQXlOQ0F4TkRvMU9Uc3lNQzR3TWk0eU1ESTBJREU0T2pBeE96c2lNeXd3TXpNaUNqSXdMakF5TGpJd01qUWdNVGc2TkRVN01qQXVNREl1TWpBeU5DQXhPVG96TWpzN0lqQXNOemd6SWdveU1TNHdNaTR5TURJMElEQTNPak14T3pJeExqQXlMakl3TWpRZ01URTZNalk3SWpBc01qVWlPeUl6TERZMk55SUtNakV1TURJdU1qQXlOQ0F4TWpveE1Ec3lNUzR3TWk0eU1ESTBJREUwT2pNME96c2lNaXcwSWdveU1pNHdNaTR5TURJMElEQTNPakkxT3pJeUxqQXlMakl3TWpRZ01USTZNREE3SWpBc05TSTdJalFzTURneklnb3lNaTR3TWk0eU1ESTBJREUxT2pNNE96SXlMakF5TGpJd01qUWdNVGc2TVRnN095SXlMRFkyTnlJS01qTXVNREl1TWpBeU5DQXdPRG93TURzeU15NHdNaTR5TURJMElERXpPalV4T3lJd0xEVWlPeUkxTERNMUlnb3lOaTR3TWk0eU1ESTBJREEyT2pRMU96STJMakF5TGpJd01qUWdNRGM2TkRRN095SXdMRGs0TXlJS01qWXVNREl1TWpBeU5DQXdPRG94TlRzeU5pNHdNaTR5TURJMElERTBPakUyT3lJd0xEYzFJanNpTlN3eU5qY2lDakkzTGpBeUxqSXdNalFnTURZNk1USTdNamN1TURJdU1qQXlOQ0F3TmpvME5UczdJakFzTlRVaUNqSTNMakF5TGpJd01qUWdNVFE2TURVN01qY3VNREl1TWpBeU5DQXhPRG96T0RzN0lqUXNOVFVpQ2pJNExqQXlMakl3TWpRZ01EYzZNVFU3TWpndU1ESXVNakF5TkNBd09UbzFPVHNpTUN3eU5TSTdJaklzTkRneklnb3lPQzR3TWk0eU1ESTBJREV4T2pNd096STRMakF5TGpJd01qUWdNVEk2TURBN095SXdMRFVpQ2pJNExqQXlMakl3TWpRZ01UTTZOVE03TWpndU1ESXVNakF5TkNBeE5Eb3lORHM3SWpBc05URTNJZ295T1M0d01pNHlNREkwSURBMk9qUTFPekk1TGpBeUxqSXdNalFnTURjNk1qZzdPeUl3TERjeE55SUtNamt1TURJdU1qQXlOQ0F3T1RveE1qc3lPUzR3TWk0eU1ESTBJREUwT2pJMk96c2lOU3d5TXpNaUNqSTVMakF5TGpJd01qUWdNVFk2TVRVN01qa3VNREl1TWpBeU5DQXhPRG93TURzN0lqRXNOelVpQ2pzN093bz0iLCJuYW1lIjoibnVtYmVycy1leHBvcnQtYXR3b3JrLTIwMjQtMDUtMTUtMTZfMzRfNDQuY3N2Iiwib3B0aW9ucyI6eyJ0eXBlIjoidGV4dC9jc3YiLCJsYXN0TW9kaWZpZWQiOjE3MTU3ODM2ODQwMDB9fX19fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ik1hcmNoIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiTWFyY2gifX19LHsiaWQiOjgsIm5hbWUiOiIyMDI0LzAzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0xvYWRGaWxlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkxvYWRGaWxlIiwic3RhdGUiOnsic3RhdGUiOiJsb2FkZWQiLCJmaWxlIjp7ImNvbnRlbnQiOiJSV2x1ZEhMRHBHZGxPenM3Q2tKbFoybHVianRGYm1SbE8xQmhkWE5sTzBSaGRXVnlDakF4TGpBekxqSXdNalFnTURZNk5ESTdNREV1TURNdU1qQXlOQ0F3Tnpvek16czdJakFzT0RVaUNqQXhMakF6TGpJd01qUWdNRGc2TURJN01ERXVNRE11TWpBeU5DQXdPRG96TXpzN0lqQXNOVEUzSWdvd01TNHdNeTR5TURJMElEQTVPakV5T3pBeExqQXpMakl3TWpRZ01UUTZNekE3SWpBc05TSTdJalFzT0NJS01EUXVNRE11TWpBeU5DQXdOem96TURzd05DNHdNeTR5TURJMElEQTRPakUxT3pzaU1DdzNOU0lLTURRdU1ETXVNakF5TkNBeE16b3pNRHN3TkM0d015NHlNREkwSURFNE9qQXhPenNpTkN3MU1UY2lDakEyTGpBekxqSXdNalFnTURjNk1UYzdNRFl1TURNdU1qQXlOQ0F3T0Rvd05EczdJakFzTnpneklnb3dOaTR3TXk0eU1ESTBJREE0T2pNd096QTJMakF6TGpJd01qUWdNRGs2TkRVN095SXhMREkxSWdvd05pNHdNeTR5TURJMElERXdPak13T3pBMkxqQXpMakl3TWpRZ01URTZORFU3T3lJeExESTFJZ293Tmk0d015NHlNREkwSURFeU9qTXdPekEyTGpBekxqSXdNalFnTVRNNk5EVTdPeUl4TERJMUlnb3dOaTR3TXk0eU1ESTBJREUwT2pJNE96QTJMakF6TGpJd01qUWdNVGc2TXpBN095STBMREF6TXlJS01EY3VNRE11TWpBeU5DQXdOam96TVRzd055NHdNeTR5TURJMElEQTRPakl6T3lJd0xESXpNeUk3SWpFc05qTXpJZ293Tnk0d015NHlNREkwSURBNU9qQXdPekEzTGpBekxqSXdNalFnTVRJNk1ETTdPeUl6TERBMUlnb3dOeTR3TXk0eU1ESTBJREV5T2pJNE96QTNMakF6TGpJd01qUWdNVE02TVRBN095SXdMRGNpQ2pBNExqQXpMakl3TWpRZ01URTZNRE03TURndU1ETXVNakF5TkNBeE9Eb3hOVHM3SWpjc01pSUtNVEV1TURNdU1qQXlOQ0F4TURveU5Uc3hNUzR3TXk0eU1ESTBJREV4T2pJek96c2lNQ3c1TmpjaUNqRTRMakF6TGpJd01qUWdNRGM2TlRZN01UZ3VNRE11TWpBeU5DQXhNam8xTkRzN0lqUXNPVFkzSWdveE9DNHdNeTR5TURJMElERXpPakkxT3pFNExqQXpMakl3TWpRZ01UVTZNRGs3T3lJeExEY3pNeUlLTVRrdU1ETXVNakF5TkNBeE5Eb3pNVHN4T1M0d015NHlNREkwSURFM09qVTJPenNpTXl3ME1UY2lDakl3TGpBekxqSXdNalFnTURjNk1UVTdNakF1TURNdU1qQXlOQ0F3T1RveE16czdJakVzT1RZM0lnb3lNQzR3TXk0eU1ESTBJREE1T2pRNU96SXdMakF6TGpJd01qUWdNVEU2TXpBN095SXhMRFk0TXlJS01qQXVNRE11TWpBeU5DQXhNam96T0RzeU1DNHdNeTR5TURJMElERTBPakF3T3pzaU1Td3pOamNpQ2pJeExqQXpMakl3TWpRZ01EZzZNek03TWpFdU1ETXVNakF5TkNBeE1Eb3pNanM3SWpFc09UZ3pJZ295TVM0d015NHlNREkwSURFd09qUTNPekl4TGpBekxqSXdNalFnTVRFNk5EVTdPeUl3TERrMk55SUtNakV1TURNdU1qQXlOQ0F4Tmpvek1Ec3lNUzR3TXk0eU1ESTBJREU0T2pRMU96c2lNaXd5TlNJS01qSXVNRE11TWpBeU5DQXdOem95TkRzeU1pNHdNeTR5TURJMElERTBPakUzT3pzaU5pdzRPRE1pQ2pJMUxqQXpMakl3TWpRZ01EYzZNREk3TWpVdU1ETXVNakF5TkNBeE1qb3dNRHM3SWpRc09UWTNJZ295Tmk0d015NHlNREkwSURFME9qQXdPekkyTGpBekxqSXdNalFnTVRjNk5UTTdPeUl6TERnNE15SUtNamN1TURNdU1qQXlOQ0F3T0RveE1Ec3lOeTR3TXk0eU1ESTBJREUwT2pFNU95SXdMRFVpT3lJMUxEWTFJZ295T0M0d015NHlNREkwSURBM09qSTVPekk0TGpBekxqSXdNalFnTVRJNk5EazdJakFzTlNJN0lqUXNPRE16SWdveU9DNHdNeTR5TURJMElERTJPak13T3pJNExqQXpMakl3TWpRZ01UZzZORFU3T3lJeUxESTFJZ295T0M0d015NHlNREkwSURFNU9qSXpPekk0TGpBekxqSXdNalFnTVRrNk5EazdPeUl3TERRek15SUtNamd1TURNdU1qQXlOQ0F5TURveU1Uc3lPQzR3TXk0eU1ESTBJREl5T2pFNE96c2lNU3c1TlNJS01qZ3VNRE11TWpBeU5DQXlNam8xTmpzeU9TNHdNeTR5TURJMElEQXdPalE0T3pzaU1TdzROamNpQ2pJNUxqQXpMakl3TWpRZ01EYzZOREk3TWprdU1ETXVNakF5TkNBeE1qb3pOenNpTUN3eU5TSTdJalFzTmpZM0lnbzdPenNLIiwibmFtZSI6Im51bWJlcnMtZXhwb3J0LWF0d29yay0yMDI0LTA1LTE1LTE2XzM1XzA1LmNzdiIsIm9wdGlvbnMiOnsidHlwZSI6InRleHQvY3N2IiwibGFzdE1vZGlmaWVkIjoxNzE1NzgzNzA2MDAwfX19fX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo3LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gWyRgMjAyNC8wMWAsICRgMjAyNC8wMmAsICRgMjAyNC8wM2BdIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgWyRgMjAyNC8wMWAsICRgMjAyNC8wMmAsICRgMjAyNC8wM2BdIn19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX0seyJpZCI6MSwibmFtZSI6IkRhdGEiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjo1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBEYXRhIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkRhdGEifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJUaGVzZSBhcmUgYWxsIHRoZSBpbXBvcnRlZCBhbmQgcGFyc2VkIHdvcmtpbmcgaG91cnM6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiVGhlc2UgYXJlIGFsbCB0aGUgaW1wb3J0ZWQgYW5kIHBhcnNlZCB3b3JraW5nIGhvdXJzOiJ9fX0seyJpZCI6NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MCwibmFtZSI6ImRhdGEiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGxvZGFzaC5mbGF0dGVuKGF3YWl0IFByb21pc2UuYWxsKCRgQXRXb3JrIEltcG9ydHNgLm1hcChwYXJzZSkpKSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIGxvZGFzaC5mbGF0dGVuKGF3YWl0IFByb21pc2UuYWxsKCRgQXRXb3JrIEltcG9ydHNgLm1hcChwYXJzZSkpKSJ9fX0seyJpZCI6MSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPHJlYWN0SW5zcGVjdG9yLlRhYmxlSW5zcGVjdG9yIGRhdGE9e2RhdGF9IC8+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPHJlYWN0SW5zcGVjdG9yLlRhYmxlSW5zcGVjdG9yIGRhdGE9e2RhdGF9IC8+In19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjo0LCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gZGF0YSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIGRhdGEifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOlt7ImlkIjowLCJuYW1lIjoicGFyc2UiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjoxMywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgUGFyc2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiUGFyc2UifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXhhbXBsZSBwYXJzZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJFeGFtcGxlIHBhcnNlIn19fSx7ImlkIjowLCJuYW1lIjoiZXhhbXBsZUZpbGUiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9ICRgQXRXb3JrIEltcG9ydHNgWzBdIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgJGBBdFdvcmsgSW1wb3J0c2BbMF0ifX19LHsiaWQiOjEsIm5hbWUiOiJjc3YiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IEdsb2JhbC5saWJzLnBhcGFwYXJzZS5wYXJzZShhd2FpdCBleGFtcGxlRmlsZS50ZXh0KCkpIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgR2xvYmFsLmxpYnMucGFwYXBhcnNlLnBhcnNlKGF3YWl0IGV4YW1wbGVGaWxlLnRleHQoKSkifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjQsIm5hbWUiOiJkYXRhIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSBjc3YuZGF0YS5zbGljZSgyLCAtMikiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiBjc3YuZGF0YS5zbGljZSgyLCAtMikifX19LHsiaWQiOjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtkYXRhfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtkYXRhfSAvPiJ9fX0seyJpZCI6NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MiwibmFtZSI6InBhcnNlZCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IGRhdGVGbXQgPSBcImRkLk1NLnl5eXkgSEg6bW1cIlxuXG5mdW5jdGlvbiBwYXJzZU51bShzdHIpIHtcbiAgaWYgKHN0ci50cmltKCkgPT09ICcnKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQoc3RyLnJlcGxhY2UoJywnLCAnLicpKVxufVxuXG5kYXRhLm1hcChcbiAgKFtzdGFydCwgZW5kLCBicmVha0hvdXJzLCB3b3JrSG91cnNdKSA9PiAoe1xuICAgIHN0YXJ0OiBHbG9iYWwubGlicy5kYXRlZm5zLnBhcnNlKHN0YXJ0LCBkYXRlRm10LCBuZXcgRGF0ZSgpKSxcbiAgICBlbmQ6IEdsb2JhbC5saWJzLmRhdGVmbnMucGFyc2UoZW5kLCBkYXRlRm10LCBuZXcgRGF0ZSgpKSxcbiAgICBicmVha0hvdXJzOiBwYXJzZU51bShicmVha0hvdXJzKSxcbiAgICB3b3JrSG91cnM6IHBhcnNlTnVtKHdvcmtIb3VycyksXG4gIH0pXG4pIn19fSx7ImlkIjo1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17cGFyc2VkfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXtwYXJzZWR9IC8+In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6ImZ1bGwiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjoxNSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBBY3R1YWwgUGFyc2VyIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkFjdHVhbCBQYXJzZXIifX19LHsiaWQiOjksIm5hbWUiOiJwYXJzZSIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImZ1bmN0aW9uIHBhcnNlTnVtKHN0cikge1xuICBpZiAoc3RyLnRyaW0oKSA9PT0gJycpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIHJldHVybiBOdW1iZXIucGFyc2VGbG9hdChzdHIucmVwbGFjZSgnLCcsICcuJykpXG59XG4gXG5jb25zdCBkYXRlRm10ID0gXCJkZC5NTS55eXl5IEhIOm1tXCJcblxuYXN5bmMgZnVuY3Rpb24gcGFyc2UoZmlsZSkge1xuICBjb25zdCBjc3YgPSBhd2FpdCBHbG9iYWwubGlicy5wYXBhcGFyc2UucGFyc2UoYXdhaXQgZmlsZS50ZXh0KCkpXG4gIFxuICBjb25zdCBkYXRhID0gY3N2LmRhdGEuc2xpY2UoMiwgLTIpXG4gIFxuICByZXR1cm4gZGF0YS5tYXAoXG4gICAgKFtzdGFydCwgZW5kLCBicmVha0hvdXJzLCB3b3JrSG91cnNdKSA9PiAoe1xuICAgICAgc3RhcnQ6IEdsb2JhbC5saWJzLmRhdGVmbnMucGFyc2Uoc3RhcnQsIGRhdGVGbXQsIG5ldyBEYXRlKCkpLFxuICAgICAgZW5kOiBHbG9iYWwubGlicy5kYXRlZm5zLnBhcnNlKGVuZCwgZGF0ZUZtdCwgbmV3IERhdGUoKSksXG4gICAgICBicmVha0hvdXJzOiBwYXJzZU51bShicmVha0hvdXJzKSxcbiAgICAgIHdvcmtIb3VyczogcGFyc2VOdW0od29ya0hvdXJzKSxcbiAgICB9KVxuICApXG59In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbXX1dfV19LHsiaWQiOjIsIm5hbWUiOiJJbnZvaWNlIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgSW52b2ljZSIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJJbnZvaWNlIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiR2VuZXJhdGUgYW4gaW52b2ljZSBmb3IgYSBnaXZlbiBtb250aC4iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJHZW5lcmF0ZSBhbiBpbnZvaWNlIGZvciBhIGdpdmVuIG1vbnRoLiJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MywibmFtZSI6Im1vbnRocyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2goJGBXb3JraW5nIEhvdXJzYC5EYXRhKVxuICAubWFwKGVudHJ5ID0+ICh7XG4gICAgbW9udGg6IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGVudHJ5LnN0YXJ0LCAnTExMTCB5eXl5JyksXG4gICAgLi4uZW50cnksXG4gIH0pKVxuICAuZ3JvdXBCeSgnbW9udGgnKVxuICAudmFsdWUoKSJ9fX0seyJpZCI6NSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NCwibmFtZSI6InNlbGVjdGVkTW9udGgiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvR2xvYmFsLmJsb2Nrcy5TZWxlY3QoT2JqZWN0LmtleXMobW9udGhzKSkiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjpmYWxzZSwiY29kZSI6Ikdsb2JhbC5ibG9ja3MuU2VsZWN0KE9iamVjdC5rZXlzKG1vbnRocykpIn19fSx7ImlkIjoxMiwibmFtZSI6Im1vbnRoRW50cmllcyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IG1vbnRoc1tzZWxlY3RlZE1vbnRoXSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIG1vbnRoc1tzZWxlY3RlZE1vbnRoXSJ9fX0seyJpZCI6MjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoicmVzdWx0Iiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA8cmVhY3RJbnNwZWN0b3IuVGFibGVJbnNwZWN0b3IgZGF0YT17bW9udGhFbnRyaWVzfSAvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDxyZWFjdEluc3BlY3Rvci5UYWJsZUluc3BlY3RvciBkYXRhPXttb250aEVudHJpZXN9IC8+In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiV29ya2luZyBob3VyczoiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJXb3JraW5nIGhvdXJzOiJ9fX0seyJpZCI6NiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IGxvZGFzaC5zdW1CeShtb250aEVudHJpZXMsICd3b3JrSG91cnMnKSIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIGxvZGFzaC5zdW1CeShtb250aEVudHJpZXMsICd3b3JrSG91cnMnKSJ9fX0seyJpZCI6OSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJSYW5nZSBvZiBlbnRyaWVzOiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IlJhbmdlIG9mIGVudHJpZXM6In19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCBmbXQgPSBkYXRlID0+IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0KGRhdGUsIFwiZG8gTU1NIHl5eXlcIilcblxuY29uc3Qgc29ydGVkID0gbG9kYXNoLnNvcnRCeShtb250aEVudHJpZXMsICdzdGFydCcpXG5cbnJldHVybiA8PntmbXQoc29ydGVkWzBdLnN0YXJ0KX0gLSB7Zm10KHNvcnRlZC5zbGljZSgtMSlbMF0uc3RhcnQpfTwvPiJ9fX0seyJpZCI6MTcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiUmVjZWl2ZXI6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiUmVjZWl2ZXI6In19fSx7ImlkIjoxOSwibmFtZSI6InJlY2VpdmVyIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6Ijw+XG4gIEJpZ0NvcnAgSW5jLjxici8+XG4gIExhcmdlIFN0cmVldCAxMjM8YnIvPlxuICA5OTk5OSBNZWdhQ2l0eVxuPC8+In19fSx7ImlkIjoxNCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJJbnZvaWNlIERhdGU6Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiSW52b2ljZSBEYXRlOiJ9fX0seyJpZCI6MjEsIm5hbWUiOiJkYXRlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0dsb2JhbC5ibG9ja3MuRGF0ZSgpIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6ZmFsc2UsImNvZGUiOiJHbG9iYWwuYmxvY2tzLkRhdGUoKSJ9fX0seyJpZCI6MjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgR2VuZXJhdGVkIEludm9pY2UiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiR2VuZXJhdGVkIEludm9pY2UifX19LHsiaWQiOjE2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiPERvY3VtZW50PlxuICA8VGVtcGxhdGVcbiAgICByZWNlaXZlcj17cmVjZWl2ZXJ9XG4gICAgZGF0ZT17ZGF0ZX1cbiAgICBkYXRhPXttb250aEVudHJpZXN9XG4gICAgbG9jYWxlPVwiZW5cIlxuICAgIGN1cnJlbmN5PVwiVVNEXCJcbiAgICBob3VybHlXYWdlPXs3NX1cbiAgICB0YXhSYXRlPXswLjE5fVxuICAgIC8+XG48L0RvY3VtZW50PiJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W3siaWQiOjAsIm5hbWUiOiJEb2N1bWVudCIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIERvY3VtZW50Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkRvY3VtZW50In19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiQ3JlYXRlcyBhIHByaW50YWJsZSBkb2N1bWVudC4iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJDcmVhdGVzIGEgcHJpbnRhYmxlIGRvY3VtZW50LiJ9fX0seyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MSwibmFtZSI6IkRvY3VtZW50IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gcmVuZGVyRG9jdW1lbnQoY29udGVudCkge1xuICByZXR1cm4gUmVhY3REb21TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoXG4gICAgICA8aHRtbD5cbiAgICAgICAgPGhlYWQ+XG4gICAgICAgICAgPHN0eWxlPntgXG4gICAgICAgICAgICBAcGFnZSB7XG4gICAgICAgICAgICAgIG1hcmdpbjogMmNtIDAgMCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbVwiIC8+XG4gICAgICAgIDwvaGVhZD5cbiAgICAgICAgPGJvZHkgY2xhc3NOYW1lPVwiYmctd2hpdGVcIj5cbiAgICAgICAgICB7Y29udGVudH1cbiAgICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIClcbn1cbiAgXG5mdW5jdGlvbiBEb2N1bWVudCh7Y2hpbGRyZW59KSB7XG4gIGNvbnN0IGlmcmFtZVJlZiA9IFJlYWN0LnVzZVJlZigpXG4gIFxuICBmdW5jdGlvbiBvblByaW50SWZyYW1lKCkge1xuICAgIGlmcmFtZVJlZi5jdXJyZW50Py5jb250ZW50V2luZG93Py5wcmludCgpXG4gIH1cbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLXN0cmV0Y2ggc3BhY2UteS0yXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJmbG93LXgtYXV0b1wiPlxuICAgICAgICA8aWZyYW1lXG4gICAgICAgICAgcmVmPXtpZnJhbWVSZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYm9yZGVyIG1pbi13LVs3NjhweF1cIlxuICAgICAgICAgIGhlaWdodD1cIjEyMDBcIlxuICAgICAgICAgIHNyY0RvYz17cmVuZGVyRG9jdW1lbnQoY2hpbGRyZW4pfVxuICAgICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIHJvdW5kZWQgYmctYmx1ZS0xMDAgaG92ZXI6YmctYmx1ZS0yMDBcIlxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblByaW50SWZyYW1lKCl9XG4gICAgICA+XG4gICAgICAgIFByaW50XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufSJ9fX1dfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119LHsiaWQiOjEsIm5hbWUiOiJUZW1wbGF0ZSIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEludm9pY2UgVGVtcGxhdGUiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiSW52b2ljZSBUZW1wbGF0ZSJ9fX0seyJpZCI6NywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6OCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEZvcm1hdHRlcnMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiRm9ybWF0dGVycyJ9fX0seyJpZCI6NSwibmFtZSI6ImZvcm1hdHRlcnMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiIoeyBsb2NhbGUsIGN1cnJlbmN5IH0pID0+ICh7XG4gIGN1cnJlbmN5OiBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICBzdHlsZTogJ2N1cnJlbmN5JyxcbiAgICBjdXJyZW5jeSxcbiAgfSksXG4gIFxuICBkYXRlOiBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgIGRhdGVTdHlsZTogJ3Nob3J0JyxcbiAgfSksXG4gIFxuICBwZXJjZW50OiBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICBzdHlsZTogJ3BlcmNlbnQnLFxuICB9KSxcbn0pIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo5LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgVGFibGUgb2YgTGluZSBJdGVtcyBmb3IgSG91cnMgV29ya2VkIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IlRhYmxlIG9mIExpbmUgSXRlbXMgZm9yIEhvdXJzIFdvcmtlZCJ9fX0seyJpZCI6MSwibmFtZSI6IlRhYmxlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gVGFibGUoeyBkYXRhLCBsb2NhbGUsIGN1cnJlbmN5LCBob3VybHlXYWdlLCB0YXhSYXRlIH0pIHtcbiAgY29uc3QgZm10ID0gZm9ybWF0dGVycyh7IGxvY2FsZSwgY3VycmVuY3kgfSlcbiAgXG4gIGNvbnN0IHByaWNlcyA9IGRhdGEubWFwKCh7IHdvcmtIb3VycyB9KSA9PiB3b3JrSG91cnMgKiBob3VybHlXYWdlKVxuICBjb25zdCBzdW0gPSBsb2Rhc2guc3VtKHByaWNlcylcbiAgY29uc3QgdGF4ZXMgPSBHbG9iYWwudXRpbHMucm91bmRPbihzdW0gKiB0YXhSYXRlLCAwLjAxKVxuICBjb25zdCB0b3RhbCA9IEdsb2JhbC51dGlscy5yb3VuZE9uKHN1bSArIHRheGVzLCAwLjAxKVxuICBcbiAgcmV0dXJuIChcbiAgICA8dGFibGUgY2xhc3NOYW1lPVwidy1mdWxsXCI+XG4gICAgICA8dGhlYWQgY2xhc3NOYW1lPVwiZm9udC1ib2xkIGJnLXNreS0xMDBcIj5cbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTIgdGV4dC1sZWZ0XCI+UHJvamVjdDwvdGg+XG4gICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMiB0ZXh0LWNlbnRlciB3LTI4XCI+RGF0ZTwvdGg+XG4gICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0IHctNDBcIj5Xb3JraW5nIEhvdXJzPC90aD5cbiAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yIHRleHQtcmlnaHQgdy0yOFwiPlByaWNlPC90aD5cbiAgICAgICAgPC90cj5cbiAgICAgIDwvdGhlYWQ+XG4gICAgICBcbiAgICAgIHsvKlxuICAgICAgICBcIlBhZGRpbmdcIiBhdCB0aGUgdGFibGUgYm90dG9tLCBzbyB0aGUgY29udGVudCBkb2Vzbid0IGhpZGVcbiAgICAgICAgYmVsb3cgdGhlIGZvb3RlciB3aGVuIHByaW50aW5nLlxuICAgICAgKi99XG4gICAgICA8dGZvb3QgY2xhc3NOYW1lPVwiaGlkZGVuIHByaW50OnRhYmxlLWZvb3Rlci1ncm91cFwiPlxuICAgICAgICA8dHIgY2xhc3NOYW1lPVwiaC0yOFwiPjx0ZC8+PC90cj5cbiAgICAgIDwvdGZvb3Q+XG4gICAgXG4gICAgICA8dGJvZHk+XG4gICAgICAgIHtkYXRhLm1hcCgoeyBzdGFydCwgd29ya0hvdXJzIH0pID0+IChcbiAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwiZXZlbjpiZy1zbGF0ZS0xMDBcIj5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC0yIHB5LTEuNVwiPlxuICAgICAgICAgICAgICBCdWlsZFRoZUZ1dHVyZVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC0yIHB5LTEuNSB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICB7Zm10LmRhdGUuZm9ybWF0KHN0YXJ0KX1cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicHgtMiBweS0xLjUgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICB7R2xvYmFsLnV0aWxzLmZvcm1hdER1cmF0aW9uKHdvcmtIb3Vycyl9IGhcbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicHgtMiBweS0xLjUgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICB7Zm10LmN1cnJlbmN5LmZvcm1hdCh3b3JrSG91cnMgKiBob3VybHlXYWdlKX1cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgKSl9XG4gICAgICAgIFxuICAgICAgICB7LypcbiAgICAgICAgICBGb290ZXIgbm90IGluIDx0Zm9vdD4gYmVjYXVzZSBvdGhlcndpc2VcbiAgICAgICAgICBpdCBnZXQncyByZXBlYXRlZCBvbiBldmVyeSBwcmludGVkIHBhZ2VcbiAgICAgICAgKi99XG4gICAgICAgIDx0ciBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBiZy1za3ktMTAwIGJvcmRlci10LTIgYm9yZGVyLXdoaXRlIGJyZWFrLWJlZm9yZS1hdm9pZC1wYWdlXCI+XG4gICAgICAgICAgPHRkIGNvbHNwYW49ezN9IGNsYXNzTmFtZT1cInAtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICBTdW1cbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5jdXJyZW5jeS5mb3JtYXQoc3VtKX1cbiAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHIgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gYmctc2t5LTEwMCBib3JkZXItdC0yIGJvcmRlci13aGl0ZSBicmVhay1iZWZvcmUtYXZvaWQtcGFnZVwiPlxuICAgICAgICAgIDx0ZCBjb2xTcGFuPXszfSBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5wZXJjZW50LmZvcm1hdCh0YXhSYXRlKX0gVGF4ZXNcbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5jdXJyZW5jeS5mb3JtYXQodGF4ZXMpfVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDx0ciBjbGFzc05hbWU9XCJmb250LWJvbGQgYmctc2t5LTEwMCBib3JkZXItdC0yIGJvcmRlci13aGl0ZSBicmVhay1iZWZvcmUtYXZvaWQtcGFnZVwiPlxuICAgICAgICAgIDx0ZCBjb2xTcGFuPXszfSBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgVG90YWxcbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAge2ZtdC5jdXJyZW5jeS5mb3JtYXQodG90YWwpfVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICA8L3Rib2R5PlxuICAgIDwvdGFibGU+XG4gIClcbn0ifX19LHsiaWQiOjIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBJbnZvaWNlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6Ikludm9pY2UifX19LHsiaWQiOjQsIm5hbWUiOiJJbnZvaWNlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiZnVuY3Rpb24gSW52b2ljZSh7IGRhdGUsIHJlY2VpdmVyLCBkYXRhLCBsb2NhbGUsIGN1cnJlbmN5LCBob3VybHlXYWdlLCB0YXhSYXRlIH0pIHtcbiAgY29uc3QgZm10ID0gZm9ybWF0dGVycyh7IGxvY2FsZSwgY3VycmVuY3kgfSlcbiAgXG4gIGNvbnN0IGludm9pY2VNb250aCA9IEdsb2JhbC5saWJzLmRhdGVmbnMuZm9ybWF0RGF0ZShkYXRlLCBcInl5eXktTU1cIik7XG4gIGNvbnN0IGludm9pY2VObyA9IGAke2ludm9pY2VNb250aH0tMDFgO1xuICBcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPG1haW4gY2xhc3NOYW1lPVwiZm9udC1bJ0FyaWFsJ10gbXgtMjAgbWItMjhcIj5cbiAgICAgIFxuICAgICAgICB7LyogSGVhZGVyIHRvcCByaWdodCB3aXRoIG5hbWUgYW5kIGRlc2NyaXB0aW9uICovfVxuICAgICAgICA8aDFcbiAgICAgICAgICBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC00eGwgdGV4dC1yaWdodCB0ZXh0LXNreS03MDAgbGVhZGluZy1ub3JtYWxcIlxuICAgICAgICA+XG4gICAgICAgICAge0NvbmZpZy5vd25lci5uYW1lfVxuICAgICAgICA8L2gxPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmlnaHQgdGV4dC1zbGF0ZS04MDBcIj5cbiAgICAgICAgICB7Q29uZmlnLm93bmVyLmRlc2NyaXB0aW9ufVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXktMTJcIj5cbiAgICAgICAgICB7LyogQWRyZXNzIHNlbmRlciBhbmQgcmVjZWl2ZXIgbGVmdCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxhZGRyZXNzIGNsYXNzTmFtZT1cInRleHQteHMgbm90LWl0YWxpYyB0ZXh0LXNreS03MDBcIj5cbiAgICAgICAgICAgICAge0NvbmZpZy5vd25lci5hZGRyZXNzLmZsYXRNYXAoZmllbGQgPT4gW1wi4oCiXCIsIGZpZWxkXSkuc2xpY2UoMSkuam9pbihcIiBcIil9XG4gICAgICAgICAgICA8L2FkZHJlc3M+XG4gICAgICAgICAgICA8YWRkcmVzcyBjbGFzc05hbWU9XCJsZWFkaW5nLXRpZ2h0IG5vdC1pdGFsaWNcIj5cbiAgICAgICAgICAgICAge3JlY2VpdmVyfVxuICAgICAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBDb250YWN0IGRldGFpbHMgcmlnaHQgKi99XG4gICAgICAgICAgPGFkZHJlc3NcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImxlYWRpbmctdGlnaHQgbm90LWl0YWxpYyBmbGV4LWVuZCB0ZXh0LXJpZ2h0IHRleHQtc21cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtDb25maWcub3duZXIuYWRkcmVzcy5mbGF0TWFwKGZpZWxkID0+IFtmaWVsZCwgPGJyLz5dKX1cbiAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICB7Q29uZmlnLm93bmVyLmNvbnRhY3QuZmxhdE1hcChmaWVsZCA9PiBbZmllbGQsIDxici8+XSl9XG4gICAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB7LyogTWVzc2FnZSBIZWFkZXIgKi99XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCB0ZXh0LXNreS03MDAgbGVhZGluZy1ub3JtYWxcIj5cbiAgICAgICAgICBJbnZvaWNlXG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxoMyBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBsZWFkaW5nLW5vcm1hbCBtdC0xIG1iLTVcIj5cbiAgICAgICAgICA8c3Bhbj5JbnZvaWNlTm86IHtpbnZvaWNlTm99PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPntmbXQuZGF0ZS5mb3JtYXQoZGF0ZSl9PC9zcGFuPlxuICAgICAgICA8L2gzPlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHsvKiBNZXNzYWdlIENvbnRlbnQgKi99XG4gICAgICAgIDxhcnRpY2xlPlxuICAgICAgICAgIDxUYWJsZVxuICAgICAgICAgICAgZGF0YT17ZGF0YX1cbiAgICAgICAgICAgIGxvY2FsZT17bG9jYWxlfVxuICAgICAgICAgICAgY3VycmVuY3k9e2N1cnJlbmN5fVxuICAgICAgICAgICAgaG91cmx5V2FnZT17aG91cmx5V2FnZX1cbiAgICAgICAgICAgIHRheFJhdGU9e3RheFJhdGV9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L2FydGljbGU+XG4gICAgICAgIFxuICAgICAgPC9tYWluPlxuICAgICAgXG4gICAgICB7LyogRm9vdGVyICovfVxuICAgICAgPGZvb3RlclxuICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICBmaXhlZCBib3R0b20tMCBpbnNldC14LTAgaC0yNCBweC0yMCBweS0yXG4gICAgICAgICAgYmctc2xhdGUtNjAwXG4gICAgICAgICAgZm9udC1bJ0FyaWFsJ10gdGV4dC1zbSB0ZXh0LXdoaXRlXG4gICAgICAgICAgZmxleCBmbGV4LXJvdyBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnRcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7Q29uZmlnLm93bmVyLmRlc2NyaXB0aW9ufTxici8+XG4gICAgICAgICAge0NvbmZpZy5vd25lci5uYW1lfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGFkZHJlc3MgY2xhc3NOYW1lPVwibm90LWl0YWxpY1wiPlxuICAgICAgICAgIHtDb25maWcub3duZXIuYmFua31cbiAgICAgICAgPC9hZGRyZXNzPlxuICAgICAgPC9mb290ZXI+XG4gICAgPC8+XG4gIClcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19LHsiaWQiOjMsIm5hbWUiOiJGaW5hbmNlcyIsInN0YXRlIjp7InQiOiJyZXNoZWV0LnNlbGVjdG9yIiwidiI6MCwibW9kZSI6InJ1biIsImV4cHIiOiJTaGVldE9mKE5vdGUpIiwiaW5uZXIiOnsidCI6InJlc2hlZXQuc2hlZXQiLCJ2IjoyLCJsaW5lcyI6W3siaWQiOjAsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIEZpbmFuY2VzIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkZpbmFuY2VzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXhwZW5zZXMgQnVkZ2V0cyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMiIsInRleHQiOiJFeHBlbnNlcyBCdWRnZXRzIn19fSx7ImlkIjozLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6IjxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBqdXN0aWZ5LXN0cmV0Y2hcIj5cbiAge0V4cGVuc2VzLm9mZmljZUNoYXJ0fVxuICB7RXhwZW5zZXMuZXF1aXBtZW50Q2hhcnR9XG48L2Rpdj4ifX19LHsiaWQiOjQsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIjIyBJbmNvbWUgYWZ0ZXIgRXhwZW5zZXMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiSW5jb21lIGFmdGVyIEV4cGVuc2VzIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gSW5jb21lLmNoYXJ0Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgSW5jb21lLmNoYXJ0In19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjEwLCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0geyBFeHBlbnNlcywgSW5jb21lLCB1dGlscyB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBFeHBlbnNlcywgSW5jb21lLCB1dGlscyB9In19fV19fSwiaXNDb2xsYXBzZWQiOnRydWUsImNoaWxkcmVuIjpbeyJpZCI6MywibmFtZSI6InV0aWxzIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgRmluYW5jZSBVdGlscyIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJoMSIsInRleHQiOiJGaW5hbmNlIFV0aWxzIn19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiL0NvZGUiLCJub3RlIjp7InR5cGUiOiJibG9jayIsImlzSW5zdGFudGlhdGVkIjp0cnVlLCJjb2RlIjoiQ29kZSIsInN0YXRlIjoiY29uc3QgY3VycmVuY3lGb3JtYXR0ZXIgPSBJbnRsLk51bWJlckZvcm1hdCgnZW4nLCB7XG4gIHN0eWxlOiAnY3VycmVuY3knLFxuICBjdXJyZW5jeTogJ1VTRCcsXG59KVxuXG5mdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShudW0pIHtcbiAgcmV0dXJuIGN1cnJlbmN5Rm9ybWF0dGVyLmZvcm1hdChudW0pXG59XG5cbnJldHVybiB7XG4gIGN1cnJlbmN5Rm9ybWF0dGVyLFxuICBmb3JtYXRDdXJyZW5jeSxcbn0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjoyLCJuYW1lIjoiRXhwZW5zZXMiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOlt7ImlkIjowLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyBFeHBlbnNlcyBCdWRnZXQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDEiLCJ0ZXh0IjoiRXhwZW5zZXMgQnVkZ2V0In19fSx7ImlkIjoxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgT2ZmaWNlIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6Ik9mZmljZSJ9fX0seyJpZCI6MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IlJlbnQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJSZW50In19fSx7ImlkIjozLCJuYW1lIjoicmVudCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gNTAwIiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgNTAwIn19fSx7ImlkIjo0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiSW50ZXJuZXQiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJJbnRlcm5ldCJ9fX0seyJpZCI6NiwibmFtZSI6ImludGVybmV0IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA1MCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDUwIn19fSx7ImlkIjo3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiRWxlY3RyaWNpdHkiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJFbGVjdHJpY2l0eSJ9fX0seyJpZCI6OSwibmFtZSI6ImVsZWN0cmljaXR5IiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAzMCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDMwIn19fSx7ImlkIjoxMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJVdGlsaXRpZXMiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJVdGlsaXRpZXMifX19LHsiaWQiOjEyLCJuYW1lIjoidXRpbGl0aWVzIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA1MCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDUwIn19fSx7ImlkIjoyOSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MzEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjMwLCJuYW1lIjoib2ZmaWNlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSB7IHJlbnQsIGludGVybmV0LCBlbGVjdHJpY2l0eSwgdXRpbGl0aWVzIH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IHJlbnQsIGludGVybmV0LCBlbGVjdHJpY2l0eSwgdXRpbGl0aWVzIH0ifX19LHsiaWQiOjQyLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPD5TdW06IHtsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMob2ZmaWNlKSl9PC8+Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgPD5TdW06IHtsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMob2ZmaWNlKSl9PC8+In19fSx7ImlkIjozNSwibmFtZSI6Im9mZmljZUNoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHsgUGllQ2hhcnQsIFJlc3BvbnNpdmVDb250YWluZXIgfSA9IEdsb2JhbC5saWJzLnJlY2hhcnRzO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezQwMH0+XG4gIDxQaWVDaGFydCB3aWR0aD17NDAwfSBoZWlnaHQ9ezQwMH0+XG4gICAge0dsb2JhbC51dGlscy5QaWVETEMoe1xuICAgICAgZGF0YTogT2JqZWN0LmVudHJpZXMob2ZmaWNlKSxcbiAgICAgIGxhYmVsS2V5OiBcIjBcIixcbiAgICAgIGRhdGFLZXk6IFwiMVwiLFxuICAgICAgZm9ybWF0dGVyOiB1dGlscy5mb3JtYXRDdXJyZW5jeSxcbiAgICAgIGN4OiBcIjUwJVwiLFxuICAgICAgY3k6IFwiNTAlXCIsXG4gICAgICBpbm5lclJhZGl1czogNzAsXG4gICAgICBvdXRlclJhZGl1czogMTQwLFxuICAgICAgaXNBbmltYXRpb25BY3RpdmU6IGZhbHNlLFxuICAgIH0pfVxuICA8L1BpZUNoYXJ0PlxuPC9SZXNwb25zaXZlQ29udGFpbmVyPiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjUxLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1MiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIyMgRXF1aXBtZW50Iiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgyIiwidGV4dCI6IkVxdWlwbWVudCJ9fX0seyJpZCI6MTUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJNb2JpbGUiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJNb2JpbGUifX19LHsiaWQiOjE2LCJuYW1lIjoibW9iaWxlIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAyMCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDIwIn19fSx7ImlkIjoxNywibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTgsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJMYXB0b3AiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJMYXB0b3AifX19LHsiaWQiOjE5LCJuYW1lIjoibGFwdG9wIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSA1MCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDUwIn19fSx7ImlkIjoyMCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjEsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJTZXJ2ZXIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJTZXJ2ZXIifX19LHsiaWQiOjIyLCJuYW1lIjoic2VydmVyIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSAyMCIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDIwIn19fSx7ImlkIjoyNiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJEZXNrdG9wIChUYWJsZSwgTW9uaXRvcnMsIERvbmdsZXMsIGV0YykiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJEZXNrdG9wIChUYWJsZSwgTW9uaXRvcnMsIERvbmdsZXMsIGV0YykifX19LHsiaWQiOjI4LCJuYW1lIjoiZGVza3RvcCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gMTAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiAxMCJ9fX0seyJpZCI6MjMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjI0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiUGVuICYgUGFwZXIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiJQZW4gJiBQYXBlciJ9fX0seyJpZCI6MjUsIm5hbWUiOiJwZW5QYXBlciIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gMTAiLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiAxMCJ9fX0seyJpZCI6MzIsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjMzLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjozNCwibmFtZSI6ImVxdWlwbWVudCIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0geyBtb2JpbGUsIGxhcHRvcCwgc2VydmVyLCBkZXNrdG9wLCBwZW5QYXBlciB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBtb2JpbGUsIGxhcHRvcCwgc2VydmVyLCBkZXNrdG9wLCBwZW5QYXBlciB9In19fSx7ImlkIjo0NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IDw+U3VtOiB7bG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGVxdWlwbWVudCkpfTwvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDw+U3VtOiB7bG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGVxdWlwbWVudCkpfTwvPiJ9fX0seyJpZCI6MzYsIm5hbWUiOiJlcXVpcG1lbnRDaGFydCIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCB7IFBpZUNoYXJ0LCBSZXNwb25zaXZlQ29udGFpbmVyIH0gPSBHbG9iYWwubGlicy5yZWNoYXJ0cztcblxuPFJlc3BvbnNpdmVDb250YWluZXIgaGVpZ2h0PXs0MDB9PlxuICA8UGllQ2hhcnQgd2lkdGg9ezQwMH0gaGVpZ2h0PXs0MDB9PlxuICAgIHtHbG9iYWwudXRpbHMuUGllRExDKHtcbiAgICAgIGRhdGE6IE9iamVjdC5lbnRyaWVzKGVxdWlwbWVudCksXG4gICAgICBsYWJlbEtleTogXCIwXCIsXG4gICAgICBkYXRhS2V5OiBcIjFcIixcbiAgICAgIGZvcm1hdHRlcjogdXRpbHMuZm9ybWF0Q3VycmVuY3ksXG4gICAgICBjeDogXCI1MCVcIixcbiAgICAgIGN5OiBcIjUwJVwiLFxuICAgICAgaW5uZXJSYWRpdXM6IDcwLFxuICAgICAgb3V0ZXJSYWRpdXM6IDE0MCxcbiAgICAgIGlzQW5pbWF0aW9uQWN0aXZlOiBmYWxzZSxcbiAgICB9KX1cbiAgPC9QaWVDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjM3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTUsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjU2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjozOCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMjIEV2ZXJ5dGhpbmciLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoiaDIiLCJ0ZXh0IjoiRXZlcnl0aGluZyJ9fX0seyJpZCI6MzksIm5hbWUiOiJldmVyeXRoaW5nIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiPSB7IC4uLm9mZmljZSwgLi4uZXF1aXBtZW50IH0iLCJub3RlIjp7InR5cGUiOiJleHByIiwiY29kZSI6IiB7IC4uLm9mZmljZSwgLi4uZXF1aXBtZW50IH0ifX19LHsiaWQiOjQ2LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ij0gPD5TdW06IHtsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMoZXZlcnl0aGluZykpfTwvPiIsIm5vdGUiOnsidHlwZSI6ImV4cHIiLCJjb2RlIjoiIDw+U3VtOiB7bG9kYXNoLnN1bShPYmplY3QudmFsdWVzKGV2ZXJ5dGhpbmcpKX08Lz4ifX19LHsiaWQiOjQwLCJuYW1lIjoiZXZlcnl0aGluZ0NoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHsgUGllQ2hhcnQsIFJlc3BvbnNpdmVDb250YWluZXIgfSA9IEdsb2JhbC5saWJzLnJlY2hhcnRzO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezQwMH0+XG4gIDxQaWVDaGFydCB3aWR0aD17NDAwfSBoZWlnaHQ9ezQwMH0+XG4gICAge0dsb2JhbC51dGlscy5QaWVETEMoe1xuICAgICAgZGF0YTogT2JqZWN0LmVudHJpZXMoZXZlcnl0aGluZyksXG4gICAgICBsYWJlbEtleTogXCIwXCIsXG4gICAgICBkYXRhS2V5OiBcIjFcIixcbiAgICAgIGZvcm1hdHRlcjogdXRpbHMuZm9ybWF0Q3VycmVuY3ksXG4gICAgICBjeDogXCI1MCVcIixcbiAgICAgIGN5OiBcIjUwJVwiLFxuICAgICAgaW5uZXJSYWRpdXM6IDcwLFxuICAgICAgb3V0ZXJSYWRpdXM6IDE0MCxcbiAgICAgIGlzQW5pbWF0aW9uQWN0aXZlOiBmYWxzZSxcbiAgICB9KX1cbiAgPC9QaWVDaGFydD5cbjwvUmVzcG9uc2l2ZUNvbnRhaW5lcj4ifX19LHsiaWQiOjQ3LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo0OCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NTcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjU4LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjo1OSwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6NDksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiItLS0iLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiItLS0ifX19LHsiaWQiOjUwLCJuYW1lIjoiZXhwb3J0cyIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6Iih7XG4gIG9mZmljZSxcbiAgb2ZmaWNlQ2hhcnQsXG4gIGVxdWlwbWVudCxcbiAgZXF1aXBtZW50Q2hhcnQsXG4gIGV2ZXJ5dGhpbmdDaGFydCxcbiAgc3VtOiBsb2Rhc2guc3VtKE9iamVjdC52YWx1ZXMoZXZlcnl0aGluZykpLFxufSkifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfSx7ImlkIjoxLCJuYW1lIjoiSW5jb21lIiwic3RhdGUiOnsidCI6InJlc2hlZXQuc2VsZWN0b3IiLCJ2IjowLCJtb2RlIjoicnVuIiwiZXhwciI6IlNoZWV0T2YoTm90ZSkiLCJpbm5lciI6eyJ0IjoicmVzaGVldC5zaGVldCIsInYiOjIsImxpbmVzIjpbeyJpZCI6MCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiMgSW5jb21lIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6ImgxIiwidGV4dCI6IkluY29tZSJ9fX0seyJpZCI6NCwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MywibmFtZSI6Im1vbnRocyIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJjb25zdCBob3VybHlXYWdlID0gNzVcblxubG9kYXNoKCRgV29ya2luZyBIb3Vyc2AuRGF0YSlcbiAgLm1hcChlbnRyeSA9PiAoe1xuICAgIG1vbnRoOiBHbG9iYWwubGlicy5kYXRlZm5zLmZvcm1hdChlbnRyeS5zdGFydCwgJ0xMTCB5eXl5JyksXG4gICAgLi4uZW50cnksXG4gIH0pKVxuICAuZ3JvdXBCeSgnbW9udGgnKVxuICAubWFwVmFsdWVzKGVudHJpZXMgPT5cbiAgICBHbG9iYWwudXRpbHMucm91bmRPbihcbiAgICAgIGxvZGFzaC5zdW1CeShlbnRyaWVzLCAnd29ya0hvdXJzJykgKiBob3VybHlXYWdlLFxuICAgICAgMC4wMSxcbiAgICApXG4gIClcbiAgLnZhbHVlKCkifX19LHsiaWQiOjYsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjcsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiJBZnRlciBwbGFubmVkIGV4cGVuc2VzOiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IkFmdGVyIHBsYW5uZWQgZXhwZW5zZXM6In19fSx7ImlkIjo4LCJuYW1lIjoiYmFsYW5jZSIsInZpc2liaWxpdHkiOiJyZXN1bHQiLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIvQ29kZSIsIm5vdGUiOnsidHlwZSI6ImJsb2NrIiwiaXNJbnN0YW50aWF0ZWQiOnRydWUsImNvZGUiOiJDb2RlIiwic3RhdGUiOiJsb2Rhc2gubWFwVmFsdWVzKG1vbnRocywgbW9udGggPT5cbiAgbW9udGggLSBFeHBlbnNlcy5zdW1cbikifX19LHsiaWQiOjksIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjEwLCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiIn19fSx7ImlkIjoxMSwibmFtZSI6ImNoYXJ0IiwidmlzaWJpbGl0eSI6InJlc3VsdCIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6Ii9Db2RlIiwibm90ZSI6eyJ0eXBlIjoiYmxvY2siLCJpc0luc3RhbnRpYXRlZCI6dHJ1ZSwiY29kZSI6IkNvZGUiLCJzdGF0ZSI6ImNvbnN0IHtcbiAgUmVzcG9uc2l2ZUNvbnRhaW5lcixcbiAgQmFyQ2hhcnQsXG4gIEJhcixcbiAgTGFiZWxMaXN0LFxuICBYQXhpcyxcbiAgWUF4aXMsXG4gIFRvb2x0aXAsXG59ID0gR2xvYmFsLmxpYnMucmVjaGFydHM7XG5cbmNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyhiYWxhbmNlKVxuICAubWFwKEdsb2JhbC51dGlscy5sYWJlbGVyKCdtb250aCcsICdiYWxhbmNlJykpO1xuXG48UmVzcG9uc2l2ZUNvbnRhaW5lciBoZWlnaHQ9ezMwMH0+XG4gIDxCYXJDaGFydCBkYXRhPXtkYXRhfT5cbiAgICA8VG9vbHRpcCAvPlxuICAgIDxCYXIgdHlwZT1cIm1vbm90b25lXCIgZGF0YUtleT1cImJhbGFuY2VcIiBmaWxsPVwiI2Y0ZDA2ZlwiPlxuICAgICAgPExhYmVsTGlzdCBkYXRhS2V5PVwiYmFsYW5jZVwiIHBvc2l0aW9uPVwidG9wXCIgZm9ybWF0dGVyPXt1dGlscy5mb3JtYXRDdXJyZW5jeX0gLz5cbiAgICA8L0Jhcj5cbiAgICA8WEF4aXMgZGF0YUtleT1cIm1vbnRoXCIgLz5cbiAgICA8WUF4aXMgdGlja0Zvcm1hdHRlcj17dXRpbHMuZm9ybWF0Q3VycmVuY3l9IHdpZHRoPXsxMDB9IC8+XG4gIDwvQmFyQ2hhcnQ+XG48L1Jlc3BvbnNpdmVDb250YWluZXI+In19fSx7ImlkIjoxMiwibmFtZSI6IiIsInZpc2liaWxpdHkiOiJibG9jayIsIndpZHRoIjoibmFycm93Iiwic3RhdGUiOnsidCI6InJlc2hlZXQubm90ZSIsInYiOjEsImxldmVsIjowLCJpbnB1dCI6IiIsIm5vdGUiOnsidHlwZSI6InRleHQiLCJ0YWciOiJwIiwidGV4dCI6IiJ9fX0seyJpZCI6MTMsIm5hbWUiOiIiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiIiLCJub3RlIjp7InR5cGUiOiJ0ZXh0IiwidGFnIjoicCIsInRleHQiOiIifX19LHsiaWQiOjE0LCJuYW1lIjoiIiwidmlzaWJpbGl0eSI6ImJsb2NrIiwid2lkdGgiOiJuYXJyb3ciLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5ub3RlIiwidiI6MSwibGV2ZWwiOjAsImlucHV0IjoiLS0tIiwibm90ZSI6eyJ0eXBlIjoidGV4dCIsInRhZyI6InAiLCJ0ZXh0IjoiLS0tIn19fSx7ImlkIjoxNSwibmFtZSI6ImV4cG9ydHMiLCJ2aXNpYmlsaXR5IjoiYmxvY2siLCJ3aWR0aCI6Im5hcnJvdyIsInN0YXRlIjp7InQiOiJyZXNoZWV0Lm5vdGUiLCJ2IjoxLCJsZXZlbCI6MCwiaW5wdXQiOiI9IHsgbW9udGhzLCBiYWxhbmNlLCBjaGFydCB9Iiwibm90ZSI6eyJ0eXBlIjoiZXhwciIsImNvZGUiOiIgeyBtb250aHMsIGJhbGFuY2UsIGNoYXJ0IH0ifX19XX19LCJpc0NvbGxhcHNlZCI6dHJ1ZSwiY2hpbGRyZW4iOltdfV19XX1dLCJ2aWV3U3RhdGUiOnsic2lkZWJhck9wZW4iOnRydWUsIm9wZW5QYWdlIjpbNV19LCJ0ZW1wbGF0ZSI6eyJpZCI6LTEsIm5hbWUiOiIiLCJzdGF0ZSI6eyJ0IjoicmVzaGVldC5zZWxlY3RvciIsInYiOjAsIm1vZGUiOiJydW4iLCJleHByIjoiU2hlZXRPZihOb3RlKSIsImlubmVyIjp7InQiOiJyZXNoZWV0LnNoZWV0IiwidiI6MiwibGluZXMiOltdfX0sImlzQ29sbGFwc2VkIjp0cnVlLCJjaGlsZHJlbiI6W119fX0=","name":"Demo Target.json","options":{"type":"application/json","lastModified":1716387270088}}}}}},{"id":5,"name":"json","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= JSON.parse(await jsonFile.text())","note":{"type":"expr","code":" JSON.parse(await jsonFile.text())"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"part","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= json.inner.pages[1].children","note":{"type":"expr","code":" json.inner.pages[1].children"}}},{"id":6,"name":"","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip } =\n  await import('https://esm.sh/recharts?external=react');\n  \nconst { default: humanFormat } = await import('https://esm.sh/human-format')\n  \nconst data = Object.entries(part)\n  .map(([key, value]) => ({ key, size: JSON.stringify(value).length }));\n\n<ResponsiveContainer height={400}>\n  <BarChart data={data}>\n    <Tooltip formatter={humanFormat.bytes} />\n    <Bar type=\"monotone\" dataKey=\"size\" fill=\"#8884d8\" />\n    <XAxis dataKey=\"key\"/>\n    <YAxis width={100} tickFormatter={humanFormat.bytes} />\n  </BarChart>\n</ResponsiveContainer>"}}}]}}}}]}},"isCollapsed":true,"children":[{"id":1,"name":"libs","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"humanFormat","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/human-format')","note":{"type":"expr","code":" import('https://esm.sh/human-format')"}}},{"id":2,"name":"recharts","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/recharts?external=react')","note":{"type":"expr","code":" import('https://esm.sh/recharts?external=react')"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":5,"name":"exports","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { humanFormat: humanFormat.default, recharts }","note":{"type":"expr","code":" { humanFormat: humanFormat.default, recharts }"}}}]}},"isCollapsed":false,"children":[]},{"id":0,"name":"Deferred","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Deferred(computation) {\n  return resheet.core.block.create({\n    init: undefined,\n    view({ state, dispatch }, ref) {\n      return (\n        <button\n          ref={ref}\n          className=\"rounded px-2 py-1 bg-gray-50 hover:bg-gray-100 border border-gray-100\"\n          onClick={() => dispatch(() => ({ state: computation() }))}\n        >\n          Run {computation.toString()}\n        </button>\n      )\n    },\n    getResult(state) { return state },\n    recompute(state) { return { state, invalidated: false } },\n    fromJSON() { return undefined },\n    toJSON() { return null },\n  })\n}"}}}]}},"isCollapsed":false,"children":[]}]},{"id":2,"name":"Custom Blocks","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Custom Blocks","note":{"type":"text","tag":"h1","text":"Custom Blocks"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Create custom Blocks and use the Inspect Block to get a glimpse into ReSheet.","note":{"type":"text","tag":"p","text":"Create custom Blocks and use the Inspect Block to get a glimpse into ReSheet."}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Simple custom Blocks","note":{"type":"text","tag":"h2","text":"Simple custom Blocks"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's build a simple checkbox Block:","note":{"type":"text","tag":"p","text":"Let's build a simple checkbox Block:"}}},{"id":8,"name":"CheckBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"label => SimpleBlock(false, ({ ref, state, onUpdate }) =>\n  <label>\n    <input\n      ref={ref}\n      type=\"checkbox\"\n      checked={state}\n      onChange={onUpdate('target.checked')}\n      />\n    {' '}\n    {label}\n  </label>\n)"}}},{"id":9,"name":"input","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/CheckBlock(\"Does it work?\")","note":{"type":"block","isInstantiated":true,"code":"CheckBlock(\"Does it work?\")","state":true}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":87,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":88,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Having an editable label would be nice:","note":{"type":"text","tag":"p","text":"Having an editable label would be nice:"}}},{"id":14,"name":"CheckEditableBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"SimpleBlock(\n  { checked: false, label: '' },\n  ({ ref, state, onUpdate, setState }) => (\n    <label>\n      <input\n        type=\"checkbox\"\n        checked={state.checked}\n        onChange={onUpdate('target.checked', 'checked')}\n        />\n      {' '}\n      <input\n        ref={ref}\n        type=\"text\"\n        value={state.label}\n        placeholder=\"label\"\n        onKeyDown={ev => {\n          if (ev.key === 'Enter') {\n            setState(checked => !checked, 'checked')\n          }\n        }}\n        onChange={onUpdate('target.value', 'label')}\n        />\n    </label>\n  ),\n)"}}},{"id":15,"name":"input2","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/CheckEditableBlock","note":{"type":"block","isInstantiated":true,"code":"CheckEditableBlock","state":{"checked":true,"label":"This works too"}}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input2","note":{"type":"expr","code":" input2"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":85,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":86,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a slider Block:","note":{"type":"text","tag":"p","text":"Build a slider Block:"}}},{"id":20,"name":"SliderBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function SliderBlock(props) {\n  const rangeProps = immutable.merge({ min: 0, max: 100, step: 1 }, props)\n  return SimpleBlock(rangeProps.min ?? 0, ({ ref, state, onUpdate }) =>\n    <input\n      ref={ref}\n      type=\"range\"\n      className=\"w-full\"\n      value={state}\n      {...rangeProps}\n      onChange={onUpdate('target.value', [], Number)}\n    />\n  )\n}"}}},{"id":21,"name":"rangeInput","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SliderBlock()","note":{"type":"block","isInstantiated":true,"code":"SliderBlock()","state":37}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= rangeInput","note":{"type":"expr","code":" rangeInput"}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":113,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":114,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":115,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a select Block:","note":{"type":"text","tag":"p","text":"Build a select Block:"}}},{"id":116,"name":"SelectBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function SelectBlock(values) {\n  return SimpleBlock(values[0],\n    ({ ref, state, onUpdate }) => (\n      <select\n        ref={ref}\n        className=\"w-full\"\n        value={state}\n        onChange={onUpdate('target.value')}\n      >\n        {values.map(value => (\n          <option key={value} value={value}>\n            {value}\n          </option>\n        ))}\n      </select>\n    )\n  )\n}"}}},{"id":118,"name":"options","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ['January', 'February', 'March', 'April', 'May', 'June']","note":{"type":"expr","code":" ['January', 'February', 'March', 'April', 'May', 'June']"}}},{"id":117,"name":"selected","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SelectBlock(options)","note":{"type":"block","isInstantiated":true,"code":"SelectBlock(options)","state":"March"}}},{"id":119,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= selected","note":{"type":"expr","code":" selected"}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":121,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":120,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":137,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Simple Custom Block Wrapper","note":{"type":"text","tag":"h2","text":"Simple Custom Block Wrapper"}}},{"id":122,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Use an external library and build a Block around it:","note":{"type":"text","tag":"p","text":"Use an external library and build a Block around it:"}}},{"id":127,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":124,"name":"Datepicker","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/react-datepicker?external=react')","note":{"type":"expr","code":" import('https://esm.sh/react-datepicker?external=react')"}}},{"id":125,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"includeCss('https://esm.sh/react-datepicker/dist/react-datepicker.css')"}}},{"id":128,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":138,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"It looks like this:","note":{"type":"text","tag":"p","text":"It looks like this:"}}},{"id":126,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= <Datepicker.default inline />","note":{"type":"expr","code":" <Datepicker.default inline />"}}},{"id":135,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":136,"name":"datefns","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= import('https://esm.sh/date-fns')","note":{"type":"expr","code":" import('https://esm.sh/date-fns')"}}},{"id":129,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":139,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's wrap it in a Block, so its state is persisted and the selected date can be used:","note":{"type":"text","tag":"p","text":"Let's wrap it in a Block, so its state is persisted and the selected date can be used:"}}},{"id":123,"name":"DateBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function DateBlock() {\n  return SimpleBlock(new Date(),\n    ({ state, setState }) => {\n      return (\n        <div className=\"flex flex-col items-center\">\n          <Datepicker.default\n            inline\n            selected={state}\n            onSelect={date => setState(date)}\n            />\n        </div>\n      )\n    },\n    {\n      toJSON(date) { return datefns.formatISO(date) },\n      fromJSON(json) {\n        const date = datefns.parseISO(json)\n        return datefns.isValid(date) ? date : new Date()\n      },\n    },\n  )\n}"}}},{"id":133,"name":"date","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/DateBlock()","note":{"type":"block","isInstantiated":true,"code":"DateBlock()","state":"2024-05-23T20:32:56+02:00"}}},{"id":134,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= date","note":{"type":"expr","code":" date"}}},{"id":131,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":132,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Builtin Blocks","note":{"type":"text","tag":"h2","text":"Builtin Blocks"}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We already used `Code` many times:","note":{"type":"text","tag":"p","text":"We already used `Code` many times:"}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Code`","note":{"type":"text","tag":"p","text":"`/Code`"}}},{"id":34,"name":"codeResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"12 * 12"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":82,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"But we can also take a peek inside with the `Inspect` Block:","note":{"type":"text","tag":"p","text":"But we can also take a peek inside with the `Inspect` Block:"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Code)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Code)`"}}},{"id":37,"name":"inspectCodeResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Code)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Code)","state":"Promise.resolve(codeResult)"}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectCodeResult","note":{"type":"expr","code":" inspectCodeResult"}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":83,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The `Note` Block, of which every line here consists:","note":{"type":"text","tag":"p","text":"The `Note` Block, of which every line here consists:"}}},{"id":48,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Note)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Note)`"}}},{"id":28,"name":"inspectNoteBlockResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Note)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Note)","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectCodeResult.state","note":{"type":"expr","code":" inspectCodeResult.state"}}}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNoteBlockResult","note":{"type":"expr","code":" inspectNoteBlockResult"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":84,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Higher-Order Blocks","note":{"type":"text","tag":"h3","text":"Higher-Order Blocks"}}},{"id":42,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Higher-Order Blocks embed other Blocks inside of them:","note":{"type":"text","tag":"p","text":"Higher-Order Blocks embed other Blocks inside of them:"}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"(The `Inspect` Block was already a very simple example of a higher-order Block)","note":{"type":"text","tag":"p","text":"(The `Inspect` Block was already a very simple example of a higher-order Block)"}}},{"id":43,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"You already know `SheetOf`, it's the Block powering every Page, with an embedded Note:","note":{"type":"text","tag":"p","text":"You already know `SheetOf`, it's the Block powering every Page, with an embedded Note:"}}},{"id":47,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(SheetOf(Note))`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(SheetOf(Note))`"}}},{"id":45,"name":"inspectSheetOfNoteBlockResult","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(SheetOf(Note))","state":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is a line of the SheetOf Block, which contains a Note Block in which this sentence is written.","note":{"type":"text","tag":"p","text":"This is a line of the SheetOf Block, which contains a Note Block in which this sentence is written."}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is another line.","note":{"type":"text","tag":"p","text":"This is another line."}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNoteBlockResult.state.note","note":{"type":"expr","code":" inspectNoteBlockResult.state.note"}}}]}}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectSheetOfNoteBlockResult.state.lines","note":{"type":"expr","code":" inspectSheetOfNoteBlockResult.state.lines"}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":80,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":81,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":53,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"To be more precise, these pages don't contain the `SheetOf` Block itself but a `BlockSelector` Block pre-set with `SheetOf(Note)`:","note":{"type":"text","tag":"p","text":"To be more precise, these pages don't contain the `SheetOf` Block itself but a `BlockSelector` Block pre-set with `SheetOf(Note)`:"}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/BlockSelector('SheetOf(Note)', SheetOf(Note))` ","note":{"type":"text","tag":"p","text":"`/BlockSelector('SheetOf(Note)', SheetOf(Note))` "}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/BlockSelector('SheetOf(Note)', SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"BlockSelector('SheetOf(Note)', SheetOf(Note))","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The `BlockSelector` Block allows you to change the Block inside of it.","note":{"type":"text","tag":"p","text":"The `BlockSelector` Block allows you to change the Block inside of it."}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"You can use any other Block, change it at the top left.","note":{"type":"text","tag":"p","text":"You can use any other Block, change it at the top left."}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Be aware:","note":{"type":"text","tag":"p","text":"Be aware:"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"Changing the Block will delete this content here.","note":{"type":"text","tag":"p","text":"Changing the Block will delete this content here."}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"_**`C-Z`** or **`esc`** are your friends._","note":{"type":"text","tag":"p","text":"_**`C-Z`** or **`esc`** are your friends._"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Try:","note":{"type":"text","tag":"p","text":"Try:"}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"`Code`","note":{"type":"text","tag":"p","text":"`Code`"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"`SheetOf(Code)`","note":{"type":"text","tag":"p","text":"`SheetOf(Code)`"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"`SheetOf(CheckEditableBlock)`","note":{"type":"text","tag":"p","text":"`SheetOf(CheckEditableBlock)`"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"In the subpage \"SimpleBlock\" of this page (\"Advanced Playground\") you can see an example, where the Page was changed to another Block.","note":{"type":"text","tag":"p","text":"In the subpage \"SimpleBlock\" of this page (\"Advanced Playground\") you can see an example, where the Page was changed to another Block."}}}]}}}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":78,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":79,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":101,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Custom Higher-Order Block","note":{"type":"text","tag":"h2","text":"Custom Higher-Order Block"}}},{"id":102,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Building a higher-order Block is more involved, as you have to integrate with the embedded (inner) Blocks' calculations.","note":{"type":"text","tag":"p","text":"Building a higher-order Block is more involved, as you have to integrate with the embedded (inner) Blocks' calculations."}}},{"id":103,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's build an HStack Block where you can put multiple Blocks in a row. As a simplification, these Blocks won't be able to access each other's values.","note":{"type":"text","tag":"p","text":"Let's build an HStack Block where you can put multiple Blocks in a row. As a simplification, these Blocks won't be able to access each other's values."}}},{"id":104,"name":"HStack","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function HStack(...subblocks) {\n  // wrap the subblocks with some safeguards\n  const safeblocks = subblocks.map(resheet.blocks.component.safeBlock)\n  \n  return SimpleBlock(\n    safeblocks.map(block => block.init),\n    \n    ({ state, fieldDispatcher, env }) => (\n      <div className=\"flex flex-row space-x-2\">\n        {safeblocks.map((block, index) => (\n          <div className=\"overflow-x-auto flex-[1_0_0%]\">\n            <block.Component\n              key={index}\n              state={state[index]}\n              dispatch={fieldDispatcher(index)}\n              env={env}\n              />\n          </div>\n        ))}\n      </div>\n    ),\n    \n    {\n      // What is the value of this Block?\n      // @returns an Array of the subblocks' values\n      getResult(state) {\n        return safeblocks.map((block, index) =>\n          block.getResult(state[index])\n        )\n      },\n      \n      // Load a state from json\n      // dispatch and env are needed, because to load some json one\n      // probably has to evaluate the code already. For example when\n      // we will use this Block and load its saved state from a file,\n      // first this definition of the Block has to be evaluated and\n      // then we can use the following fromJSON function to continue\n      // loading the state.\n      // @returns the loaded state\n      fromJSON(json, dispatch, env) {\n        return safeblocks.map((block, index) =>\n          block.fromJSON(\n            json[index],\n            resheet.util.dispatch.fieldDispatcher(index, dispatch),\n            env,\n          )\n        )\n      },\n      \n      // Converts a state to a JSON-serializable value.\n      // @returns a value that can be stringified (NOT an already\n      //          stringified JSON string!)\n      toJSON(state) {\n        return safeblocks.map((block, index) =>\n          block.toJSON(state[index])\n        )\n      },\n      \n      // Reevaluate the computations inside because some variables\n      // given in the Set<string> changedVars changed.\n      // @returns {\n      //            state: /* the new state */,\n      //            invalidated: /* true, if our value changed and\n      //                          * therefore our dependants have\n      //                          * to be recomputed\n      //                          */,\n      //          }\n      recompute(state, dispatch, env, changedVars) {\n        const recomputations = (\n          safeblocks.map((block, index) =>\n            block.recompute(\n              state[index],\n              resheet.util.dispatch.fieldDispatcher(index, dispatch),\n              env,\n              changedVars,\n            )\n          )\n        )\n        \n        const newStates = recomputations.map(recomp => recomp.state)\n        const invalidated = recomputations.some(recomp => recomp.invalidated)\n        return {\n          state: newStates,\n          invalidated,\n        }\n      },\n    },\n  )\n}"}}},{"id":107,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(HStack(SheetOf(Note), Code))`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(HStack(SheetOf(Note), Code))`"}}},{"id":105,"name":"inspectHStack","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(HStack(SheetOf(Note), Code))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(HStack(SheetOf(Note), Code))","state":[{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"Now we can put some stuff side-by-side","note":{"type":"text","tag":"p","text":"Now we can put some stuff side-by-side"}}},{"id":1,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"As we haven't implemented any keybindings we have to click to navigate between the columns","note":{"type":"text","tag":"p","text":"As we haven't implemented any keybindings we have to click to navigate between the columns"}}}]},"const block = HStack(SheetOf(Note), Code)\nblock.toJSON(block.init)"]}}},{"id":106,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectHStack.state","note":{"type":"expr","code":" inspectHStack.state"}}},{"id":108,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":109,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":110,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":57,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Grand Finale","note":{"type":"text","tag":"h3","text":"Grand Finale"}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"As the Grand Finale, we're going to embed a whole ReSheet instance:","note":{"type":"text","tag":"p","text":"As the Grand Finale, we're going to embed a whole ReSheet instance:"}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(DocumentOf(Code))`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(DocumentOf(Code))`"}}},{"id":95,"name":"inspectReSheetSimple","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(DocumentOf(Code))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(DocumentOf(Code))","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[{"id":0,"name":"","state":"// This is a simplified version. But we already know how to embed the full version:\n\nblocks.DocumentOf(\n  blocks.BlockSelector(\n    'SheetOf(Note)',\n    blocks.SheetOf(blocks.Note),\n    blocks,\n  )\n)\n\n// Now is only left to inspect the state of this whole document below.","isCollapsed":true,"children":[]}],"viewState":{"sidebarOpen":true,"openPage":[0]},"template":{"id":-1,"name":"","state":"","isCollapsed":true,"children":[]}}}}}},{"id":61,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectReSheetSimple.state","note":{"type":"expr","code":" inspectReSheetSimple.state"}}},{"id":62,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":63,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":89,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":90,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Full ReSheet Version","note":{"type":"text","tag":"h4","text":"Full ReSheet Version"}}},{"id":64,"name":"DefaultPageBlock","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= BlockSelector('SheetOf(Note)', SheetOf(Note))","note":{"type":"expr","code":" BlockSelector('SheetOf(Note)', SheetOf(Note))"}}},{"id":65,"name":"ReSheet","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= DocumentOf(DefaultPageBlock)","note":{"type":"expr","code":" DocumentOf(DefaultPageBlock)"}}},{"id":66,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":67,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Here is the full ReSheet version. Try to save the big ReSheet document and load it inside this small instance:","note":{"type":"text","tag":"p","text":"Here is the full ReSheet version. Try to save the big ReSheet document and load it inside this small instance:"}}},{"id":91,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(ReSheet)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(ReSheet)`"}}},{"id":96,"name":"inspectReSheet","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(ReSheet)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(ReSheet)","state":{"history":[],"inner":{"t":"resheet.document","v":1,"pages":[],"viewState":{"sidebarOpen":true,"openPage":[]},"template":{"id":-1,"name":"","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[]}},"isCollapsed":true,"children":[]}}}}}},{"id":69,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectReSheet.state","note":{"type":"expr","code":" inspectReSheet.state"}}},{"id":70,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":71,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":72,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"That's it. ReSheet is built to be composable and extensible. Its parts can be plugged together and extended as you like.","note":{"type":"text","tag":"p","text":"That's it. ReSheet is built to be composable and extensible. Its parts can be plugged together and extended as you like."}}},{"id":73,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":74,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":75,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":112,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":111,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":76,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":97,"name":"previewBlockTemplate","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(SheetOf(Note))","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(SheetOf(Note))","state":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Custom Blocks Preview","note":{"type":"text","tag":"h3","text":"Custom Blocks Preview"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We build these custom Blocks in this Page:","note":{"type":"text","tag":"p","text":"We build these custom Blocks in this Page:"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/DateBlock()`","note":{"type":"text","tag":"h4","text":"`/DateBlock()`"}}},{"id":26,"name":"dateBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/DateBlock()","note":{"type":"block","isInstantiated":true,"code":"DateBlock()","state":"2024-05-23T20:32:56+02:00"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dateBlockValue","note":{"type":"expr","code":" dateBlockValue"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/SliderBlock()`","note":{"type":"text","tag":"h4","text":"`/SliderBlock()`"}}},{"id":9,"name":"sliderBlockValue","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/SliderBlock()","note":{"type":"block","isInstantiated":true,"code":"SliderBlock()","state":49}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### `/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`","note":{"type":"text","tag":"h4","text":"`/HStack(DateBlock(), SliderBlock(), SelectBlock(options))`"}}},{"id":28,"name":"options","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= ['yes', 'no']","note":{"type":"expr","code":" ['yes', 'no']"}}},{"id":22,"name":"hstack","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/HStack(DateBlock(), SliderBlock(), SelectBlock(options))","note":{"type":"block","isInstantiated":true,"code":"HStack(DateBlock(), SliderBlock(), SelectBlock(options))","state":["2024-05-23T20:40:02+02:00",35,"yes"]}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= hstack","note":{"type":"expr","code":" hstack"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"#### Built-in Blocks","note":{"type":"text","tag":"h4","text":"Built-in Blocks"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"And we inspect some built-in Blocks:","note":{"type":"text","tag":"p","text":"And we inspect some built-in Blocks:"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"`/Debug.Inspect(Note)`","note":{"type":"text","tag":"p","text":"`/Debug.Inspect(Note)`"}}},{"id":15,"name":"inspectNote","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Note)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Note)","state":{"t":"resheet.note","v":1,"level":0,"input":"= sliderBlockValue","note":{"type":"expr","code":" sliderBlockValue"}}}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= inspectNote.state","note":{"type":"expr","code":" inspectNote.state"}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>","note":{"type":"text","tag":"p","text":"<span className=\"text-gray-400 text-sm\">Psst: And don't miss the Grand Finale!</span>"}}}]}}}},{"id":99,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":100,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":98,"name":"preview","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"Util.WithEnv(\n  env => ({\n    ...env,\n    CheckBlock,\n    CheckEditableBlock,\n    SliderBlock,\n    SelectBlock,\n    DateBlock,\n    HStack,\n  }),\n  previewBlockTemplate.derivedBlock,\n)"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"SimpleBlock","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"Code","inner":"function update(value, path, fn) {\n  if (!path || Array.isArray(path) && path.length === 0) {\n    return fn(value)\n  }\n  else {\n    return immutable.update(value, path, fn)\n  }\n}\n\nfunction SimpleBlock(init, view, desc={}) {\n  return resheet.core.block.create({\n    init,\n    view({ state, dispatch, env }, ref) {\n      function setState(newState, path=[]) {\n        const updateState = (\n          typeof newState === 'function' ?\n            newState\n          :\n            () => newState\n        )\n        \n        dispatch(state => ({\n          state: update(state, path, updateState),\n        }))\n      }\n      \n      function onUpdate(evPath, statePath=[], processValue=lodash.identity) {\n        return ev => {\n          setState(processValue(lodash.get(ev, evPath)), statePath)\n        }\n      }\n      \n      function fieldDispatcher(field) {\n        return resheet.util.dispatch.fieldDispatcher(field, dispatch)\n      }\n      \n      return view({\n        state, dispatch, env, ref,\n        setState, onUpdate, fieldDispatcher,\n      })\n    },\n    getResult(state) { return state },\n    recompute(state) { return { state, invalidated: false } },\n    fromJSON(json) { return json ?? init },\n    toJSON(state) { return state },\n    ...desc,\n  })\n}"},"isCollapsed":false,"children":[]},{"id":1,"name":"includeCss","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"cleanId","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function cleanId(id) {\n  id = id.replace(/\\s+/g, '-');\n  id = id.replace(/[^\\w\\s-]/gi, '');\n  \n  if (!/^[a-zA-Z_]/.test(id)) {\n    id = '_' + id;\n  }\n  \n  return id.toLowerCase();\n}"}}},{"id":0,"name":"includeCss","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function includeCss(url) {\n  const id = cleanId(url)\n  \n  const found = document.getElementById(id)\n  if (found) { return found }\n\n  const link = document.createElement('link')\n  link.id = id\n  link.href = url\n  link.rel = 'stylesheet'\n  \n  document.head.appendChild(link)\n  \n  return link\n}"}}}]}},"isCollapsed":true,"children":[]}]},{"id":4,"name":"Interactive Game Dev","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Interactive Game Dev","note":{"type":"text","tag":"h1","text":"Interactive Game Dev"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Build a custom Game Block for interactively developing a simple game. Leverage existing Blocks to combine them to the tailored needs of a Game Editor.","note":{"type":"text","tag":"p","text":"Build a custom Game Block for interactively developing a simple game. Leverage existing Blocks to combine them to the tailored needs of a Game Editor."}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This is just a showcase of how powerful a custom-built block can be. It doesn't include a step-by-step guide or explanation of the Game Block implementation.","note":{"type":"text","tag":"p","text":"This is just a showcase of how powerful a custom-built block can be. It doesn't include a step-by-step guide or explanation of the Game Block implementation."}}},{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"A Game consists of 3 parts:","note":{"type":"text","tag":"p","text":"A Game consists of 3 parts:"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- The State: defining the current state of the game (where is the character, health, etc)","note":{"type":"text","tag":"li","text":"The State: defining the current state of the game (where is the character, health, etc)"}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- The Update Logic: calculates a new state of the game by simulating a time-step of the game or responding to input","note":{"type":"text","tag":"li","text":"The Update Logic: calculates a new state of the game by simulating a time-step of the game or responding to input"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- The Render Logic: creates an image corresponding to the state","note":{"type":"text","tag":"li","text":"The Render Logic: creates an image corresponding to the state"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Therefore you can edit these 3 components:","note":{"type":"text","tag":"p","text":"Therefore you can edit these 3 components:"}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- Initial State: How does the game start?","note":{"type":"text","tag":"li","text":"Initial State: How does the game start?"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- Update: calculate a new state out of the old state and an input (if it's `undefined` the update is a simulation-step)","note":{"type":"text","tag":"li","text":"Update: calculate a new state out of the old state and an input (if it's `undefined` the update is a simulation-step)"}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":1,"input":"- Render: render the game","note":{"type":"text","tag":"li","text":"Render: render the game"}}},{"id":29,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":30,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"As everywhere else you can see the live effects of your code changes.","note":{"type":"text","tag":"p","text":"As everywhere else you can see the live effects of your code changes."}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":32,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Simple Animation","note":{"type":"text","tag":"h2","text":"Simple Animation"}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"This example doesn't react to input and only runs some simulation. Start and stop with the left button, make a single simulation step with \"Update\" and reset to the initial state with \"Reset\".","note":{"type":"text","tag":"p","text":"This example doesn't react to input and only runs some simulation. Start and stop with the left button, make a single simulation step with \"Update\" and reset to the initial state with \"Reset\"."}}},{"id":17,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Game","note":{"type":"block","isInstantiated":true,"code":"Game","state":{"init":"({\n  y: 200,\n  ySpeed: 0,\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":4,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: state.ySpeed - 0.75 }","note":{"type":"expr","code":" { ...state, ySpeed: state.ySpeed - 0.75 }"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":7,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: 12 }","note":{"type":"expr","code":" { ...state, ySpeed: 12 }"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":10,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.y <= 0 ? jump : gravity","note":{"type":"expr","code":" state.y <= 0 ? jump : gravity"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":13,"name":"newState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...forces, y: forces.y + forces.ySpeed }","note":{"type":"expr","code":" { ...forces, y: forces.y + forces.ySpeed }"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(update)\n  \n  return (\n    <div>\n      <div className=\"w-full flex flex-row space-x-2\">\n        <button\n          className={`\n            flex-1 rounded\n            bg-${running ? \"green\" : \"red\"}-100\n            hover:bg-${running ? \"green\" : \"red\"}-200\n          `}\n          onClick={toggleRunning}\n        >\n          {running ? \"Running\" : \"Stopped\"}\n        </button>\n\n        <button\n          className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n          onClick={() => update(16)}\n        >\n          Step\n        </button>\n      </div> \n      \n      <svg className=\"w-full\" height={height}>\n        <defs>\n          <pattern id=\"platform\" patternUnits=\"userSpaceOnUse\" width={tileSize} height={tileSize}>\n            <image href={Tiles.ground.src} width={tileSize} height={tileSize} />\n          </pattern>\n        </defs>\n      \n        <rect transform=\"translate(0, 336)\" width=\"2000\" height={tileSize} fill=\"url(#platform)\" />\n      \n        <image\n          transform={`\n            translate(100, ${ground - state.y})\n            translate(${-tileSize/2}, ${-tileSize})\n          `}\n          href={Tiles.character.src}\n          width={tileSize}\n          height={tileSize}\n          />\n      </svg>\n    </div>\n  )\n}"}}}]}}}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= $17","note":{"type":"expr","code":" $17"}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":34,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":35,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Input","note":{"type":"text","tag":"h1","text":"Input"}}},{"id":22,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"We add some keyboard input handling and extend the character to be able to move left and right.","note":{"type":"text","tag":"p","text":"We add some keyboard input handling and extend the character to be able to move left and right."}}},{"id":15,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Game","note":{"type":"block","isInstantiated":true,"code":"Game","state":{"init":"({\n  x: 100,\n  y: 400,\n  xSpeed: 0,\n  ySpeed: 0,\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulation","note":{"type":"text","tag":"h3","text":"Simulation"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":4,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: state.ySpeed - 0.75 }","note":{"type":"expr","code":" { ...state, ySpeed: state.ySpeed - 0.75 }"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":6,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":7,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, ySpeed: 12 }","note":{"type":"expr","code":" { ...state, ySpeed: 12 }"}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":9,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":10,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.y <= 0 ? jump : gravity","note":{"type":"expr","code":" state.y <= 0 ? jump : gravity"}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":12,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":13,"name":"simulation","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}","note":{"type":"expr","code":" {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}"}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":15,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### React to Input","note":{"type":"text","tag":"h3","text":"React to Input"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":17,"name":"reaction","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"if (!input) return;\n\nconst xSpeed = (\n  input.type === 'simulate' ?\n    state.xSpeed\n  : input.type === 'keyup' ? // This is not 100% correct, but let's keep it simple\n    0\n  : input.key === 'ArrowLeft' ?\n    -3\n  : input.key === 'ArrowRight' ?\n    3\n  :\n    state.xSpeed\n)\n\nreturn {\n  ...state,\n  xSpeed,\n}"}}},{"id":18,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":19,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final State","note":{"type":"text","tag":"h3","text":"Final State"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Decide which state to use based on the input:","note":{"type":"text","tag":"p","text":"Decide which state to use based on the input:"}}},{"id":21,"name":"finalState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input && input.type !== 'simulate' ? reaction : simulation","note":{"type":"expr","code":" input && input.type !== 'simulate' ? reaction : simulation"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":0,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(dt => update({ type: 'simulate', dt }))\n  \n  function react(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    \n    update(ev) // runs an update with `input` set to `ev`\n  }\n\n  return (\n    <div>\n      <div className=\"w-full flex flex-row space-x-2\">\n        <button\n          className={`\n            flex-1 rounded\n            bg-${running ? \"green\" : \"red\"}-100\n            hover:bg-${running ? \"green\" : \"red\"}-200\n          `}\n          onClick={toggleRunning}\n        >\n          {running ? \"Running\" : \"Stopped\"}\n        </button>\n\n        <button\n          className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n          onClick={() => update({ type: 'simulate', dt: 16 })}\n        >\n          Step\n        </button>\n      </div> \n\n      <svg\n        tabIndex={-1}\n        className=\"w-full\"\n        height={height}\n        onKeyDown={react}\n        onKeyUp={react}\n      >\n        <defs>\n          <pattern id=\"platform\" patternUnits=\"userSpaceOnUse\" width={tileSize} height={tileSize}>\n            <image href={Tiles.ground.src} width={tileSize} height={tileSize} />\n          </pattern>\n        </defs>\n      \n        <rect transform=\"translate(0, 336)\" width=\"2000\" height={tileSize} fill=\"url(#platform)\" />\n      \n        <image\n          transform={`\n            translate(${state.x}, ${ground - state.y})\n            scale(${state.xSpeed < 0 ? 1 : -1}, 1)\n            translate(${-tileSize/2}, ${-tileSize})\n          `}\n          href={Tiles.character.src}\n          width={tileSize}\n          height={tileSize}\n          />\n      </svg>\n    </div>\n  )\n}"}}}]}}}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":37,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":38,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":42,"name":"","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":25,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":39,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Real Game","note":{"type":"text","tag":"h2","text":"Real Game"}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Let's make it a \"real\" game by adding some enemies, lives, mobile input, framerate handling and canvas rendering. (Still missing are more visual effects and sounds)","note":{"type":"text","tag":"p","text":"Let's make it a \"real\" game by adding some enemies, lives, mobile input, framerate handling and canvas rendering. (Still missing are more visual effects and sounds)"}}},{"id":43,"name":"realGame","visibility":"block","width":"wide","state":{"t":"resheet.note","v":1,"level":0,"input":"/Debug.Inspect(Game)","note":{"type":"block","isInstantiated":true,"code":"Debug.Inspect(Game)","state":{"init":"({\n  score: 0,\n  lives: 10,\n  character: {\n    x: 100,\n    y: 400,\n    xSpeed: 0,\n    ySpeed: 0,\n  },\n  enemies: [],\n})","update":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The current state:","note":{"type":"text","tag":"p","text":"The current state:"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state","note":{"type":"expr","code":" state"}}},{"id":58,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"The input:","note":{"type":"text","tag":"p","text":"The input:"}}},{"id":59,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":61,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":60,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Respect the framerate:","note":{"type":"text","tag":"p","text":"Respect the framerate:"}}},{"id":62,"name":"dt","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input?.dt ?? 16","note":{"type":"expr","code":" input?.dt ?? 16"}}},{"id":64,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Calculate in px/s:","note":{"type":"text","tag":"p","text":"Calculate in px/s:"}}},{"id":63,"name":"factor","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= dt / 1000","note":{"type":"expr","code":" dt / 1000"}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulate Character","note":{"type":"text","tag":"h3","text":"Simulate Character"}}},{"id":4,"name":"character","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.character","note":{"type":"expr","code":" state.character"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Gravity means decelerating:","note":{"type":"text","tag":"p","text":"Gravity means decelerating:"}}},{"id":6,"name":"gravity","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...character, ySpeed: character.ySpeed - 40 * factor }","note":{"type":"expr","code":" { ...character, ySpeed: character.ySpeed - 40 * factor }"}}},{"id":7,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jumping means getting some upwards velocity:","note":{"type":"text","tag":"p","text":"Jumping means getting some upwards velocity:"}}},{"id":9,"name":"jump","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...character, ySpeed: 14 }","note":{"type":"expr","code":" { ...character, ySpeed: 14 }"}}},{"id":10,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":11,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Jump if on ground or otherwise let gravity pull us down:","note":{"type":"text","tag":"p","text":"Jump if on ground or otherwise let gravity pull us down:"}}},{"id":12,"name":"forces","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= character.y <= 0 ? jump : gravity","note":{"type":"expr","code":" character.y <= 0 ? jump : gravity"}}},{"id":13,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":14,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move according to speed:","note":{"type":"text","tag":"p","text":"Move according to speed:"}}},{"id":15,"name":"simulatedCharacter","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}","note":{"type":"expr","code":" {\n  ...forces,\n  x: forces.x + forces.xSpeed,\n  y: forces.y + forces.ySpeed,\n}"}}},{"id":16,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":17,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Simulate Enemies","note":{"type":"text","tag":"h3","text":"Simulate Enemies"}}},{"id":18,"name":"enemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.enemies","note":{"type":"expr","code":" state.enemies"}}},{"id":19,"name":"enemySize","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= 32","note":{"type":"expr","code":" 32"}}},{"id":20,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":21,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Move enemies:","note":{"type":"text","tag":"p","text":"Move enemies:"}}},{"id":22,"name":"movedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= enemies.map(enemyPosition => enemyPosition - 160 * factor)","note":{"type":"expr","code":" enemies.map(enemyPosition => enemyPosition - 160 * factor)"}}},{"id":23,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":24,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Randomly add enemies:","note":{"type":"text","tag":"p","text":"Randomly add enemies:"}}},{"id":25,"name":"addedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= [ ...movedEnemies, ...(Math.random() < 0.6 * factor ? [1300] : []) ]","note":{"type":"expr","code":" [ ...movedEnemies, ...(Math.random() < 0.6 * factor ? [1300] : []) ]"}}},{"id":26,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":27,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Filter enemies that have passed:","note":{"type":"text","tag":"p","text":"Filter enemies that have passed:"}}},{"id":28,"name":"passedAndLeftEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.partition(addedEnemies, enemyPos => enemyPos < -enemySize)","note":{"type":"expr","code":" lodash.partition(addedEnemies, enemyPos => enemyPos < -enemySize)"}}},{"id":29,"name":"passedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= passedAndLeftEnemies[0]","note":{"type":"expr","code":" passedAndLeftEnemies[0]"}}},{"id":30,"name":"leftEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= passedAndLeftEnemies[1]","note":{"type":"expr","code":" passedAndLeftEnemies[1]"}}},{"id":31,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":32,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Lives, Collisions and Score ","note":{"type":"text","tag":"h3","text":"Lives, Collisions and Score "}}},{"id":33,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Add passed enemies to score:","note":{"type":"text","tag":"p","text":"Add passed enemies to score:"}}},{"id":34,"name":"score","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.score + passedEnemies.length","note":{"type":"expr","code":" state.score + passedEnemies.length"}}},{"id":35,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":36,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Find collisions with enemies:","note":{"type":"text","tag":"p","text":"Find collisions with enemies:"}}},{"id":37,"name":"collidedAndUntouchedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= lodash.partition(leftEnemies, enemyPos =>\n    simulatedCharacter.y <= enemySize\n    && Math.abs(simulatedCharacter.x - enemyPos) <= enemySize\n)","note":{"type":"expr","code":" lodash.partition(leftEnemies, enemyPos =>\n    simulatedCharacter.y <= enemySize\n    && Math.abs(simulatedCharacter.x - enemyPos) <= enemySize\n)"}}},{"id":38,"name":"collidedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedAndUntouchedEnemies[0]","note":{"type":"expr","code":" collidedAndUntouchedEnemies[0]"}}},{"id":39,"name":"untouchedEnemies","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedAndUntouchedEnemies[1]","note":{"type":"expr","code":" collidedAndUntouchedEnemies[1]"}}},{"id":40,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":41,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Take a life on collision:","note":{"type":"text","tag":"p","text":"Take a life on collision:"}}},{"id":42,"name":"collided","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collidedEnemies.length > 0","note":{"type":"expr","code":" collidedEnemies.length > 0"}}},{"id":43,"name":"leftLives","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= collided ? state.lives - 1 : state.lives","note":{"type":"expr","code":" collided ? state.lives - 1 : state.lives"}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":45,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final Simulated State","note":{"type":"text","tag":"h3","text":"Final Simulated State"}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"One last thing: Are we even still alive to begin with?","note":{"type":"text","tag":"p","text":"One last thing: Are we even still alive to begin with?"}}},{"id":47,"name":"alive","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= state.lives > 0","note":{"type":"expr","code":" state.lives > 0"}}},{"id":48,"name":"simulation","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"!alive ?\n  state\n:\n  {\n    ...state,\n    score,\n    lives: leftLives,\n    character: simulatedCharacter,\n    enemies: untouchedEnemies,\n  }"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### React to Input","note":{"type":"text","tag":"h3","text":"React to Input"}}},{"id":51,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input","note":{"type":"expr","code":" input"}}},{"id":52,"name":"xSpeed","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"// input changes character's xSpeed\nconst previous = state.character.xSpeed\n\nconst speed = 250 * factor\n\nif (!input) return previous;\n\n// This is not 100% correct, but let's keep it simple\nif (input.type === 'keyup') return 0;\nif (input.type === 'pointerup') return 0;\n\nif (input.type === 'keydown') {\n  if (input.key === 'ArrowLeft') return -speed;\n  if (input.key === 'ArrowRight') return speed;\n}\n\nif (input.type === 'pointerdown') {\n  const rect = input.target.getBoundingClientRect()\n  if (input.clientX - rect.x < rect.width / 2) return -speed;\n  if (input.clientX - rect.x > rect.width / 2) return speed;\n}\n\nreturn previous"}}},{"id":53,"name":"reaction","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= { ...state, character: { ...state.character, xSpeed } }","note":{"type":"expr","code":" { ...state, character: { ...state.character, xSpeed } }"}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"### Final State","note":{"type":"text","tag":"h3","text":"Final State"}}},{"id":56,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"Decide which state to use based on the input:","note":{"type":"text","tag":"p","text":"Decide which state to use based on the input:"}}},{"id":57,"name":"finalState","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"= input?.type === 'simulate' ? simulation : reaction","note":{"type":"expr","code":" input?.type === 'simulate' ? simulation : reaction"}}}]},"render":{"t":"resheet.sheet","v":2,"lines":[{"id":1,"name":"Controls","visibility":"result","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"function Controls({ state, update, running, toggleRunning }) {\n  return (\n    <div className=\"w-full flex flex-row space-x-2\">\n      <button\n        className={`\n          flex-1 rounded\n          bg-${running ? \"green\" : \"red\"}-100\n          hover:bg-${running ? \"green\" : \"red\"}-200\n        `}\n        onClick={toggleRunning}\n      >\n        {running ? \"Running\" : \"Stopped - click to play\"}\n      </button>\n\n      <button\n        className=\"flex-1 rounded bg-blue-100 hover:bg-blue-200\"\n        onClick={() => update({ type: 'simulate', dt: 16 })}\n      >\n        Step\n      </button>\n    </div> \n  )\n}"}}},{"id":0,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"const height = 400;\nconst width = 800;\nconst tileSize = 64;\nconst ground = height - tileSize;\n\nfunction GameView({ state, update }) {\n  const { running, toggleRunning } = useAnimation(dt => update({ type: 'simulate', dt }))\n  \n  function react(ev) {\n    ev.preventDefault()\n    ev.stopPropagation()\n    ev.target.focus()\n    \n    update(ev) // runs an update with `input` set to `ev`\n  }\n  \n  const canvasRef = React.useRef(null)\n  \n  React.useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Setting up canvas dimensions\n    canvas.width = width;\n    canvas.height = height;\n\n    // Draw the platform\n    const ptrn = ctx.createPattern(Tiles.ground, 'repeat');\n    ctx.save();\n    ctx.fillStyle = ptrn;\n    ctx.translate(0, 336);\n    ctx.scale(tileSize / Tiles.ground.naturalWidth, tileSize / Tiles.ground.naturalHeight);\n    ctx.fillRect(0, 0, width, tileSize);\n    ctx.restore();\n\n    // Draw the character\n    ctx.save();\n    ctx.translate(state.character.x, height - tileSize - state.character.y);\n    if (state.lives <= 0) ctx.rotate(90 * Math.PI / 180);\n    if (state.character.xSpeed >= 0) ctx.scale(-1, 1);\n    ctx.drawImage(Tiles.character, -tileSize/2, -tileSize, tileSize, tileSize);\n    ctx.restore();\n\n    // Draw enemies\n    state.enemies.forEach(enemyPos => {\n      ctx.save();\n      ctx.translate(enemyPos, height - tileSize);\n      ctx.scale(0.5, 0.5);\n      ctx.drawImage(Tiles.enemy, -tileSize/2, -tileSize, tileSize, tileSize);\n      ctx.restore();\n    });\n\n    // Draw text\n    ctx.font = '20px Arial';\n    ctx.fillStyle = 'black';\n    ctx.fillText(`Lives: ${\"❤️\".repeat(state.lives)}`, 20, 30);\n    ctx.fillText(`Score: ${state.score} x ⭐️`, 20, 60);\n    \n    ctx.font = '16px Arial';\n    ctx.fillStyle = '#888';\n    ctx.fillText('Use the arrow keys or press on the left and right', 20, 90);\n    \n    if (state.lives <= 0) {\n      ctx.fillStyle = 'red';\n      ctx.font = '40px Arial';\n      ctx.fillText('Game Over', 50, 200);\n    }\n  }, [state]);\n\n\n  return (\n    <div>\n      <Controls state={state} update={update} running={running} toggleRunning={toggleRunning} />\n      <canvas\n        ref={canvasRef}\n        tabIndex={-1}\n        className=\"w-full\"\n        onKeyDown={react}\n        onKeyUp={react}\n        onPointerDownCapture={react}\n        onPointerUpCapture={react}\n        />\n    </div>\n  )\n}"}}}]}}}}},{"id":44,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":45,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":46,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":52,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":53,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":54,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":55,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":47,"name":"","visibility":"block","width":"full","state":{"t":"resheet.note","v":1,"level":0,"input":"---","note":{"type":"text","tag":"p","text":"---"}}},{"id":49,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"## Preview","note":{"type":"text","tag":"h2","text":"Preview"}}},{"id":50,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":51,"name":"preview","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"Util.WithEnv(\n  env => ({ ...env, Tiles, useAnimation }),\n  realGame.derivedBlock,\n)"}}}]}},"isCollapsed":true,"children":[{"id":0,"name":"Tiles","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[{"id":4,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"# Tiles","note":{"type":"text","tag":"h1","text":"Tiles"}}},{"id":5,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"from kenney.nl","note":{"type":"text","tag":"p","text":"from kenney.nl"}}},{"id":0,"name":"groundFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"iVBORw0KGgoAAAANSUhEUgAAABIAAAASBAMAAACk4JNkAAAABGdBTUEAALGPC/xhBQAAABJQTFRF9KxmNuN3n1pSLrCCQ0pfy4FePNWy0QAAADtJREFUCNdjcIEBBgRLEAaQWMYwgJWlbGwEQQxKxkoQxKAEAwyhMABjsYJYqqGhSnAxGCsIRR2QhcV9AJFcJViCy6XLAAAAAElFTkSuQmCC","name":"tile_0002.png","options":{"type":"image/png","lastModified":1696663628000}}}}}},{"id":1,"name":"charFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAABhQTFRFAAAANJleQ0pfhva7////WtKMNGVHvt7xFlk/CQAAAAF0Uk5TAEDm2GYAAACESURBVBjTbdAxDsIwDAXQTGXuwgF6BSROgOQTODMIxV0ZrPr62P7xUMSf8mQr+klrP7HMPOvDQ6mLUgyUPgHCmgasEHtqh3h2o4RkgENuHtmBd+BeYE9hBPpfbLwVDMirjbCWDbybDxjdTq1P72kLWj8BXDAh6/W1yvwQ4T64sIw+cusLm7JKEh9ouLwAAAAASUVORK5CYII=","name":"tile_0000.png","options":{"type":"image/png","lastModified":1696663636000}}}}}},{"id":7,"name":"enemyFile","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/LoadFile","note":{"type":"block","isInstantiated":true,"code":"LoadFile","state":{"state":"loaded","file":{"content":"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAABJQTFRFAAAAy4Fe/////uSB9LQbbz5D7N5EzgAAAAF0Uk5TAEDm2GYAAABTSURBVBjTY2AgFoRCAYjNCuMEgDjBxmBgiskJcQEDVwhHEMQWxMZBUeYSGuIaCue4hriGuGBVFqSkpIrQo6QE1yMCknGEcUBaHLEYgOwFFM8RBQCbzywIlKpD5AAAAABJRU5ErkJggg==","name":"tile_0012.png","options":{"type":"image/png","lastModified":1696663634000}}}}}},{"id":3,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"","note":{"type":"text","tag":"p","text":""}}},{"id":8,"name":"finreg","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"window.finreg = (\n  window.finreg\n  || new FinalizationRegistry(finalizer => finalizer())\n)\nwindow.finreg"}}},{"id":9,"name":"image","visibility":"result","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"async function image(blob) {\n  const image = new Image()\n  const url = URL.createObjectURL(blob)\n  image.src = url\n  finreg.register(image, () => URL.revokeObjectURL(url))\n  await image.decode()\n  return image\n}"}}},{"id":2,"name":"","visibility":"block","width":"narrow","state":{"t":"resheet.note","v":1,"level":0,"input":"/Code","note":{"type":"block","isInstantiated":true,"code":"Code","state":"({\n  character: await image(charFile),\n  ground: await image(groundFile),\n  enemy: await image(enemyFile),\n})"}}}]}},"isCollapsed":false,"children":[]},{"id":3,"name":"Game","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"Code","inner":"const { fieldDispatcher } = resheet.util.dispatch\n\n// The builtin Blocks used for editing the initial state, update logic and render logic\nconst initBlock = resheet.blocks.component.safeBlock(Code)\nconst updateBlock = resheet.blocks.component.safeBlock(SheetOf(Note))\nconst renderBlock = resheet.blocks.component.safeBlock(SheetOf(Note))\n\n\n// helper component to reduce rendering overhead when closed\nfunction Details({ open=false, children }) {\n  const [opened, setOpened] = React.useState(open)\n  \n  return (\n    <details open={opened} onToggle={ev => setOpened(ev.target.open)}>\n      {children[0]}\n      {opened && children.slice(1)}\n    </details>\n  )\n}\n\n\n// create a dispatcher that enhances the env\nfunction enhanceEnv(dispatch, enhance) {\n  return function dispatchWithEnhancedEnv(action) {\n    dispatch((state, { env }) =>\n      action(state, { env: enhance(env, state) })\n    )\n  }\n}\n\n// create the env for the update logic, adding the current state and input\nfunction updateEnv(env, state) {\n  return { ...env, state: state.state, input: state.input }\n}\n\n// the dispatcher for the update block\nfunction updateDispatcher(dispatch) {\n  return (\n    fieldDispatcher(\n      'updateState',\n      enhanceEnv(dispatch, updateEnv),\n    )\n  )\n}\n  \n\n// create the env for the render logic, adding the current state and act procedure\nfunction renderEnv(env, state, dispatch) {\n  return {\n    ...env,\n    state: state.state,\n    update(input) {\n      update(dispatch, state => ({\n        ...state,\n        input\n      }))\n    },\n  }\n}\n\n// the dispatcher for the render block\nfunction renderDispatcher(dispatch) {\n  return (\n    fieldDispatcher(\n      'renderState',\n      enhanceEnv(dispatch, (env, state) => renderEnv(env, state, dispatch)),\n    )\n  )\n}\n\n\n// all dispatchers for the different embedded blocks\nfunction dispatchers(dispatch) {\n  return {\n    init: fieldDispatcher('initState', dispatch),\n    update: updateDispatcher(dispatch),\n    render: renderDispatcher(dispatch),\n  }\n}\n\n\nfunction update(dispatch, fn) {\n  const disp = dispatchers(dispatch)\n\n  dispatch((state, { env }) => {\n    const fnState = fn(state, env)\n    \n    const updateState = updateBlock.recompute(\n      fnState.updateState,\n      disp.update,\n      updateEnv(env, fnState),\n      immutable.Set(['state', 'input']),\n    ).state\n    \n    const newState = {\n      ...fnState,\n      updateState,\n      state: updateBlock.getResult(updateState),\n    }\n    \n    const renderState = renderBlock.recompute(\n      newState.renderState,\n      disp.render,\n      renderEnv(env, newState, dispatch),\n      immutable.Set(['state']),\n    ).state\n\n\n    return {\n      state: {\n        ...newState,\n        renderState,\n      }\n    }\n  })\n}\n\nfunction recompute(state, dispatch, env, changed) {\n  const disp = dispatchers(dispatch)\n  \n  const initState = initBlock.recompute(\n    state.initState,\n    disp.init,\n    env,\n    changed,\n  ).state\n  \n  const updateState = updateBlock.recompute(\n    state.updateState,\n    disp.update,\n    updateEnv(env, state),\n    changed,\n  ).state\n  \n  const renderState = renderBlock.recompute(\n    state.renderState,\n    disp.render,\n    renderEnv(env, state, dispatch),\n    changed,\n  ).state\n  \n  return {\n    ...state,\n    initState,\n    updateState,\n    renderState,\n  }\n}\n\n\n\n// create the Game Block\nresheet.core.block.create({\n  // initial block state\n  init: {\n    state: initBlock.getResult(initBlock.init),\n    input: undefined,\n    initState: initBlock.init,\n    updateState: updateBlock.init,\n    renderState: renderBlock.init,\n  },\n  \n  // rendering the block\n  view({ state, dispatch, env }) {\n    const disp = dispatchers(dispatch)\n        \n    function reset() {\n      dispatch((state, { env }) => ({\n        state: recompute(\n          { ...state, state: initBlock.getResult(state.initState) },\n          dispatch,\n          env,\n          immutable.Set(['state']),\n        )\n      }))\n    }\n    \n    function updateGame(input) {\n      update(dispatch, state => ({\n        ...state,\n        input\n      }))\n    }\n\n    const rendered = renderBlock.getResult(state.renderState)\n    \n    return (\n      <div>\n        <Details>\n          <summary className=\"text-lg mb-2\">Initial State</summary>\n          <initBlock.Component\n            state={state.initState}\n            dispatch={disp.init}\n            env={env}\n            />\n        </Details>\n        \n        <Details>\n          <summary className=\"text-lg mb-2 mt-6\">Update State</summary>\n          <updateBlock.Component\n            state={state.updateState}\n            dispatch={disp.update}\n            env={updateEnv(env, state)}\n            />\n        </Details>\n        \n        <Details open>\n          <summary className=\"text-lg mb-2 mt-6\">Current State</summary>\n          <reactInspector.Inspector data={state.state} />\n        </Details>\n\n        <button\n          className=\"w-full rounded bg-blue-100 hover:bg-blue-200\"\n          onClick={reset}\n        >\n          Reset\n        </button>\n\n        <Details>\n          <summary className=\"text-lg mb-2 mt-6\">Render</summary>\n          <renderBlock.Component\n            state={state.renderState}\n            dispatch={disp.render}\n            env={renderEnv(env, state, dispatch)}\n            />\n        </Details>\n        \n        <resheet.code.value.ErrorBoundary\n          title=\"There was an error in your Renderer\"\n          viewError={error => <resheet.code.value.ErrorInspector error={error} />}\n          autoReset\n        >\n          {React.isValidElement(rendered) && React.createElement(() => rendered)}\n          {typeof rendered === 'function' &&\n            React.createElement(rendered, {\n              state: state.state,\n              update: updateGame,\n            })\n          }\n        </resheet.code.value.ErrorBoundary>\n      </div>\n    )\n  },\n\n  // the block's reported value\n  getResult(state) {\n    return state.state\n  },\n  \n  // loading logic\n  fromJSON(json, dispatch, env) {\n    const disp = dispatchers(dispatch)\n\n    const initState = initBlock.fromJSON(json.init, disp.init, env)\n    const initResult = initBlock.getResult(initState)\n    \n    const envUpdate = updateEnv(env, { state: initResult, input: undefined })\n    const updateState = updateBlock.fromJSON(json.update, disp.update, envUpdate)\n    \n    const envRender = renderEnv(env, { state: initResult }, dispatch)\n    const renderState = renderBlock.fromJSON(json.render, disp.render, envRender)\n    \n    return {\n      state: initResult,\n      initState,\n      updateState,\n      renderState,\n    }\n  },\n  \n  // saving logic\n  toJSON(state) {\n    return {\n      init: initBlock.toJSON(state.initState),\n      update: updateBlock.toJSON(state.updateState),\n      render: updateBlock.toJSON(state.renderState),\n    }\n  },\n  \n  // recomputation logic if something in env changed\n  recompute(state, dispatch, env, changed) {\n    const newState = recompute(state, dispatch, env, changed)\n    \n    return {\n      state: newState,\n      invalidated: false,\n    }\n  },\n})"},"isCollapsed":false,"children":[]},{"id":4,"name":"useAnimation","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"Code","inner":"function useAnimation(step) {\n  const [running, setRunning] = React.useState(false)\n  const stepRef = React.useRef(step)\n  stepRef.current = step\n  \n  React.useEffect(() => {\n    let raf = null\n    let lastTime = null\n    \n    function animate() {\n      const time = performance.now()\n      \n      stepRef.current(lastTime === null ? 0 : time - lastTime)\n      \n      lastTime = time\n      raf = requestAnimationFrame(animate)\n    }\n    \n    if (running) {\n      raf = requestAnimationFrame(animate)\n    }\n    \n    return () => raf && cancelAnimationFrame(raf)\n  }, [running])\n  \n  function toggleRunning() {\n    setRunning(running => !running)\n  }\n  \n  return {\n    running,\n    setRunning,\n    toggleRunning,\n  }\n}"},"isCollapsed":false,"children":[]}]}]}],"viewState":{"sidebarOpen":false,"openPage":[4]},"template":{"id":2,"name":"","state":{"t":"resheet.selector","v":0,"mode":"run","expr":"SheetOf(Note)","inner":{"t":"resheet.sheet","v":2,"lines":[]}},"isCollapsed":false,"children":[]}}}